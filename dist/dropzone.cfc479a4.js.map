{"version":3,"sources":["components/pageComponent/dropzone/dropzone.js"],"names":["Dropzone","Emitter","camelize","contentLoaded","detectVerticalSquash","drawImageIOSFix","noop","without","__slice","slice","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","addEventListener","on","event","fn","_callbacks","push","emit","args","callback","callbacks","_i","_len","arguments","length","apply","removeListener","off","removeAllListeners","removeEventListener","i","splice","_super","extend","resolveOption","events","defaultOptions","url","method","withCredentials","parallelUploads","uploadMultiple","maxFilesize","paramName","createImageThumbnails","maxThumbnailFilesize","thumbnailWidth","thumbnailHeight","filesizeBase","maxFiles","params","clickable","ignoreHiddenFiles","acceptedFiles","acceptedMimeTypes","autoProcessQueue","autoQueue","addRemoveLinks","previewsContainer","hiddenInputContainer","capture","renameFilename","dictDefaultMessage","dictFallbackMessage","dictFallbackText","dictFileTooBig","dictInvalidFileType","dictResponseError","dictCancelUpload","dictCancelUploadConfirmation","dictRemoveFile","dictRemoveFileConfirmation","dictMaxFilesExceeded","accept","file","done","init","forceFallback","fallback","messageElement","span","_ref","element","className","getElementsByTagName","test","createElement","appendChild","textContent","options","innerText","getFallbackForm","resize","info","srcRatio","trgRatio","srcX","srcY","srcWidth","width","srcHeight","height","optWidth","optHeight","trgHeight","trgWidth","drop","e","classList","remove","dragstart","dragend","dragenter","add","dragover","dragleave","paste","reset","addedfile","node","removeFileEvent","removeLink","_j","_k","_len1","_len2","_ref1","_ref2","_results","previewElement","previewTemplate","trim","querySelectorAll","_renameFilename","name","innerHTML","filesize","size","_removeLink","_this","preventDefault","stopPropagation","status","UPLOADING","confirm","removeFile","removedfile","parentNode","removeChild","_updateMaxFilesReachedClass","thumbnail","dataUrl","thumbnailElement","alt","src","setTimeout","error","message","errormultiple","processing","processingmultiple","uploadprogress","progress","bytesSent","nodeName","value","style","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","maxfilesexceeded","maxfilesreached","queuecomplete","addedfiles","object","objects","target","val","elementOptions","version","replace","clickableElements","listeners","files","document","querySelector","nodeType","Error","dropzone","instances","optionsForElement","isBrowserSupported","getAttribute","toUpperCase","getExistingFallback","getElement","getElements","getAcceptedFiles","accepted","getRejectedFiles","getFilesWithStatus","getQueuedFiles","QUEUED","getUploadingFiles","getAddedFiles","ADDED","getActiveFiles","eventName","noPropagation","setupHiddenFileInput","tagName","setAttribute","contains","hiddenFileInput","visibility","position","top","left","addFile","URL","window","webkitURL","updateTotalUploadProgress","returnValue","efct","dataTransfer","effectAllowed","_error","dropEffect","forEach","clickableElement","evt","elementInside","click","enable","destroy","disable","removeAllFiles","indexOf","activeFiles","totalBytes","totalBytesSent","totalUploadProgress","upload","total","_getParamName","n","existingFallback","fields","fieldsString","form","getFallback","elements","el","setupEventListeners","elementListeners","listener","_results1","removeEventListeners","cancelUpload","cutoff","selectedSize","selectedUnit","unit","units","Math","pow","round","items","webkitGetAsEntry","_addFilesFromItems","handleFiles","clipboardData","entry","item","isFile","getAsFile","isDirectory","_addFilesFromDirectory","kind","directory","path","dirReader","errorHandler","readEntries","createReader","console","log","entries","substring","fullPath","isValidFile","_enqueueThumbnail","_errorProcessing","enqueueFile","enqueueFiles","processQueue","_thumbnailQueue","_processingThumbnail","type","match","_processThumbnailQueue","createThumbnail","shift","cancelIfNecessary","fileReader","FileReader","onload","result","createThumbnailFromUrl","readAsDataURL","imageUrl","crossOrigin","img","canvas","ctx","resizeInfo","_ref3","getContext","trgX","trgY","toDataURL","onerror","processingLength","queuedFiles","processFiles","processFile","uploadFiles","_getFilesWithXhr","xhr","groupedFile","groupedFiles","CANCELED","abort","option","uploadFile","formData","handleError","headerName","headerValue","headers","input","inputName","inputType","progressObj","response","updateProgress","_l","_len3","_m","_ref4","_ref5","XMLHttpRequest","open","allFilesFinished","loaded","readyState","responseText","getResponseHeader","JSON","parse","_finished","onprogress","setRequestHeader","FormData","append","hasAttribute","selected","toLowerCase","checked","submitRequest","send","SUCCESS","ERROR","forElement","autoDiscover","discover","checkElements","dropzones","blacklistedBrowsers","capableBrowser","regex","File","FileList","Blob","navigator","userAgent","list","rejectedItem","str","charAt","string","div","childNodes","container","els","Array","question","rejected","baseMimeType","mimeType","validType","split","jQuery","each","module","exports","ACCEPTED","PROCESSING","alpha","data","ey","ih","iw","py","ratio","sy","naturalWidth","naturalHeight","drawImage","getImageData","sx","sw","sh","dx","dy","dw","dh","vertSquashRatio","win","doc","poll","pre","rem","root","documentElement","doScroll","createEventObject","frameElement","_autoDiscoverFunction"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,CAAC,YAAW;AACV,MAAIA,QAAJ;AAAA,MAAcC,OAAd;AAAA,MAAuBC,QAAvB;AAAA,MAAiCC,aAAjC;AAAA,MAAgDC,oBAAhD;AAAA,MAAsEC,eAAtE;AAAA,MAAuFC,IAAvF;AAAA,MAA6FC,OAA7F;AAAA,MACEC,OAAO,GAAG,GAAGC,KADf;AAAA,MAEEC,SAAS,GAAG,GAAGC,cAFjB;AAAA,MAGEC,SAAS,GAAG,SAAZA,SAAY,CAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAE,SAAK,IAAIC,GAAT,IAAgBD,MAAhB,EAAwB;AAAE,UAAIJ,SAAS,CAACM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ,EAAiCF,KAAK,CAACE,GAAD,CAAL,GAAaD,MAAM,CAACC,GAAD,CAAnB;AAA2B;;AAAC,aAASE,IAAT,GAAgB;AAAE,WAAKC,WAAL,GAAmBL,KAAnB;AAA2B;;AAACI,IAAAA,IAAI,CAACE,SAAL,GAAiBL,MAAM,CAACK,SAAxB;AAAmCN,IAAAA,KAAK,CAACM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB;AAA8BJ,IAAAA,KAAK,CAACO,SAAN,GAAkBN,MAAM,CAACK,SAAzB;AAAoC,WAAON,KAAP;AAAe,GAHjS;;AAKAP,EAAAA,IAAI,GAAG,gBAAW,CAAE,CAApB;;AAEAL,EAAAA,OAAO,GAAI,YAAW;AACpB,aAASA,OAAT,GAAmB,CAAE;;AAErBA,IAAAA,OAAO,CAACkB,SAAR,CAAkBE,gBAAlB,GAAqCpB,OAAO,CAACkB,SAAR,CAAkBG,EAAvD;;AAEArB,IAAAA,OAAO,CAACkB,SAAR,CAAkBG,EAAlB,GAAuB,UAASC,KAAT,EAAgBC,EAAhB,EAAoB;AACzC,WAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;;AACA,UAAI,CAAC,KAAKA,UAAL,CAAgBF,KAAhB,CAAL,EAA6B;AAC3B,aAAKE,UAAL,CAAgBF,KAAhB,IAAyB,EAAzB;AACD;;AACD,WAAKE,UAAL,CAAgBF,KAAhB,EAAuBG,IAAvB,CAA4BF,EAA5B;;AACA,aAAO,IAAP;AACD,KAPD;;AASAvB,IAAAA,OAAO,CAACkB,SAAR,CAAkBQ,IAAlB,GAAyB,YAAW;AAClC,UAAIC,IAAJ,EAAUC,QAAV,EAAoBC,SAApB,EAA+BP,KAA/B,EAAsCQ,EAAtC,EAA0CC,IAA1C;;AACAT,MAAAA,KAAK,GAAGU,SAAS,CAAC,CAAD,CAAjB,EAAsBL,IAAI,GAAG,KAAKK,SAAS,CAACC,MAAf,GAAwB1B,OAAO,CAACQ,IAAR,CAAaiB,SAAb,EAAwB,CAAxB,CAAxB,GAAqD,EAAlF;AACA,WAAKR,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;AACAK,MAAAA,SAAS,GAAG,KAAKL,UAAL,CAAgBF,KAAhB,CAAZ;;AACA,UAAIO,SAAJ,EAAe;AACb,aAAKC,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGF,SAAS,CAACI,MAA9B,EAAsCH,EAAE,GAAGC,IAA3C,EAAiDD,EAAE,EAAnD,EAAuD;AACrDF,UAAAA,QAAQ,GAAGC,SAAS,CAACC,EAAD,CAApB;AACAF,UAAAA,QAAQ,CAACM,KAAT,CAAe,IAAf,EAAqBP,IAArB;AACD;AACF;;AACD,aAAO,IAAP;AACD,KAZD;;AAcA3B,IAAAA,OAAO,CAACkB,SAAR,CAAkBiB,cAAlB,GAAmCnC,OAAO,CAACkB,SAAR,CAAkBkB,GAArD;AAEApC,IAAAA,OAAO,CAACkB,SAAR,CAAkBmB,kBAAlB,GAAuCrC,OAAO,CAACkB,SAAR,CAAkBkB,GAAzD;AAEApC,IAAAA,OAAO,CAACkB,SAAR,CAAkBoB,mBAAlB,GAAwCtC,OAAO,CAACkB,SAAR,CAAkBkB,GAA1D;;AAEApC,IAAAA,OAAO,CAACkB,SAAR,CAAkBkB,GAAlB,GAAwB,UAASd,KAAT,EAAgBC,EAAhB,EAAoB;AAC1C,UAAIK,QAAJ,EAAcC,SAAd,EAAyBU,CAAzB,EAA4BT,EAA5B,EAAgCC,IAAhC;;AACA,UAAI,CAAC,KAAKP,UAAN,IAAoBQ,SAAS,CAACC,MAAV,KAAqB,CAA7C,EAAgD;AAC9C,aAAKT,UAAL,GAAkB,EAAlB;AACA,eAAO,IAAP;AACD;;AACDK,MAAAA,SAAS,GAAG,KAAKL,UAAL,CAAgBF,KAAhB,CAAZ;;AACA,UAAI,CAACO,SAAL,EAAgB;AACd,eAAO,IAAP;AACD;;AACD,UAAIG,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,eAAO,KAAKT,UAAL,CAAgBF,KAAhB,CAAP;AACA,eAAO,IAAP;AACD;;AACD,WAAKiB,CAAC,GAAGT,EAAE,GAAG,CAAT,EAAYC,IAAI,GAAGF,SAAS,CAACI,MAAlC,EAA0CH,EAAE,GAAGC,IAA/C,EAAqDQ,CAAC,GAAG,EAAET,EAA3D,EAA+D;AAC7DF,QAAAA,QAAQ,GAAGC,SAAS,CAACU,CAAD,CAApB;;AACA,YAAIX,QAAQ,KAAKL,EAAjB,EAAqB;AACnBM,UAAAA,SAAS,CAACW,MAAV,CAAiBD,CAAjB,EAAoB,CAApB;AACA;AACD;AACF;;AACD,aAAO,IAAP;AACD,KAtBD;;AAwBA,WAAOvC,OAAP;AAED,GA5DS,EAAV;;AA8DAD,EAAAA,QAAQ,GAAI,UAAS0C,MAAT,EAAiB;AAC3B,QAAIC,MAAJ,EAAYC,aAAZ;;AAEAhC,IAAAA,SAAS,CAACZ,QAAD,EAAW0C,MAAX,CAAT;;AAEA1C,IAAAA,QAAQ,CAACmB,SAAT,CAAmBlB,OAAnB,GAA6BA,OAA7B;AAGA;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEID,IAAAA,QAAQ,CAACmB,SAAT,CAAmB0B,MAAnB,GAA4B,CAAC,MAAD,EAAS,WAAT,EAAsB,SAAtB,EAAiC,WAAjC,EAA8C,UAA9C,EAA0D,WAA1D,EAAuE,WAAvE,EAAoF,YAApF,EAAkG,aAAlG,EAAiH,WAAjH,EAA8H,OAA9H,EAAuI,eAAvI,EAAwJ,YAAxJ,EAAsK,oBAAtK,EAA4L,gBAA5L,EAA8M,qBAA9M,EAAqO,SAArO,EAAgP,iBAAhP,EAAmQ,SAAnQ,EAA8Q,iBAA9Q,EAAiS,UAAjS,EAA6S,kBAA7S,EAAiU,UAAjU,EAA6U,kBAA7U,EAAiW,OAAjW,EAA0W,kBAA1W,EAA8X,iBAA9X,EAAiZ,eAAjZ,CAA5B;AAEA7C,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2B,cAAnB,GAAoC;AAClCC,MAAAA,GAAG,EAAE,IAD6B;AAElCC,MAAAA,MAAM,EAAE,MAF0B;AAGlCC,MAAAA,eAAe,EAAE,KAHiB;AAIlCC,MAAAA,eAAe,EAAE,CAJiB;AAKlCC,MAAAA,cAAc,EAAE,KALkB;AAMlCC,MAAAA,WAAW,EAAE,GANqB;AAOlCC,MAAAA,SAAS,EAAE,MAPuB;AAQlCC,MAAAA,qBAAqB,EAAE,IARW;AASlCC,MAAAA,oBAAoB,EAAE,EATY;AAUlCC,MAAAA,cAAc,EAAE,GAVkB;AAWlCC,MAAAA,eAAe,EAAE,GAXiB;AAYlCC,MAAAA,YAAY,EAAE,IAZoB;AAalCC,MAAAA,QAAQ,EAAE,IAbwB;AAclCC,MAAAA,MAAM,EAAE,EAd0B;AAelCC,MAAAA,SAAS,EAAE,IAfuB;AAgBlCC,MAAAA,iBAAiB,EAAE,IAhBe;AAiBlCC,MAAAA,aAAa,EAAE,IAjBmB;AAkBlCC,MAAAA,iBAAiB,EAAE,IAlBe;AAmBlCC,MAAAA,gBAAgB,EAAE,IAnBgB;AAoBlCC,MAAAA,SAAS,EAAE,IApBuB;AAqBlCC,MAAAA,cAAc,EAAE,KArBkB;AAsBlCC,MAAAA,iBAAiB,EAAE,IAtBe;AAuBlCC,MAAAA,oBAAoB,EAAE,MAvBY;AAwBlCC,MAAAA,OAAO,EAAE,IAxByB;AAyBlCC,MAAAA,cAAc,EAAE,IAzBkB;AA0BlCC,MAAAA,kBAAkB,EAAE,0CA1Bc;AA2BlCC,MAAAA,mBAAmB,EAAE,yDA3Ba;AA4BlCC,MAAAA,gBAAgB,EAAE,iFA5BgB;AA6BlCC,MAAAA,cAAc,EAAE,sEA7BkB;AA8BlCC,MAAAA,mBAAmB,EAAE,sCA9Ba;AA+BlCC,MAAAA,iBAAiB,EAAE,4CA/Be;AAgClCC,MAAAA,gBAAgB,EAAE,eAhCgB;AAiClCC,MAAAA,4BAA4B,EAAE,8CAjCI;AAkClCC,MAAAA,cAAc,EAAE,iBAlCkB;AAmClCC,MAAAA,0BAA0B,EAAE,IAnCM;AAoClCC,MAAAA,oBAAoB,EAAE,oCApCY;AAqClCC,MAAAA,MAAM,EAAE,gBAASC,IAAT,EAAeC,IAAf,EAAqB;AAC3B,eAAOA,IAAI,EAAX;AACD,OAvCiC;AAwClCC,MAAAA,IAAI,EAAE,gBAAW;AACf,eAAOhF,IAAP;AACD,OA1CiC;AA2ClCiF,MAAAA,aAAa,EAAE,KA3CmB;AA4ClCC,MAAAA,QAAQ,EAAE,oBAAW;AACnB,YAAI3E,KAAJ,EAAW4E,cAAX,EAA2BC,IAA3B,EAAiC3D,EAAjC,EAAqCC,IAArC,EAA2C2D,IAA3C;;AACA,aAAKC,OAAL,CAAaC,SAAb,GAAyB,KAAK,KAAKD,OAAL,CAAaC,SAAlB,GAA8B,2BAAvD;AACAF,QAAAA,IAAI,GAAG,KAAKC,OAAL,CAAaE,oBAAb,CAAkC,KAAlC,CAAP;;AACA,aAAK/D,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDlB,UAAAA,KAAK,GAAG8E,IAAI,CAAC5D,EAAD,CAAZ;;AACA,cAAI,uBAAuBgE,IAAvB,CAA4BlF,KAAK,CAACgF,SAAlC,CAAJ,EAAkD;AAChDJ,YAAAA,cAAc,GAAG5E,KAAjB;AACAA,YAAAA,KAAK,CAACgF,SAAN,GAAkB,YAAlB;AACA;AACD;AACF;;AACD,YAAI,CAACJ,cAAL,EAAqB;AACnBA,UAAAA,cAAc,GAAGzF,QAAQ,CAACgG,aAAT,CAAuB,+CAAvB,CAAjB;AACA,eAAKJ,OAAL,CAAaK,WAAb,CAAyBR,cAAzB;AACD;;AACDC,QAAAA,IAAI,GAAGD,cAAc,CAACK,oBAAf,CAAoC,MAApC,EAA4C,CAA5C,CAAP;;AACA,YAAIJ,IAAJ,EAAU;AACR,cAAIA,IAAI,CAACQ,WAAL,IAAoB,IAAxB,EAA8B;AAC5BR,YAAAA,IAAI,CAACQ,WAAL,GAAmB,KAAKC,OAAL,CAAa1B,mBAAhC;AACD,WAFD,MAEO,IAAIiB,IAAI,CAACU,SAAL,IAAkB,IAAtB,EAA4B;AACjCV,YAAAA,IAAI,CAACU,SAAL,GAAiB,KAAKD,OAAL,CAAa1B,mBAA9B;AACD;AACF;;AACD,eAAO,KAAKmB,OAAL,CAAaK,WAAb,CAAyB,KAAKI,eAAL,EAAzB,CAAP;AACD,OArEiC;AAsElCC,MAAAA,MAAM,EAAE,gBAASlB,IAAT,EAAe;AACrB,YAAImB,IAAJ,EAAUC,QAAV,EAAoBC,QAApB;AACAF,QAAAA,IAAI,GAAG;AACLG,UAAAA,IAAI,EAAE,CADD;AAELC,UAAAA,IAAI,EAAE,CAFD;AAGLC,UAAAA,QAAQ,EAAExB,IAAI,CAACyB,KAHV;AAILC,UAAAA,SAAS,EAAE1B,IAAI,CAAC2B;AAJX,SAAP;AAMAP,QAAAA,QAAQ,GAAGpB,IAAI,CAACyB,KAAL,GAAazB,IAAI,CAAC2B,MAA7B;AACAR,QAAAA,IAAI,CAACS,QAAL,GAAgB,KAAKb,OAAL,CAAa3C,cAA7B;AACA+C,QAAAA,IAAI,CAACU,SAAL,GAAiB,KAAKd,OAAL,CAAa1C,eAA9B;;AACA,YAAK8C,IAAI,CAACS,QAAL,IAAiB,IAAlB,IAA4BT,IAAI,CAACU,SAAL,IAAkB,IAAlD,EAAyD;AACvDV,UAAAA,IAAI,CAACS,QAAL,GAAgBT,IAAI,CAACK,QAArB;AACAL,UAAAA,IAAI,CAACU,SAAL,GAAiBV,IAAI,CAACO,SAAtB;AACD,SAHD,MAGO,IAAIP,IAAI,CAACS,QAAL,IAAiB,IAArB,EAA2B;AAChCT,UAAAA,IAAI,CAACS,QAAL,GAAgBR,QAAQ,GAAGD,IAAI,CAACU,SAAhC;AACD,SAFM,MAEA,IAAIV,IAAI,CAACU,SAAL,IAAkB,IAAtB,EAA4B;AACjCV,UAAAA,IAAI,CAACU,SAAL,GAAkB,IAAIT,QAAL,GAAiBD,IAAI,CAACS,QAAvC;AACD;;AACDP,QAAAA,QAAQ,GAAGF,IAAI,CAACS,QAAL,GAAgBT,IAAI,CAACU,SAAhC;;AACA,YAAI7B,IAAI,CAAC2B,MAAL,GAAcR,IAAI,CAACU,SAAnB,IAAgC7B,IAAI,CAACyB,KAAL,GAAaN,IAAI,CAACS,QAAtD,EAAgE;AAC9DT,UAAAA,IAAI,CAACW,SAAL,GAAiBX,IAAI,CAACO,SAAtB;AACAP,UAAAA,IAAI,CAACY,QAAL,GAAgBZ,IAAI,CAACK,QAArB;AACD,SAHD,MAGO;AACL,cAAIJ,QAAQ,GAAGC,QAAf,EAAyB;AACvBF,YAAAA,IAAI,CAACO,SAAL,GAAiB1B,IAAI,CAAC2B,MAAtB;AACAR,YAAAA,IAAI,CAACK,QAAL,GAAgBL,IAAI,CAACO,SAAL,GAAiBL,QAAjC;AACD,WAHD,MAGO;AACLF,YAAAA,IAAI,CAACK,QAAL,GAAgBxB,IAAI,CAACyB,KAArB;AACAN,YAAAA,IAAI,CAACO,SAAL,GAAiBP,IAAI,CAACK,QAAL,GAAgBH,QAAjC;AACD;AACF;;AACDF,QAAAA,IAAI,CAACG,IAAL,GAAY,CAACtB,IAAI,CAACyB,KAAL,GAAaN,IAAI,CAACK,QAAnB,IAA+B,CAA3C;AACAL,QAAAA,IAAI,CAACI,IAAL,GAAY,CAACvB,IAAI,CAAC2B,MAAL,GAAcR,IAAI,CAACO,SAApB,IAAiC,CAA7C;AACA,eAAOP,IAAP;AACD,OAzGiC;;AA2GlC;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACMa,MAAAA,IAAI,EAAE,cAASC,CAAT,EAAY;AAChB,eAAO,KAAKzB,OAAL,CAAa0B,SAAb,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,OArHiC;AAsHlCC,MAAAA,SAAS,EAAElH,IAtHuB;AAuHlCmH,MAAAA,OAAO,EAAE,iBAASJ,CAAT,EAAY;AACnB,eAAO,KAAKzB,OAAL,CAAa0B,SAAb,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,OAzHiC;AA0HlCG,MAAAA,SAAS,EAAE,mBAASL,CAAT,EAAY;AACrB,eAAO,KAAKzB,OAAL,CAAa0B,SAAb,CAAuBK,GAAvB,CAA2B,eAA3B,CAAP;AACD,OA5HiC;AA6HlCC,MAAAA,QAAQ,EAAE,kBAASP,CAAT,EAAY;AACpB,eAAO,KAAKzB,OAAL,CAAa0B,SAAb,CAAuBK,GAAvB,CAA2B,eAA3B,CAAP;AACD,OA/HiC;AAgIlCE,MAAAA,SAAS,EAAE,mBAASR,CAAT,EAAY;AACrB,eAAO,KAAKzB,OAAL,CAAa0B,SAAb,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD,OAlIiC;AAmIlCO,MAAAA,KAAK,EAAExH,IAnI2B;AAoIlCyH,MAAAA,KAAK,EAAE,iBAAW;AAChB,eAAO,KAAKnC,OAAL,CAAa0B,SAAb,CAAuBC,MAAvB,CAA8B,YAA9B,CAAP;AACD,OAtIiC;AAuIlCS,MAAAA,SAAS,EAAE,mBAAS5C,IAAT,EAAe;AACxB,YAAI6C,IAAJ,EAAUC,eAAV,EAA2BC,UAA3B,EAAuCpG,EAAvC,EAA2CqG,EAA3C,EAA+CC,EAA/C,EAAmDrG,IAAnD,EAAyDsG,KAAzD,EAAgEC,KAAhE,EAAuE5C,IAAvE,EAA6E6C,KAA7E,EAAoFC,KAApF,EAA2FC,QAA3F;;AACA,YAAI,KAAK9C,OAAL,KAAiB,KAAKxB,iBAA1B,EAA6C;AAC3C,eAAKwB,OAAL,CAAa0B,SAAb,CAAuBK,GAAvB,CAA2B,YAA3B;AACD;;AACD,YAAI,KAAKvD,iBAAT,EAA4B;AAC1BgB,UAAAA,IAAI,CAACuD,cAAL,GAAsB3I,QAAQ,CAACgG,aAAT,CAAuB,KAAKG,OAAL,CAAayC,eAAb,CAA6BC,IAA7B,EAAvB,CAAtB;AACAzD,UAAAA,IAAI,CAACwD,eAAL,GAAuBxD,IAAI,CAACuD,cAA5B;AACA,eAAKvE,iBAAL,CAAuB6B,WAAvB,CAAmCb,IAAI,CAACuD,cAAxC;AACAhD,UAAAA,IAAI,GAAGP,IAAI,CAACuD,cAAL,CAAoBG,gBAApB,CAAqC,gBAArC,CAAP;;AACA,eAAK/G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDkG,YAAAA,IAAI,GAAGtC,IAAI,CAAC5D,EAAD,CAAX;AACAkG,YAAAA,IAAI,CAAC/B,WAAL,GAAmB,KAAK6C,eAAL,CAAqB3D,IAAI,CAAC4D,IAA1B,CAAnB;AACD;;AACDR,UAAAA,KAAK,GAAGpD,IAAI,CAACuD,cAAL,CAAoBG,gBAApB,CAAqC,gBAArC,CAAR;;AACA,eAAKV,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGE,KAAK,CAACtG,MAA3B,EAAmCkG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDH,YAAAA,IAAI,GAAGO,KAAK,CAACJ,EAAD,CAAZ;AACAH,YAAAA,IAAI,CAACgB,SAAL,GAAiB,KAAKC,QAAL,CAAc9D,IAAI,CAAC+D,IAAnB,CAAjB;AACD;;AACD,cAAI,KAAKhD,OAAL,CAAahC,cAAjB,EAAiC;AAC/BiB,YAAAA,IAAI,CAACgE,WAAL,GAAmBpJ,QAAQ,CAACgG,aAAT,CAAuB,0EAA0E,KAAKG,OAAL,CAAanB,cAAvF,GAAwG,MAA/H,CAAnB;AACAI,YAAAA,IAAI,CAACuD,cAAL,CAAoB1C,WAApB,CAAgCb,IAAI,CAACgE,WAArC;AACD;;AACDlB,UAAAA,eAAe,GAAI,UAASmB,KAAT,EAAgB;AACjC,mBAAO,UAAShC,CAAT,EAAY;AACjBA,cAAAA,CAAC,CAACiC,cAAF;AACAjC,cAAAA,CAAC,CAACkC,eAAF;;AACA,kBAAInE,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAACyJ,SAA7B,EAAwC;AACtC,uBAAOzJ,QAAQ,CAAC0J,OAAT,CAAiBL,KAAK,CAAClD,OAAN,CAAcpB,4BAA/B,EAA6D,YAAW;AAC7E,yBAAOsE,KAAK,CAACM,UAAN,CAAiBvE,IAAjB,CAAP;AACD,iBAFM,CAAP;AAGD,eAJD,MAIO;AACL,oBAAIiE,KAAK,CAAClD,OAAN,CAAclB,0BAAlB,EAA8C;AAC5C,yBAAOjF,QAAQ,CAAC0J,OAAT,CAAiBL,KAAK,CAAClD,OAAN,CAAclB,0BAA/B,EAA2D,YAAW;AAC3E,2BAAOoE,KAAK,CAACM,UAAN,CAAiBvE,IAAjB,CAAP;AACD,mBAFM,CAAP;AAGD,iBAJD,MAIO;AACL,yBAAOiE,KAAK,CAACM,UAAN,CAAiBvE,IAAjB,CAAP;AACD;AACF;AACF,aAhBD;AAiBD,WAlBiB,CAkBf,IAlBe,CAAlB;;AAmBAqD,UAAAA,KAAK,GAAGrD,IAAI,CAACuD,cAAL,CAAoBG,gBAApB,CAAqC,kBAArC,CAAR;AACAJ,UAAAA,QAAQ,GAAG,EAAX;;AACA,eAAKL,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGE,KAAK,CAACvG,MAA3B,EAAmCmG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDF,YAAAA,UAAU,GAAGM,KAAK,CAACJ,EAAD,CAAlB;;AACAK,YAAAA,QAAQ,CAAChH,IAAT,CAAcyG,UAAU,CAAC9G,gBAAX,CAA4B,OAA5B,EAAqC6G,eAArC,CAAd;AACD;;AACD,iBAAOQ,QAAP;AACD;AACF,OAzLiC;AA0LlCkB,MAAAA,WAAW,EAAE,qBAASxE,IAAT,EAAe;AAC1B,YAAIO,IAAJ;;AACA,YAAIP,IAAI,CAACuD,cAAT,EAAyB;AACvB,cAAI,CAAChD,IAAI,GAAGP,IAAI,CAACuD,cAAb,KAAgC,IAApC,EAA0C;AACxChD,YAAAA,IAAI,CAACkE,UAAL,CAAgBC,WAAhB,CAA4B1E,IAAI,CAACuD,cAAjC;AACD;AACF;;AACD,eAAO,KAAKoB,2BAAL,EAAP;AACD,OAlMiC;AAmMlCC,MAAAA,SAAS,EAAE,mBAAS5E,IAAT,EAAe6E,OAAf,EAAwB;AACjC,YAAIC,gBAAJ,EAAsBnI,EAAtB,EAA0BC,IAA1B,EAAgC2D,IAAhC;;AACA,YAAIP,IAAI,CAACuD,cAAT,EAAyB;AACvBvD,UAAAA,IAAI,CAACuD,cAAL,CAAoBrB,SAApB,CAA8BC,MAA9B,CAAqC,iBAArC;AACA5B,UAAAA,IAAI,GAAGP,IAAI,CAACuD,cAAL,CAAoBG,gBAApB,CAAqC,qBAArC,CAAP;;AACA,eAAK/G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDmI,YAAAA,gBAAgB,GAAGvE,IAAI,CAAC5D,EAAD,CAAvB;AACAmI,YAAAA,gBAAgB,CAACC,GAAjB,GAAuB/E,IAAI,CAAC4D,IAA5B;AACAkB,YAAAA,gBAAgB,CAACE,GAAjB,GAAuBH,OAAvB;AACD;;AACD,iBAAOI,UAAU,CAAG,UAAShB,KAAT,EAAgB;AAClC,mBAAO,YAAW;AAChB,qBAAOjE,IAAI,CAACuD,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,kBAAlC,CAAP;AACD,aAFD;AAGD,WAJkB,CAIhB,IAJgB,CAAF,EAIN,CAJM,CAAjB;AAKD;AACF,OAnNiC;AAoNlC2C,MAAAA,KAAK,EAAE,eAASlF,IAAT,EAAemF,OAAf,EAAwB;AAC7B,YAAItC,IAAJ,EAAUlG,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA,YAAItD,IAAI,CAACuD,cAAT,EAAyB;AACvBvD,UAAAA,IAAI,CAACuD,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,UAAlC;;AACA,cAAI,OAAO4C,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,CAACD,KAA3C,EAAkD;AAChDC,YAAAA,OAAO,GAAGA,OAAO,CAACD,KAAlB;AACD;;AACD3E,UAAAA,IAAI,GAAGP,IAAI,CAACuD,cAAL,CAAoBG,gBAApB,CAAqC,wBAArC,CAAP;AACAJ,UAAAA,QAAQ,GAAG,EAAX;;AACA,eAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDkG,YAAAA,IAAI,GAAGtC,IAAI,CAAC5D,EAAD,CAAX;;AACA2G,YAAAA,QAAQ,CAAChH,IAAT,CAAcuG,IAAI,CAAC/B,WAAL,GAAmBqE,OAAjC;AACD;;AACD,iBAAO7B,QAAP;AACD;AACF,OAnOiC;AAoOlC8B,MAAAA,aAAa,EAAElK,IApOmB;AAqOlCmK,MAAAA,UAAU,EAAE,oBAASrF,IAAT,EAAe;AACzB,YAAIA,IAAI,CAACuD,cAAT,EAAyB;AACvBvD,UAAAA,IAAI,CAACuD,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,eAAlC;;AACA,cAAIvC,IAAI,CAACgE,WAAT,EAAsB;AACpB,mBAAOhE,IAAI,CAACgE,WAAL,CAAiBlD,WAAjB,GAA+B,KAAKC,OAAL,CAAarB,gBAAnD;AACD;AACF;AACF,OA5OiC;AA6OlC4F,MAAAA,kBAAkB,EAAEpK,IA7Oc;AA8OlCqK,MAAAA,cAAc,EAAE,wBAASvF,IAAT,EAAewF,QAAf,EAAyBC,SAAzB,EAAoC;AAClD,YAAI5C,IAAJ,EAAUlG,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA,YAAItD,IAAI,CAACuD,cAAT,EAAyB;AACvBhD,UAAAA,IAAI,GAAGP,IAAI,CAACuD,cAAL,CAAoBG,gBAApB,CAAqC,0BAArC,CAAP;AACAJ,UAAAA,QAAQ,GAAG,EAAX;;AACA,eAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDkG,YAAAA,IAAI,GAAGtC,IAAI,CAAC5D,EAAD,CAAX;;AACA,gBAAIkG,IAAI,CAAC6C,QAAL,KAAkB,UAAtB,EAAkC;AAChCpC,cAAAA,QAAQ,CAAChH,IAAT,CAAcuG,IAAI,CAAC8C,KAAL,GAAaH,QAA3B;AACD,aAFD,MAEO;AACLlC,cAAAA,QAAQ,CAAChH,IAAT,CAAcuG,IAAI,CAAC+C,KAAL,CAAWnE,KAAX,GAAmB,KAAK+D,QAAL,GAAgB,GAAjD;AACD;AACF;;AACD,iBAAOlC,QAAP;AACD;AACF,OA7PiC;AA8PlCuC,MAAAA,mBAAmB,EAAE3K,IA9Pa;AA+PlC4K,MAAAA,OAAO,EAAE5K,IA/PyB;AAgQlC6K,MAAAA,eAAe,EAAE7K,IAhQiB;AAiQlC8K,MAAAA,OAAO,EAAE,iBAAShG,IAAT,EAAe;AACtB,YAAIA,IAAI,CAACuD,cAAT,EAAyB;AACvB,iBAAOvD,IAAI,CAACuD,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,YAAlC,CAAP;AACD;AACF,OArQiC;AAsQlC0D,MAAAA,eAAe,EAAE/K,IAtQiB;AAuQlCgL,MAAAA,QAAQ,EAAE,kBAASlG,IAAT,EAAe;AACvB,eAAO,KAAKzD,IAAL,CAAU,OAAV,EAAmByD,IAAnB,EAAyB,kBAAzB,CAAP;AACD,OAzQiC;AA0QlCmG,MAAAA,gBAAgB,EAAEjL,IA1QgB;AA2QlCkL,MAAAA,QAAQ,EAAE,kBAASpG,IAAT,EAAe;AACvB,YAAIA,IAAI,CAACgE,WAAT,EAAsB;AACpBhE,UAAAA,IAAI,CAACgE,WAAL,CAAiBlD,WAAjB,GAA+B,KAAKC,OAAL,CAAanB,cAA5C;AACD;;AACD,YAAII,IAAI,CAACuD,cAAT,EAAyB;AACvB,iBAAOvD,IAAI,CAACuD,cAAL,CAAoBrB,SAApB,CAA8BK,GAA9B,CAAkC,aAAlC,CAAP;AACD;AACF,OAlRiC;AAmRlC8D,MAAAA,gBAAgB,EAAEnL,IAnRgB;AAoRlCoL,MAAAA,gBAAgB,EAAEpL,IApRgB;AAqRlCqL,MAAAA,eAAe,EAAErL,IArRiB;AAsRlCsL,MAAAA,aAAa,EAAEtL,IAtRmB;AAuRlCuL,MAAAA,UAAU,EAAEvL,IAvRsB;AAwRlCsI,MAAAA,eAAe,EAAE;AAxRiB,KAApC;;AA2RAjG,IAAAA,MAAM,GAAG,kBAAW;AAClB,UAAI5B,GAAJ,EAAS+K,MAAT,EAAiBC,OAAjB,EAA0BC,MAA1B,EAAkCC,GAAlC,EAAuClK,EAAvC,EAA2CC,IAA3C;;AACAgK,MAAAA,MAAM,GAAG/J,SAAS,CAAC,CAAD,CAAlB,EAAuB8J,OAAO,GAAG,KAAK9J,SAAS,CAACC,MAAf,GAAwB1B,OAAO,CAACQ,IAAR,CAAaiB,SAAb,EAAwB,CAAxB,CAAxB,GAAqD,EAAtF;;AACA,WAAKF,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG+J,OAAO,CAAC7J,MAA5B,EAAoCH,EAAE,GAAGC,IAAzC,EAA+CD,EAAE,EAAjD,EAAqD;AACnD+J,QAAAA,MAAM,GAAGC,OAAO,CAAChK,EAAD,CAAhB;;AACA,aAAKhB,GAAL,IAAY+K,MAAZ,EAAoB;AAClBG,UAAAA,GAAG,GAAGH,MAAM,CAAC/K,GAAD,CAAZ;AACAiL,UAAAA,MAAM,CAACjL,GAAD,CAAN,GAAckL,GAAd;AACD;AACF;;AACD,aAAOD,MAAP;AACD,KAXD;;AAaA,aAAShM,QAAT,CAAkB4F,OAAlB,EAA2BO,OAA3B,EAAoC;AAClC,UAAI+F,cAAJ,EAAoB1G,QAApB,EAA8BG,IAA9B;;AACA,WAAKC,OAAL,GAAeA,OAAf;AACA,WAAKuG,OAAL,GAAenM,QAAQ,CAACmM,OAAxB;AACA,WAAKrJ,cAAL,CAAoB8F,eAApB,GAAsC,KAAK9F,cAAL,CAAoB8F,eAApB,CAAoCwD,OAApC,CAA4C,MAA5C,EAAoD,EAApD,CAAtC;AACA,WAAKC,iBAAL,GAAyB,EAAzB;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA,WAAKC,KAAL,GAAa,EAAb;;AACA,UAAI,OAAO,KAAK3G,OAAZ,KAAwB,QAA5B,EAAsC;AACpC,aAAKA,OAAL,GAAe4G,QAAQ,CAACC,aAAT,CAAuB,KAAK7G,OAA5B,CAAf;AACD;;AACD,UAAI,EAAE,KAAKA,OAAL,IAAiB,KAAKA,OAAL,CAAa8G,QAAb,IAAyB,IAA5C,CAAJ,EAAwD;AACtD,cAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;AACD;;AACD,UAAI,KAAK/G,OAAL,CAAagH,QAAjB,EAA2B;AACzB,cAAM,IAAID,KAAJ,CAAU,4BAAV,CAAN;AACD;;AACD3M,MAAAA,QAAQ,CAAC6M,SAAT,CAAmBnL,IAAnB,CAAwB,IAAxB;AACA,WAAKkE,OAAL,CAAagH,QAAb,GAAwB,IAAxB;AACAV,MAAAA,cAAc,GAAG,CAACvG,IAAI,GAAG3F,QAAQ,CAAC8M,iBAAT,CAA2B,KAAKlH,OAAhC,CAAR,KAAqD,IAArD,GAA4DD,IAA5D,GAAmE,EAApF;AACA,WAAKQ,OAAL,GAAexD,MAAM,CAAC,EAAD,EAAK,KAAKG,cAAV,EAA0BoJ,cAA1B,EAA0C/F,OAAO,IAAI,IAAX,GAAkBA,OAAlB,GAA4B,EAAtE,CAArB;;AACA,UAAI,KAAKA,OAAL,CAAaZ,aAAb,IAA8B,CAACvF,QAAQ,CAAC+M,kBAAT,EAAnC,EAAkE;AAChE,eAAO,KAAK5G,OAAL,CAAaX,QAAb,CAAsBxE,IAAtB,CAA2B,IAA3B,CAAP;AACD;;AACD,UAAI,KAAKmF,OAAL,CAAapD,GAAb,IAAoB,IAAxB,EAA8B;AAC5B,aAAKoD,OAAL,CAAapD,GAAb,GAAmB,KAAK6C,OAAL,CAAaoH,YAAb,CAA0B,QAA1B,CAAnB;AACD;;AACD,UAAI,CAAC,KAAK7G,OAAL,CAAapD,GAAlB,EAAuB;AACrB,cAAM,IAAI4J,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,UAAI,KAAKxG,OAAL,CAAapC,aAAb,IAA8B,KAAKoC,OAAL,CAAanC,iBAA/C,EAAkE;AAChE,cAAM,IAAI2I,KAAJ,CAAU,oGAAV,CAAN;AACD;;AACD,UAAI,KAAKxG,OAAL,CAAanC,iBAAjB,EAAoC;AAClC,aAAKmC,OAAL,CAAapC,aAAb,GAA6B,KAAKoC,OAAL,CAAanC,iBAA1C;AACA,eAAO,KAAKmC,OAAL,CAAanC,iBAApB;AACD;;AACD,WAAKmC,OAAL,CAAanD,MAAb,GAAsB,KAAKmD,OAAL,CAAanD,MAAb,CAAoBiK,WAApB,EAAtB;;AACA,UAAI,CAACzH,QAAQ,GAAG,KAAK0H,mBAAL,EAAZ,KAA2C1H,QAAQ,CAACqE,UAAxD,EAAoE;AAClErE,QAAAA,QAAQ,CAACqE,UAAT,CAAoBC,WAApB,CAAgCtE,QAAhC;AACD;;AACD,UAAI,KAAKW,OAAL,CAAa/B,iBAAb,KAAmC,KAAvC,EAA8C;AAC5C,YAAI,KAAK+B,OAAL,CAAa/B,iBAAjB,EAAoC;AAClC,eAAKA,iBAAL,GAAyBpE,QAAQ,CAACmN,UAAT,CAAoB,KAAKhH,OAAL,CAAa/B,iBAAjC,EAAoD,mBAApD,CAAzB;AACD,SAFD,MAEO;AACL,eAAKA,iBAAL,GAAyB,KAAKwB,OAA9B;AACD;AACF;;AACD,UAAI,KAAKO,OAAL,CAAatC,SAAjB,EAA4B;AAC1B,YAAI,KAAKsC,OAAL,CAAatC,SAAb,KAA2B,IAA/B,EAAqC;AACnC,eAAKwI,iBAAL,GAAyB,CAAC,KAAKzG,OAAN,CAAzB;AACD,SAFD,MAEO;AACL,eAAKyG,iBAAL,GAAyBrM,QAAQ,CAACoN,WAAT,CAAqB,KAAKjH,OAAL,CAAatC,SAAlC,EAA6C,WAA7C,CAAzB;AACD;AACF;;AACD,WAAKyB,IAAL;AACD;;AAEDtF,IAAAA,QAAQ,CAACmB,SAAT,CAAmBkM,gBAAnB,GAAsC,YAAW;AAC/C,UAAIjI,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA/C,MAAAA,IAAI,GAAG,KAAK4G,KAAZ;AACA7D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,QAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA,YAAIqD,IAAI,CAACkI,QAAT,EAAmB;AACjB5E,UAAAA,QAAQ,CAAChH,IAAT,CAAc0D,IAAd;AACD;AACF;;AACD,aAAOsD,QAAP;AACD,KAXD;;AAaA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmBoM,gBAAnB,GAAsC,YAAW;AAC/C,UAAInI,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA/C,MAAAA,IAAI,GAAG,KAAK4G,KAAZ;AACA7D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,QAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA,YAAI,CAACqD,IAAI,CAACkI,QAAV,EAAoB;AAClB5E,UAAAA,QAAQ,CAAChH,IAAT,CAAc0D,IAAd;AACD;AACF;;AACD,aAAOsD,QAAP;AACD,KAXD;;AAaA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmBqM,kBAAnB,GAAwC,UAAShE,MAAT,EAAiB;AACvD,UAAIpE,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA/C,MAAAA,IAAI,GAAG,KAAK4G,KAAZ;AACA7D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,QAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA,YAAIqD,IAAI,CAACoE,MAAL,KAAgBA,MAApB,EAA4B;AAC1Bd,UAAAA,QAAQ,CAAChH,IAAT,CAAc0D,IAAd;AACD;AACF;;AACD,aAAOsD,QAAP;AACD,KAXD;;AAaA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmBsM,cAAnB,GAAoC,YAAW;AAC7C,aAAO,KAAKD,kBAAL,CAAwBxN,QAAQ,CAAC0N,MAAjC,CAAP;AACD,KAFD;;AAIA1N,IAAAA,QAAQ,CAACmB,SAAT,CAAmBwM,iBAAnB,GAAuC,YAAW;AAChD,aAAO,KAAKH,kBAAL,CAAwBxN,QAAQ,CAACyJ,SAAjC,CAAP;AACD,KAFD;;AAIAzJ,IAAAA,QAAQ,CAACmB,SAAT,CAAmByM,aAAnB,GAAmC,YAAW;AAC5C,aAAO,KAAKJ,kBAAL,CAAwBxN,QAAQ,CAAC6N,KAAjC,CAAP;AACD,KAFD;;AAIA7N,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2M,cAAnB,GAAoC,YAAW;AAC7C,UAAI1I,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA/C,MAAAA,IAAI,GAAG,KAAK4G,KAAZ;AACA7D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,QAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA,YAAIqD,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAACyJ,SAAzB,IAAsCrE,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAAC0N,MAAnE,EAA2E;AACzEhF,UAAAA,QAAQ,CAAChH,IAAT,CAAc0D,IAAd;AACD;AACF;;AACD,aAAOsD,QAAP;AACD,KAXD;;AAaA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmBmE,IAAnB,GAA0B,YAAW;AACnC,UAAIyI,SAAJ,EAAeC,aAAf,EAA8BC,oBAA9B,EAAoDlM,EAApD,EAAwDC,IAAxD,EAA8D2D,IAA9D,EAAoE6C,KAApE;;AACA,UAAI,KAAK5C,OAAL,CAAasI,OAAb,KAAyB,MAA7B,EAAqC;AACnC,aAAKtI,OAAL,CAAauI,YAAb,CAA0B,SAA1B,EAAqC,qBAArC;AACD;;AACD,UAAI,KAAKvI,OAAL,CAAa0B,SAAb,CAAuB8G,QAAvB,CAAgC,UAAhC,KAA+C,CAAC,KAAKxI,OAAL,CAAa6G,aAAb,CAA2B,aAA3B,CAApD,EAA+F;AAC7F,aAAK7G,OAAL,CAAaK,WAAb,CAAyBjG,QAAQ,CAACgG,aAAT,CAAuB,gDAAgD,KAAKG,OAAL,CAAa3B,kBAA7D,GAAkF,eAAzG,CAAzB;AACD;;AACD,UAAI,KAAK6H,iBAAL,CAAuBnK,MAA3B,EAAmC;AACjC+L,QAAAA,oBAAoB,GAAI,UAAS5E,KAAT,EAAgB;AACtC,iBAAO,YAAW;AAChB,gBAAIA,KAAK,CAACgF,eAAV,EAA2B;AACzBhF,cAAAA,KAAK,CAACgF,eAAN,CAAsBxE,UAAtB,CAAiCC,WAAjC,CAA6CT,KAAK,CAACgF,eAAnD;AACD;;AACDhF,YAAAA,KAAK,CAACgF,eAAN,GAAwB7B,QAAQ,CAACxG,aAAT,CAAuB,OAAvB,CAAxB;;AACAqD,YAAAA,KAAK,CAACgF,eAAN,CAAsBF,YAAtB,CAAmC,MAAnC,EAA2C,MAA3C;;AACA,gBAAK9E,KAAK,CAAClD,OAAN,CAAcxC,QAAd,IAA0B,IAA3B,IAAoC0F,KAAK,CAAClD,OAAN,CAAcxC,QAAd,GAAyB,CAAjE,EAAoE;AAClE0F,cAAAA,KAAK,CAACgF,eAAN,CAAsBF,YAAtB,CAAmC,UAAnC,EAA+C,UAA/C;AACD;;AACD9E,YAAAA,KAAK,CAACgF,eAAN,CAAsBxI,SAAtB,GAAkC,iBAAlC;;AACA,gBAAIwD,KAAK,CAAClD,OAAN,CAAcpC,aAAd,IAA+B,IAAnC,EAAyC;AACvCsF,cAAAA,KAAK,CAACgF,eAAN,CAAsBF,YAAtB,CAAmC,QAAnC,EAA6C9E,KAAK,CAAClD,OAAN,CAAcpC,aAA3D;AACD;;AACD,gBAAIsF,KAAK,CAAClD,OAAN,CAAc7B,OAAd,IAAyB,IAA7B,EAAmC;AACjC+E,cAAAA,KAAK,CAACgF,eAAN,CAAsBF,YAAtB,CAAmC,SAAnC,EAA8C9E,KAAK,CAAClD,OAAN,CAAc7B,OAA5D;AACD;;AACD+E,YAAAA,KAAK,CAACgF,eAAN,CAAsBrD,KAAtB,CAA4BsD,UAA5B,GAAyC,QAAzC;AACAjF,YAAAA,KAAK,CAACgF,eAAN,CAAsBrD,KAAtB,CAA4BuD,QAA5B,GAAuC,UAAvC;AACAlF,YAAAA,KAAK,CAACgF,eAAN,CAAsBrD,KAAtB,CAA4BwD,GAA5B,GAAkC,GAAlC;AACAnF,YAAAA,KAAK,CAACgF,eAAN,CAAsBrD,KAAtB,CAA4ByD,IAA5B,GAAmC,GAAnC;AACApF,YAAAA,KAAK,CAACgF,eAAN,CAAsBrD,KAAtB,CAA4BjE,MAA5B,GAAqC,GAArC;AACAsC,YAAAA,KAAK,CAACgF,eAAN,CAAsBrD,KAAtB,CAA4BnE,KAA5B,GAAoC,GAApC;AACA2F,YAAAA,QAAQ,CAACC,aAAT,CAAuBpD,KAAK,CAAClD,OAAN,CAAc9B,oBAArC,EAA2D4B,WAA3D,CAAuEoD,KAAK,CAACgF,eAA7E;AACA,mBAAOhF,KAAK,CAACgF,eAAN,CAAsBhN,gBAAtB,CAAuC,QAAvC,EAAiD,YAAW;AACjE,kBAAI+D,IAAJ,EAAUmH,KAAV,EAAiBxK,EAAjB,EAAqBC,IAArB;;AACAuK,cAAAA,KAAK,GAAGlD,KAAK,CAACgF,eAAN,CAAsB9B,KAA9B;;AACA,kBAAIA,KAAK,CAACrK,MAAV,EAAkB;AAChB,qBAAKH,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,kBAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;;AACAsH,kBAAAA,KAAK,CAACqF,OAAN,CAActJ,IAAd;AACD;AACF;;AACDiE,cAAAA,KAAK,CAAC1H,IAAN,CAAW,YAAX,EAAyB4K,KAAzB;;AACA,qBAAO0B,oBAAoB,EAA3B;AACD,aAXM,CAAP;AAYD,WAnCD;AAoCD,SArCsB,CAqCpB,IArCoB,CAAvB;;AAsCAA,QAAAA,oBAAoB;AACrB;;AACD,WAAKU,GAAL,GAAW,CAAChJ,IAAI,GAAGiJ,MAAM,CAACD,GAAf,KAAuB,IAAvB,GAA8BhJ,IAA9B,GAAqCiJ,MAAM,CAACC,SAAvD;AACArG,MAAAA,KAAK,GAAG,KAAK3F,MAAb;;AACA,WAAKd,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGwG,KAAK,CAACtG,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDgM,QAAAA,SAAS,GAAGvF,KAAK,CAACzG,EAAD,CAAjB;AACA,aAAKT,EAAL,CAAQyM,SAAR,EAAmB,KAAK5H,OAAL,CAAa4H,SAAb,CAAnB;AACD;;AACD,WAAKzM,EAAL,CAAQ,gBAAR,EAA2B,UAAS+H,KAAT,EAAgB;AACzC,eAAO,YAAW;AAChB,iBAAOA,KAAK,CAACyF,yBAAN,EAAP;AACD,SAFD;AAGD,OAJyB,CAIvB,IAJuB,CAA1B;AAKA,WAAKxN,EAAL,CAAQ,aAAR,EAAwB,UAAS+H,KAAT,EAAgB;AACtC,eAAO,YAAW;AAChB,iBAAOA,KAAK,CAACyF,yBAAN,EAAP;AACD,SAFD;AAGD,OAJsB,CAIpB,IAJoB,CAAvB;AAKA,WAAKxN,EAAL,CAAQ,UAAR,EAAqB,UAAS+H,KAAT,EAAgB;AACnC,eAAO,UAASjE,IAAT,EAAe;AACpB,iBAAOiE,KAAK,CAAC1H,IAAN,CAAW,UAAX,EAAuByD,IAAvB,CAAP;AACD,SAFD;AAGD,OAJmB,CAIjB,IAJiB,CAApB;AAKA,WAAK9D,EAAL,CAAQ,UAAR,EAAqB,UAAS+H,KAAT,EAAgB;AACnC,eAAO,UAASjE,IAAT,EAAe;AACpB,cAAIiE,KAAK,CAACuE,aAAN,GAAsB1L,MAAtB,KAAiC,CAAjC,IAAsCmH,KAAK,CAACsE,iBAAN,GAA0BzL,MAA1B,KAAqC,CAA3E,IAAgFmH,KAAK,CAACoE,cAAN,GAAuBvL,MAAvB,KAAkC,CAAtH,EAAyH;AACvH,mBAAOmI,UAAU,CAAE,YAAW;AAC5B,qBAAOhB,KAAK,CAAC1H,IAAN,CAAW,eAAX,CAAP;AACD,aAFgB,EAEb,CAFa,CAAjB;AAGD;AACF,SAND;AAOD,OARmB,CAQjB,IARiB,CAApB;;AASAqM,MAAAA,aAAa,GAAG,uBAAS3G,CAAT,EAAY;AAC1BA,QAAAA,CAAC,CAACkC,eAAF;;AACA,YAAIlC,CAAC,CAACiC,cAAN,EAAsB;AACpB,iBAAOjC,CAAC,CAACiC,cAAF,EAAP;AACD,SAFD,MAEO;AACL,iBAAOjC,CAAC,CAAC0H,WAAF,GAAgB,KAAvB;AACD;AACF,OAPD;;AAQA,WAAKzC,SAAL,GAAiB,CACf;AACE1G,QAAAA,OAAO,EAAE,KAAKA,OADhB;AAEE/C,QAAAA,MAAM,EAAE;AACN,uBAAc,UAASwG,KAAT,EAAgB;AAC5B,mBAAO,UAAShC,CAAT,EAAY;AACjB,qBAAOgC,KAAK,CAAC1H,IAAN,CAAW,WAAX,EAAwB0F,CAAxB,CAAP;AACD,aAFD;AAGD,WAJY,CAIV,IAJU,CADP;AAMN,uBAAc,UAASgC,KAAT,EAAgB;AAC5B,mBAAO,UAAShC,CAAT,EAAY;AACjB2G,cAAAA,aAAa,CAAC3G,CAAD,CAAb;AACA,qBAAOgC,KAAK,CAAC1H,IAAN,CAAW,WAAX,EAAwB0F,CAAxB,CAAP;AACD,aAHD;AAID,WALY,CAKV,IALU,CANP;AAYN,sBAAa,UAASgC,KAAT,EAAgB;AAC3B,mBAAO,UAAShC,CAAT,EAAY;AACjB,kBAAI2H,IAAJ;;AACA,kBAAI;AACFA,gBAAAA,IAAI,GAAG3H,CAAC,CAAC4H,YAAF,CAAeC,aAAtB;AACD,eAFD,CAEE,OAAOC,MAAP,EAAe,CAAE;;AACnB9H,cAAAA,CAAC,CAAC4H,YAAF,CAAeG,UAAf,GAA4B,WAAWJ,IAAX,IAAmB,eAAeA,IAAlC,GAAyC,MAAzC,GAAkD,MAA9E;AACAhB,cAAAA,aAAa,CAAC3G,CAAD,CAAb;AACA,qBAAOgC,KAAK,CAAC1H,IAAN,CAAW,UAAX,EAAuB0F,CAAvB,CAAP;AACD,aARD;AASD,WAVW,CAUT,IAVS,CAZN;AAuBN,uBAAc,UAASgC,KAAT,EAAgB;AAC5B,mBAAO,UAAShC,CAAT,EAAY;AACjB,qBAAOgC,KAAK,CAAC1H,IAAN,CAAW,WAAX,EAAwB0F,CAAxB,CAAP;AACD,aAFD;AAGD,WAJY,CAIV,IAJU,CAvBP;AA4BN,kBAAS,UAASgC,KAAT,EAAgB;AACvB,mBAAO,UAAShC,CAAT,EAAY;AACjB2G,cAAAA,aAAa,CAAC3G,CAAD,CAAb;AACA,qBAAOgC,KAAK,CAACjC,IAAN,CAAWC,CAAX,CAAP;AACD,aAHD;AAID,WALO,CAKL,IALK,CA5BF;AAkCN,qBAAY,UAASgC,KAAT,EAAgB;AAC1B,mBAAO,UAAShC,CAAT,EAAY;AACjB,qBAAOgC,KAAK,CAAC1H,IAAN,CAAW,SAAX,EAAsB0F,CAAtB,CAAP;AACD,aAFD;AAGD,WAJU,CAIR,IAJQ;AAlCL;AAFV,OADe,CAAjB;AA6CA,WAAKgF,iBAAL,CAAuBgD,OAAvB,CAAgC,UAAShG,KAAT,EAAgB;AAC9C,eAAO,UAASiG,gBAAT,EAA2B;AAChC,iBAAOjG,KAAK,CAACiD,SAAN,CAAgB5K,IAAhB,CAAqB;AAC1BkE,YAAAA,OAAO,EAAE0J,gBADiB;AAE1BzM,YAAAA,MAAM,EAAE;AACN,uBAAS,eAAS0M,GAAT,EAAc;AACrB,oBAAKD,gBAAgB,KAAKjG,KAAK,CAACzD,OAA5B,IAAyC2J,GAAG,CAACvD,MAAJ,KAAe3C,KAAK,CAACzD,OAArB,IAAgC5F,QAAQ,CAACwP,aAAT,CAAuBD,GAAG,CAACvD,MAA3B,EAAmC3C,KAAK,CAACzD,OAAN,CAAc6G,aAAd,CAA4B,aAA5B,CAAnC,CAA7E,EAA8J;AAC5JpD,kBAAAA,KAAK,CAACgF,eAAN,CAAsBoB,KAAtB;AACD;;AACD,uBAAO,IAAP;AACD;AANK;AAFkB,WAArB,CAAP;AAWD,SAZD;AAaD,OAd8B,CAc5B,IAd4B,CAA/B;AAeA,WAAKC,MAAL;AACA,aAAO,KAAKvJ,OAAL,CAAab,IAAb,CAAkBtE,IAAlB,CAAuB,IAAvB,CAAP;AACD,KArJD;;AAuJAhB,IAAAA,QAAQ,CAACmB,SAAT,CAAmBwO,OAAnB,GAA6B,YAAW;AACtC,UAAIhK,IAAJ;;AACA,WAAKiK,OAAL;AACA,WAAKC,cAAL,CAAoB,IAApB;;AACA,UAAI,CAAClK,IAAI,GAAG,KAAK0I,eAAb,KAAiC,IAAjC,GAAwC1I,IAAI,CAACkE,UAA7C,GAA0D,KAAK,CAAnE,EAAsE;AACpE,aAAKwE,eAAL,CAAqBxE,UAArB,CAAgCC,WAAhC,CAA4C,KAAKuE,eAAjD;AACA,aAAKA,eAAL,GAAuB,IAAvB;AACD;;AACD,aAAO,KAAKzI,OAAL,CAAagH,QAApB;AACA,aAAO5M,QAAQ,CAAC6M,SAAT,CAAmBpK,MAAnB,CAA0BzC,QAAQ,CAAC6M,SAAT,CAAmBiD,OAAnB,CAA2B,IAA3B,CAA1B,EAA4D,CAA5D,CAAP;AACD,KAVD;;AAYA9P,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2N,yBAAnB,GAA+C,YAAW;AACxD,UAAIiB,WAAJ,EAAiB3K,IAAjB,EAAuB4K,UAAvB,EAAmCC,cAAnC,EAAmDC,mBAAnD,EAAwEnO,EAAxE,EAA4EC,IAA5E,EAAkF2D,IAAlF;;AACAsK,MAAAA,cAAc,GAAG,CAAjB;AACAD,MAAAA,UAAU,GAAG,CAAb;AACAD,MAAAA,WAAW,GAAG,KAAKjC,cAAL,EAAd;;AACA,UAAIiC,WAAW,CAAC7N,MAAhB,EAAwB;AACtByD,QAAAA,IAAI,GAAG,KAAKmI,cAAL,EAAP;;AACA,aAAK/L,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,UAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;AACAkO,UAAAA,cAAc,IAAI7K,IAAI,CAAC+K,MAAL,CAAYtF,SAA9B;AACAmF,UAAAA,UAAU,IAAI5K,IAAI,CAAC+K,MAAL,CAAYC,KAA1B;AACD;;AACDF,QAAAA,mBAAmB,GAAG,MAAMD,cAAN,GAAuBD,UAA7C;AACD,OARD,MAQO;AACLE,QAAAA,mBAAmB,GAAG,GAAtB;AACD;;AACD,aAAO,KAAKvO,IAAL,CAAU,qBAAV,EAAiCuO,mBAAjC,EAAsDF,UAAtD,EAAkEC,cAAlE,CAAP;AACD,KAjBD;;AAmBAjQ,IAAAA,QAAQ,CAACmB,SAAT,CAAmBkP,aAAnB,GAAmC,UAASC,CAAT,EAAY;AAC7C,UAAI,OAAO,KAAKnK,OAAL,CAAa9C,SAApB,KAAkC,UAAtC,EAAkD;AAChD,eAAO,KAAK8C,OAAL,CAAa9C,SAAb,CAAuBiN,CAAvB,CAAP;AACD,OAFD,MAEO;AACL,eAAO,KAAK,KAAKnK,OAAL,CAAa9C,SAAlB,IAA+B,KAAK8C,OAAL,CAAahD,cAAb,GAA8B,MAAMmN,CAAN,GAAU,GAAxC,GAA8C,EAA7E,CAAP;AACD;AACF,KAND;;AAQAtQ,IAAAA,QAAQ,CAACmB,SAAT,CAAmB4H,eAAnB,GAAqC,UAASC,IAAT,EAAe;AAClD,UAAI,OAAO,KAAK7C,OAAL,CAAa5B,cAApB,KAAuC,UAA3C,EAAuD;AACrD,eAAOyE,IAAP;AACD;;AACD,aAAO,KAAK7C,OAAL,CAAa5B,cAAb,CAA4ByE,IAA5B,CAAP;AACD,KALD;;AAOAhJ,IAAAA,QAAQ,CAACmB,SAAT,CAAmBkF,eAAnB,GAAqC,YAAW;AAC9C,UAAIkK,gBAAJ,EAAsBC,MAAtB,EAA8BC,YAA9B,EAA4CC,IAA5C;;AACA,UAAIH,gBAAgB,GAAG,KAAKrD,mBAAL,EAAvB,EAAmD;AACjD,eAAOqD,gBAAP;AACD;;AACDE,MAAAA,YAAY,GAAG,6BAAf;;AACA,UAAI,KAAKtK,OAAL,CAAazB,gBAAjB,EAAmC;AACjC+L,QAAAA,YAAY,IAAI,QAAQ,KAAKtK,OAAL,CAAazB,gBAArB,GAAwC,MAAxD;AACD;;AACD+L,MAAAA,YAAY,IAAI,iCAAkC,KAAKJ,aAAL,CAAmB,CAAnB,CAAlC,GAA2D,KAA3D,IAAoE,KAAKlK,OAAL,CAAahD,cAAb,GAA8B,qBAA9B,GAAsD,KAAK,CAA/H,IAAoI,oDAApJ;AACAqN,MAAAA,MAAM,GAAGxQ,QAAQ,CAACgG,aAAT,CAAuByK,YAAvB,CAAT;;AACA,UAAI,KAAK7K,OAAL,CAAasI,OAAb,KAAyB,MAA7B,EAAqC;AACnCwC,QAAAA,IAAI,GAAG1Q,QAAQ,CAACgG,aAAT,CAAuB,oBAAoB,KAAKG,OAAL,CAAapD,GAAjC,GAAuC,8CAAvC,GAAwF,KAAKoD,OAAL,CAAanD,MAArG,GAA8G,YAArI,CAAP;AACA0N,QAAAA,IAAI,CAACzK,WAAL,CAAiBuK,MAAjB;AACD,OAHD,MAGO;AACL,aAAK5K,OAAL,CAAauI,YAAb,CAA0B,SAA1B,EAAqC,qBAArC;AACA,aAAKvI,OAAL,CAAauI,YAAb,CAA0B,QAA1B,EAAoC,KAAKhI,OAAL,CAAanD,MAAjD;AACD;;AACD,aAAO0N,IAAI,IAAI,IAAR,GAAeA,IAAf,GAAsBF,MAA7B;AACD,KAnBD;;AAqBAxQ,IAAAA,QAAQ,CAACmB,SAAT,CAAmB+L,mBAAnB,GAAyC,YAAW;AAClD,UAAI1H,QAAJ,EAAcmL,WAAd,EAA2BzC,OAA3B,EAAoCnM,EAApC,EAAwCC,IAAxC,EAA8C2D,IAA9C;;AACAgL,MAAAA,WAAW,GAAG,qBAASC,QAAT,EAAmB;AAC/B,YAAIC,EAAJ,EAAQ9O,EAAR,EAAYC,IAAZ;;AACA,aAAKD,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG4O,QAAQ,CAAC1O,MAA7B,EAAqCH,EAAE,GAAGC,IAA1C,EAAgDD,EAAE,EAAlD,EAAsD;AACpD8O,UAAAA,EAAE,GAAGD,QAAQ,CAAC7O,EAAD,CAAb;;AACA,cAAI,qBAAqBgE,IAArB,CAA0B8K,EAAE,CAAChL,SAA7B,CAAJ,EAA6C;AAC3C,mBAAOgL,EAAP;AACD;AACF;AACF,OARD;;AASAlL,MAAAA,IAAI,GAAG,CAAC,KAAD,EAAQ,MAAR,CAAP;;AACA,WAAK5D,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDmM,QAAAA,OAAO,GAAGvI,IAAI,CAAC5D,EAAD,CAAd;;AACA,YAAIyD,QAAQ,GAAGmL,WAAW,CAAC,KAAK/K,OAAL,CAAaE,oBAAb,CAAkCoI,OAAlC,CAAD,CAA1B,EAAwE;AACtE,iBAAO1I,QAAP;AACD;AACF;AACF,KAlBD;;AAoBAxF,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2P,mBAAnB,GAAyC,YAAW;AAClD,UAAIC,gBAAJ,EAAsBxP,KAAtB,EAA6ByP,QAA7B,EAAuCjP,EAAvC,EAA2CC,IAA3C,EAAiD2D,IAAjD,EAAuD+C,QAAvD;;AACA/C,MAAAA,IAAI,GAAG,KAAK2G,SAAZ;AACA5D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDgP,QAAAA,gBAAgB,GAAGpL,IAAI,CAAC5D,EAAD,CAAvB;;AACA2G,QAAAA,QAAQ,CAAChH,IAAT,CAAe,YAAW;AACxB,cAAI8G,KAAJ,EAAWyI,SAAX;;AACAzI,UAAAA,KAAK,GAAGuI,gBAAgB,CAAClO,MAAzB;AACAoO,UAAAA,SAAS,GAAG,EAAZ;;AACA,eAAK1P,KAAL,IAAciH,KAAd,EAAqB;AACnBwI,YAAAA,QAAQ,GAAGxI,KAAK,CAACjH,KAAD,CAAhB;;AACA0P,YAAAA,SAAS,CAACvP,IAAV,CAAeqP,gBAAgB,CAACnL,OAAjB,CAAyBvE,gBAAzB,CAA0CE,KAA1C,EAAiDyP,QAAjD,EAA2D,KAA3D,CAAf;AACD;;AACD,iBAAOC,SAAP;AACD,SATa,EAAd;AAUD;;AACD,aAAOvI,QAAP;AACD,KAlBD;;AAoBA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmB+P,oBAAnB,GAA0C,YAAW;AACnD,UAAIH,gBAAJ,EAAsBxP,KAAtB,EAA6ByP,QAA7B,EAAuCjP,EAAvC,EAA2CC,IAA3C,EAAiD2D,IAAjD,EAAuD+C,QAAvD;;AACA/C,MAAAA,IAAI,GAAG,KAAK2G,SAAZ;AACA5D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDgP,QAAAA,gBAAgB,GAAGpL,IAAI,CAAC5D,EAAD,CAAvB;;AACA2G,QAAAA,QAAQ,CAAChH,IAAT,CAAe,YAAW;AACxB,cAAI8G,KAAJ,EAAWyI,SAAX;;AACAzI,UAAAA,KAAK,GAAGuI,gBAAgB,CAAClO,MAAzB;AACAoO,UAAAA,SAAS,GAAG,EAAZ;;AACA,eAAK1P,KAAL,IAAciH,KAAd,EAAqB;AACnBwI,YAAAA,QAAQ,GAAGxI,KAAK,CAACjH,KAAD,CAAhB;;AACA0P,YAAAA,SAAS,CAACvP,IAAV,CAAeqP,gBAAgB,CAACnL,OAAjB,CAAyBrD,mBAAzB,CAA6ChB,KAA7C,EAAoDyP,QAApD,EAA8D,KAA9D,CAAf;AACD;;AACD,iBAAOC,SAAP;AACD,SATa,EAAd;AAUD;;AACD,aAAOvI,QAAP;AACD,KAlBD;;AAoBA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmByO,OAAnB,GAA6B,YAAW;AACtC,UAAIxK,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB2D,IAApB,EAA0B+C,QAA1B;;AACA,WAAK2D,iBAAL,CAAuBgD,OAAvB,CAA+B,UAASzJ,OAAT,EAAkB;AAC/C,eAAOA,OAAO,CAAC0B,SAAR,CAAkBC,MAAlB,CAAyB,cAAzB,CAAP;AACD,OAFD;AAGA,WAAK2J,oBAAL;AACAvL,MAAAA,IAAI,GAAG,KAAK4G,KAAZ;AACA7D,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,QAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA2G,QAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAKyP,YAAL,CAAkB/L,IAAlB,CAAd;AACD;;AACD,aAAOsD,QAAP;AACD,KAbD;;AAeA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmBuO,MAAnB,GAA4B,YAAW;AACrC,WAAKrD,iBAAL,CAAuBgD,OAAvB,CAA+B,UAASzJ,OAAT,EAAkB;AAC/C,eAAOA,OAAO,CAAC0B,SAAR,CAAkBK,GAAlB,CAAsB,cAAtB,CAAP;AACD,OAFD;AAGA,aAAO,KAAKmJ,mBAAL,EAAP;AACD,KALD;;AAOA9Q,IAAAA,QAAQ,CAACmB,SAAT,CAAmB+H,QAAnB,GAA8B,UAASC,IAAT,EAAe;AAC3C,UAAIiI,MAAJ,EAAY5O,CAAZ,EAAe6O,YAAf,EAA6BC,YAA7B,EAA2CC,IAA3C,EAAiDC,KAAjD,EAAwDzP,EAAxD,EAA4DC,IAA5D;;AACAqP,MAAAA,YAAY,GAAG,CAAf;AACAC,MAAAA,YAAY,GAAG,GAAf;;AACA,UAAInI,IAAI,GAAG,CAAX,EAAc;AACZqI,QAAAA,KAAK,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,GAAzB,CAAR;;AACA,aAAKhP,CAAC,GAAGT,EAAE,GAAG,CAAT,EAAYC,IAAI,GAAGwP,KAAK,CAACtP,MAA9B,EAAsCH,EAAE,GAAGC,IAA3C,EAAiDQ,CAAC,GAAG,EAAET,EAAvD,EAA2D;AACzDwP,UAAAA,IAAI,GAAGC,KAAK,CAAChP,CAAD,CAAZ;AACA4O,UAAAA,MAAM,GAAGK,IAAI,CAACC,GAAL,CAAS,KAAKvL,OAAL,CAAazC,YAAtB,EAAoC,IAAIlB,CAAxC,IAA6C,EAAtD;;AACA,cAAI2G,IAAI,IAAIiI,MAAZ,EAAoB;AAClBC,YAAAA,YAAY,GAAGlI,IAAI,GAAGsI,IAAI,CAACC,GAAL,CAAS,KAAKvL,OAAL,CAAazC,YAAtB,EAAoC,IAAIlB,CAAxC,CAAtB;AACA8O,YAAAA,YAAY,GAAGC,IAAf;AACA;AACD;AACF;;AACDF,QAAAA,YAAY,GAAGI,IAAI,CAACE,KAAL,CAAW,KAAKN,YAAhB,IAAgC,EAA/C;AACD;;AACD,aAAO,aAAaA,YAAb,GAA4B,YAA5B,GAA2CC,YAAlD;AACD,KAlBD;;AAoBAtR,IAAAA,QAAQ,CAACmB,SAAT,CAAmB4I,2BAAnB,GAAiD,YAAW;AAC1D,UAAK,KAAK5D,OAAL,CAAaxC,QAAb,IAAyB,IAA1B,IAAmC,KAAK0J,gBAAL,GAAwBnL,MAAxB,IAAkC,KAAKiE,OAAL,CAAaxC,QAAtF,EAAgG;AAC9F,YAAI,KAAK0J,gBAAL,GAAwBnL,MAAxB,KAAmC,KAAKiE,OAAL,CAAaxC,QAApD,EAA8D;AAC5D,eAAKhC,IAAL,CAAU,iBAAV,EAA6B,KAAK4K,KAAlC;AACD;;AACD,eAAO,KAAK3G,OAAL,CAAa0B,SAAb,CAAuBK,GAAvB,CAA2B,sBAA3B,CAAP;AACD,OALD,MAKO;AACL,eAAO,KAAK/B,OAAL,CAAa0B,SAAb,CAAuBC,MAAvB,CAA8B,sBAA9B,CAAP;AACD;AACF,KATD;;AAWAvH,IAAAA,QAAQ,CAACmB,SAAT,CAAmBiG,IAAnB,GAA0B,UAASC,CAAT,EAAY;AACpC,UAAIkF,KAAJ,EAAWqF,KAAX;;AACA,UAAI,CAACvK,CAAC,CAAC4H,YAAP,EAAqB;AACnB;AACD;;AACD,WAAKtN,IAAL,CAAU,MAAV,EAAkB0F,CAAlB;AACAkF,MAAAA,KAAK,GAAGlF,CAAC,CAAC4H,YAAF,CAAe1C,KAAvB;AACA,WAAK5K,IAAL,CAAU,YAAV,EAAwB4K,KAAxB;;AACA,UAAIA,KAAK,CAACrK,MAAV,EAAkB;AAChB0P,QAAAA,KAAK,GAAGvK,CAAC,CAAC4H,YAAF,CAAe2C,KAAvB;;AACA,YAAIA,KAAK,IAAIA,KAAK,CAAC1P,MAAf,IAA0B0P,KAAK,CAAC,CAAD,CAAL,CAASC,gBAAT,IAA6B,IAA3D,EAAkE;AAChE,eAAKC,kBAAL,CAAwBF,KAAxB;AACD,SAFD,MAEO;AACL,eAAKG,WAAL,CAAiBxF,KAAjB;AACD;AACF;AACF,KAhBD;;AAkBAvM,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2G,KAAnB,GAA2B,UAAST,CAAT,EAAY;AACrC,UAAIuK,KAAJ,EAAWjM,IAAX;;AACA,UAAI,CAAC0B,CAAC,IAAI,IAAL,GAAY,CAAC1B,IAAI,GAAG0B,CAAC,CAAC2K,aAAV,KAA4B,IAA5B,GAAmCrM,IAAI,CAACiM,KAAxC,GAAgD,KAAK,CAAjE,GAAqE,KAAK,CAA3E,KAAiF,IAArF,EAA2F;AACzF;AACD;;AACD,WAAKjQ,IAAL,CAAU,OAAV,EAAmB0F,CAAnB;AACAuK,MAAAA,KAAK,GAAGvK,CAAC,CAAC2K,aAAF,CAAgBJ,KAAxB;;AACA,UAAIA,KAAK,CAAC1P,MAAV,EAAkB;AAChB,eAAO,KAAK4P,kBAAL,CAAwBF,KAAxB,CAAP;AACD;AACF,KAVD;;AAYA5R,IAAAA,QAAQ,CAACmB,SAAT,CAAmB4Q,WAAnB,GAAiC,UAASxF,KAAT,EAAgB;AAC/C,UAAInH,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB0G,QAApB;;AACAA,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,QAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;;AACA2G,QAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAKgN,OAAL,CAAatJ,IAAb,CAAd;AACD;;AACD,aAAOsD,QAAP;AACD,KARD;;AAUA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2Q,kBAAnB,GAAwC,UAASF,KAAT,EAAgB;AACtD,UAAIK,KAAJ,EAAWC,IAAX,EAAiBnQ,EAAjB,EAAqBC,IAArB,EAA2B0G,QAA3B;;AACAA,MAAAA,QAAQ,GAAG,EAAX;;AACA,WAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG4P,KAAK,CAAC1P,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDmQ,QAAAA,IAAI,GAAGN,KAAK,CAAC7P,EAAD,CAAZ;;AACA,YAAKmQ,IAAI,CAACL,gBAAL,IAAyB,IAA1B,KAAoCI,KAAK,GAAGC,IAAI,CAACL,gBAAL,EAA5C,CAAJ,EAA0E;AACxE,cAAII,KAAK,CAACE,MAAV,EAAkB;AAChBzJ,YAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAKgN,OAAL,CAAawD,IAAI,CAACE,SAAL,EAAb,CAAd;AACD,WAFD,MAEO,IAAIH,KAAK,CAACI,WAAV,EAAuB;AAC5B3J,YAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAK4Q,sBAAL,CAA4BL,KAA5B,EAAmCA,KAAK,CAACjJ,IAAzC,CAAd;AACD,WAFM,MAEA;AACLN,YAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAK,CAAnB;AACD;AACF,SARD,MAQO,IAAIwQ,IAAI,CAACE,SAAL,IAAkB,IAAtB,EAA4B;AACjC,cAAKF,IAAI,CAACK,IAAL,IAAa,IAAd,IAAuBL,IAAI,CAACK,IAAL,KAAc,MAAzC,EAAiD;AAC/C7J,YAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAKgN,OAAL,CAAawD,IAAI,CAACE,SAAL,EAAb,CAAd;AACD,WAFD,MAEO;AACL1J,YAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAK,CAAnB;AACD;AACF,SANM,MAMA;AACLgH,UAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAK,CAAnB;AACD;AACF;;AACD,aAAOgH,QAAP;AACD,KAxBD;;AA0BA1I,IAAAA,QAAQ,CAACmB,SAAT,CAAmBmR,sBAAnB,GAA4C,UAASE,SAAT,EAAoBC,IAApB,EAA0B;AACpE,UAAIC,SAAJ,EAAeC,YAAf,EAA6BC,WAA7B;AACAF,MAAAA,SAAS,GAAGF,SAAS,CAACK,YAAV,EAAZ;;AACAF,MAAAA,YAAY,GAAG,sBAASrI,KAAT,EAAgB;AAC7B,eAAO,OAAOwI,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,KAAK,IAA9C,GAAqD,OAAOA,OAAO,CAACC,GAAf,KAAuB,UAAvB,GAAoCD,OAAO,CAACC,GAAR,CAAYzI,KAAZ,CAApC,GAAyD,KAAK,CAAnH,GAAuH,KAAK,CAAnI;AACD,OAFD;;AAGAsI,MAAAA,WAAW,GAAI,UAASvJ,KAAT,EAAgB;AAC7B,eAAO,YAAW;AAChB,iBAAOqJ,SAAS,CAACE,WAAV,CAAsB,UAASI,OAAT,EAAkB;AAC7C,gBAAIf,KAAJ,EAAWlQ,EAAX,EAAeC,IAAf;;AACA,gBAAIgR,OAAO,CAAC9Q,MAAR,GAAiB,CAArB,EAAwB;AACtB,mBAAKH,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGgR,OAAO,CAAC9Q,MAA5B,EAAoCH,EAAE,GAAGC,IAAzC,EAA+CD,EAAE,EAAjD,EAAqD;AACnDkQ,gBAAAA,KAAK,GAAGe,OAAO,CAACjR,EAAD,CAAf;;AACA,oBAAIkQ,KAAK,CAACE,MAAV,EAAkB;AAChBF,kBAAAA,KAAK,CAAC7M,IAAN,CAAW,UAASA,IAAT,EAAe;AACxB,wBAAIiE,KAAK,CAAClD,OAAN,CAAcrC,iBAAd,IAAmCsB,IAAI,CAAC4D,IAAL,CAAUiK,SAAV,CAAoB,CAApB,EAAuB,CAAvB,MAA8B,GAArE,EAA0E;AACxE;AACD;;AACD7N,oBAAAA,IAAI,CAAC8N,QAAL,GAAgB,KAAKT,IAAL,GAAY,GAAZ,GAAkBrN,IAAI,CAAC4D,IAAvC;AACA,2BAAOK,KAAK,CAACqF,OAAN,CAActJ,IAAd,CAAP;AACD,mBAND;AAOD,iBARD,MAQO,IAAI6M,KAAK,CAACI,WAAV,EAAuB;AAC5BhJ,kBAAAA,KAAK,CAACiJ,sBAAN,CAA6BL,KAA7B,EAAoC,KAAKQ,IAAL,GAAY,GAAZ,GAAkBR,KAAK,CAACjJ,IAA5D;AACD;AACF;;AACD4J,cAAAA,WAAW;AACZ;;AACD,mBAAO,IAAP;AACD,WApBM,EAoBJD,YApBI,CAAP;AAqBD,SAtBD;AAuBD,OAxBa,CAwBX,IAxBW,CAAd;;AAyBA,aAAOC,WAAW,EAAlB;AACD,KAhCD;;AAkCA5S,IAAAA,QAAQ,CAACmB,SAAT,CAAmBgE,MAAnB,GAA4B,UAASC,IAAT,EAAeC,IAAf,EAAqB;AAC/C,UAAID,IAAI,CAAC+D,IAAL,GAAY,KAAKhD,OAAL,CAAa/C,WAAb,GAA2B,IAA3B,GAAkC,IAAlD,EAAwD;AACtD,eAAOiC,IAAI,CAAC,KAAKc,OAAL,CAAaxB,cAAb,CAA4ByH,OAA5B,CAAoC,cAApC,EAAoDqF,IAAI,CAACE,KAAL,CAAWvM,IAAI,CAAC+D,IAAL,GAAY,IAAZ,GAAmB,KAA9B,IAAuC,GAA3F,EAAgGiD,OAAhG,CAAwG,iBAAxG,EAA2H,KAAKjG,OAAL,CAAa/C,WAAxI,CAAD,CAAX;AACD,OAFD,MAEO,IAAI,CAACpD,QAAQ,CAACmT,WAAT,CAAqB/N,IAArB,EAA2B,KAAKe,OAAL,CAAapC,aAAxC,CAAL,EAA6D;AAClE,eAAOsB,IAAI,CAAC,KAAKc,OAAL,CAAavB,mBAAd,CAAX;AACD,OAFM,MAEA,IAAK,KAAKuB,OAAL,CAAaxC,QAAb,IAAyB,IAA1B,IAAmC,KAAK0J,gBAAL,GAAwBnL,MAAxB,IAAkC,KAAKiE,OAAL,CAAaxC,QAAtF,EAAgG;AACrG0B,QAAAA,IAAI,CAAC,KAAKc,OAAL,CAAajB,oBAAb,CAAkCkH,OAAlC,CAA0C,cAA1C,EAA0D,KAAKjG,OAAL,CAAaxC,QAAvE,CAAD,CAAJ;AACA,eAAO,KAAKhC,IAAL,CAAU,kBAAV,EAA8ByD,IAA9B,CAAP;AACD,OAHM,MAGA;AACL,eAAO,KAAKe,OAAL,CAAahB,MAAb,CAAoBnE,IAApB,CAAyB,IAAzB,EAA+BoE,IAA/B,EAAqCC,IAArC,CAAP;AACD;AACF,KAXD;;AAaArF,IAAAA,QAAQ,CAACmB,SAAT,CAAmBuN,OAAnB,GAA6B,UAAStJ,IAAT,EAAe;AAC1CA,MAAAA,IAAI,CAAC+K,MAAL,GAAc;AACZvF,QAAAA,QAAQ,EAAE,CADE;AAEZwF,QAAAA,KAAK,EAAEhL,IAAI,CAAC+D,IAFA;AAGZ0B,QAAAA,SAAS,EAAE;AAHC,OAAd;AAKA,WAAK0B,KAAL,CAAW7K,IAAX,CAAgB0D,IAAhB;AACAA,MAAAA,IAAI,CAACoE,MAAL,GAAcxJ,QAAQ,CAAC6N,KAAvB;AACA,WAAKlM,IAAL,CAAU,WAAV,EAAuByD,IAAvB;;AACA,WAAKgO,iBAAL,CAAuBhO,IAAvB;;AACA,aAAO,KAAKD,MAAL,CAAYC,IAAZ,EAAmB,UAASiE,KAAT,EAAgB;AACxC,eAAO,UAASiB,KAAT,EAAgB;AACrB,cAAIA,KAAJ,EAAW;AACTlF,YAAAA,IAAI,CAACkI,QAAL,GAAgB,KAAhB;;AACAjE,YAAAA,KAAK,CAACgK,gBAAN,CAAuB,CAACjO,IAAD,CAAvB,EAA+BkF,KAA/B;AACD,WAHD,MAGO;AACLlF,YAAAA,IAAI,CAACkI,QAAL,GAAgB,IAAhB;;AACA,gBAAIjE,KAAK,CAAClD,OAAN,CAAcjC,SAAlB,EAA6B;AAC3BmF,cAAAA,KAAK,CAACiK,WAAN,CAAkBlO,IAAlB;AACD;AACF;;AACD,iBAAOiE,KAAK,CAACU,2BAAN,EAAP;AACD,SAXD;AAYD,OAbwB,CAatB,IAbsB,CAAlB,CAAP;AAcD,KAxBD;;AA0BA/J,IAAAA,QAAQ,CAACmB,SAAT,CAAmBoS,YAAnB,GAAkC,UAAShH,KAAT,EAAgB;AAChD,UAAInH,IAAJ,EAAUrD,EAAV,EAAcC,IAAd;;AACA,WAAKD,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,QAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;AACA,aAAKuR,WAAL,CAAiBlO,IAAjB;AACD;;AACD,aAAO,IAAP;AACD,KAPD;;AASApF,IAAAA,QAAQ,CAACmB,SAAT,CAAmBmS,WAAnB,GAAiC,UAASlO,IAAT,EAAe;AAC9C,UAAIA,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAAC6N,KAAzB,IAAkCzI,IAAI,CAACkI,QAAL,KAAkB,IAAxD,EAA8D;AAC5DlI,QAAAA,IAAI,CAACoE,MAAL,GAAcxJ,QAAQ,CAAC0N,MAAvB;;AACA,YAAI,KAAKvH,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,iBAAOoG,UAAU,CAAG,UAAShB,KAAT,EAAgB;AAClC,mBAAO,YAAW;AAChB,qBAAOA,KAAK,CAACmK,YAAN,EAAP;AACD,aAFD;AAGD,WAJkB,CAIhB,IAJgB,CAAF,EAIN,CAJM,CAAjB;AAKD;AACF,OATD,MASO;AACL,cAAM,IAAI7G,KAAJ,CAAU,kFAAV,CAAN;AACD;AACF,KAbD;;AAeA3M,IAAAA,QAAQ,CAACmB,SAAT,CAAmBsS,eAAnB,GAAqC,EAArC;AAEAzT,IAAAA,QAAQ,CAACmB,SAAT,CAAmBuS,oBAAnB,GAA0C,KAA1C;;AAEA1T,IAAAA,QAAQ,CAACmB,SAAT,CAAmBiS,iBAAnB,GAAuC,UAAShO,IAAT,EAAe;AACpD,UAAI,KAAKe,OAAL,CAAa7C,qBAAb,IAAsC8B,IAAI,CAACuO,IAAL,CAAUC,KAAV,CAAgB,SAAhB,CAAtC,IAAoExO,IAAI,CAAC+D,IAAL,IAAa,KAAKhD,OAAL,CAAa5C,oBAAb,GAAoC,IAApC,GAA2C,IAAhI,EAAsI;AACpI,aAAKkQ,eAAL,CAAqB/R,IAArB,CAA0B0D,IAA1B;;AACA,eAAOiF,UAAU,CAAG,UAAShB,KAAT,EAAgB;AAClC,iBAAO,YAAW;AAChB,mBAAOA,KAAK,CAACwK,sBAAN,EAAP;AACD,WAFD;AAGD,SAJkB,CAIhB,IAJgB,CAAF,EAIN,CAJM,CAAjB;AAKD;AACF,KATD;;AAWA7T,IAAAA,QAAQ,CAACmB,SAAT,CAAmB0S,sBAAnB,GAA4C,YAAW;AACrD,UAAI,KAAKH,oBAAL,IAA6B,KAAKD,eAAL,CAAqBvR,MAArB,KAAgC,CAAjE,EAAoE;AAClE;AACD;;AACD,WAAKwR,oBAAL,GAA4B,IAA5B;AACA,aAAO,KAAKI,eAAL,CAAqB,KAAKL,eAAL,CAAqBM,KAArB,EAArB,EAAoD,UAAS1K,KAAT,EAAgB;AACzE,eAAO,YAAW;AAChBA,UAAAA,KAAK,CAACqK,oBAAN,GAA6B,KAA7B;AACA,iBAAOrK,KAAK,CAACwK,sBAAN,EAAP;AACD,SAHD;AAID,OALyD,CAKvD,IALuD,CAAnD,CAAP;AAMD,KAXD;;AAaA7T,IAAAA,QAAQ,CAACmB,SAAT,CAAmBwI,UAAnB,GAAgC,UAASvE,IAAT,EAAe;AAC7C,UAAIA,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAACyJ,SAA7B,EAAwC;AACtC,aAAK0H,YAAL,CAAkB/L,IAAlB;AACD;;AACD,WAAKmH,KAAL,GAAahM,OAAO,CAAC,KAAKgM,KAAN,EAAanH,IAAb,CAApB;AACA,WAAKzD,IAAL,CAAU,aAAV,EAAyByD,IAAzB;;AACA,UAAI,KAAKmH,KAAL,CAAWrK,MAAX,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAKP,IAAL,CAAU,OAAV,CAAP;AACD;AACF,KATD;;AAWA3B,IAAAA,QAAQ,CAACmB,SAAT,CAAmB0O,cAAnB,GAAoC,UAASmE,iBAAT,EAA4B;AAC9D,UAAI5O,IAAJ,EAAUrD,EAAV,EAAcC,IAAd,EAAoB2D,IAApB;;AACA,UAAIqO,iBAAiB,IAAI,IAAzB,EAA+B;AAC7BA,QAAAA,iBAAiB,GAAG,KAApB;AACD;;AACDrO,MAAAA,IAAI,GAAG,KAAK4G,KAAL,CAAW9L,KAAX,EAAP;;AACA,WAAKsB,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,QAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA,YAAIqD,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAACyJ,SAAzB,IAAsCuK,iBAA1C,EAA6D;AAC3D,eAAKrK,UAAL,CAAgBvE,IAAhB;AACD;AACF;;AACD,aAAO,IAAP;AACD,KAbD;;AAeApF,IAAAA,QAAQ,CAACmB,SAAT,CAAmB2S,eAAnB,GAAqC,UAAS1O,IAAT,EAAevD,QAAf,EAAyB;AAC5D,UAAIoS,UAAJ;AACAA,MAAAA,UAAU,GAAG,IAAIC,UAAJ,EAAb;;AACAD,MAAAA,UAAU,CAACE,MAAX,GAAqB,UAAS9K,KAAT,EAAgB;AACnC,eAAO,YAAW;AAChB,cAAIjE,IAAI,CAACuO,IAAL,KAAc,eAAlB,EAAmC;AACjCtK,YAAAA,KAAK,CAAC1H,IAAN,CAAW,WAAX,EAAwByD,IAAxB,EAA8B6O,UAAU,CAACG,MAAzC;;AACA,gBAAIvS,QAAQ,IAAI,IAAhB,EAAsB;AACpBA,cAAAA,QAAQ;AACT;;AACD;AACD;;AACD,iBAAOwH,KAAK,CAACgL,sBAAN,CAA6BjP,IAA7B,EAAmC6O,UAAU,CAACG,MAA9C,EAAsDvS,QAAtD,CAAP;AACD,SATD;AAUD,OAXmB,CAWjB,IAXiB,CAApB;;AAYA,aAAOoS,UAAU,CAACK,aAAX,CAAyBlP,IAAzB,CAAP;AACD,KAhBD;;AAkBApF,IAAAA,QAAQ,CAACmB,SAAT,CAAmBkT,sBAAnB,GAA4C,UAASjP,IAAT,EAAemP,QAAf,EAAyB1S,QAAzB,EAAmC2S,WAAnC,EAAgD;AAC1F,UAAIC,GAAJ;AACAA,MAAAA,GAAG,GAAGjI,QAAQ,CAACxG,aAAT,CAAuB,KAAvB,CAAN;;AACA,UAAIwO,WAAJ,EAAiB;AACfC,QAAAA,GAAG,CAACD,WAAJ,GAAkBA,WAAlB;AACD;;AACDC,MAAAA,GAAG,CAACN,MAAJ,GAAc,UAAS9K,KAAT,EAAgB;AAC5B,eAAO,YAAW;AAChB,cAAIqL,MAAJ,EAAYC,GAAZ,EAAiBC,UAAjB,EAA6B5K,SAA7B,EAAwCrE,IAAxC,EAA8C6C,KAA9C,EAAqDC,KAArD,EAA4DoM,KAA5D;;AACAzP,UAAAA,IAAI,CAACyB,KAAL,GAAa4N,GAAG,CAAC5N,KAAjB;AACAzB,UAAAA,IAAI,CAAC2B,MAAL,GAAc0N,GAAG,CAAC1N,MAAlB;AACA6N,UAAAA,UAAU,GAAGvL,KAAK,CAAClD,OAAN,CAAcG,MAAd,CAAqBtF,IAArB,CAA0BqI,KAA1B,EAAiCjE,IAAjC,CAAb;;AACA,cAAIwP,UAAU,CAACzN,QAAX,IAAuB,IAA3B,EAAiC;AAC/ByN,YAAAA,UAAU,CAACzN,QAAX,GAAsByN,UAAU,CAAC5N,QAAjC;AACD;;AACD,cAAI4N,UAAU,CAAC1N,SAAX,IAAwB,IAA5B,EAAkC;AAChC0N,YAAAA,UAAU,CAAC1N,SAAX,GAAuB0N,UAAU,CAAC3N,SAAlC;AACD;;AACDyN,UAAAA,MAAM,GAAGlI,QAAQ,CAACxG,aAAT,CAAuB,QAAvB,CAAT;AACA2O,UAAAA,GAAG,GAAGD,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAN;AACAJ,UAAAA,MAAM,CAAC7N,KAAP,GAAe+N,UAAU,CAACzN,QAA1B;AACAuN,UAAAA,MAAM,CAAC3N,MAAP,GAAgB6N,UAAU,CAAC1N,SAA3B;AACA7G,UAAAA,eAAe,CAACsU,GAAD,EAAMF,GAAN,EAAW,CAAC9O,IAAI,GAAGiP,UAAU,CAAClO,IAAnB,KAA4B,IAA5B,GAAmCf,IAAnC,GAA0C,CAArD,EAAwD,CAAC6C,KAAK,GAAGoM,UAAU,CAACjO,IAApB,KAA6B,IAA7B,GAAoC6B,KAApC,GAA4C,CAApG,EAAuGoM,UAAU,CAAChO,QAAlH,EAA4HgO,UAAU,CAAC9N,SAAvI,EAAkJ,CAAC2B,KAAK,GAAGmM,UAAU,CAACG,IAApB,KAA6B,IAA7B,GAAoCtM,KAApC,GAA4C,CAA9L,EAAiM,CAACoM,KAAK,GAAGD,UAAU,CAACI,IAApB,KAA6B,IAA7B,GAAoCH,KAApC,GAA4C,CAA7O,EAAgPD,UAAU,CAACzN,QAA3P,EAAqQyN,UAAU,CAAC1N,SAAhR,CAAf;AACA8C,UAAAA,SAAS,GAAG0K,MAAM,CAACO,SAAP,CAAiB,WAAjB,CAAZ;;AACA5L,UAAAA,KAAK,CAAC1H,IAAN,CAAW,WAAX,EAAwByD,IAAxB,EAA8B4E,SAA9B;;AACA,cAAInI,QAAQ,IAAI,IAAhB,EAAsB;AACpB,mBAAOA,QAAQ,EAAf;AACD;AACF,SArBD;AAsBD,OAvBY,CAuBV,IAvBU,CAAb;;AAwBA,UAAIA,QAAQ,IAAI,IAAhB,EAAsB;AACpB4S,QAAAA,GAAG,CAACS,OAAJ,GAAcrT,QAAd;AACD;;AAED,aAAO4S,GAAG,CAACrK,GAAJ,GAAUmK,QAAjB;AACD,KAnCD;;AAqCAvU,IAAAA,QAAQ,CAACmB,SAAT,CAAmBqS,YAAnB,GAAkC,YAAW;AAC3C,UAAIhR,CAAJ,EAAOU,eAAP,EAAwBiS,gBAAxB,EAA0CC,WAA1C;AACAlS,MAAAA,eAAe,GAAG,KAAKiD,OAAL,CAAajD,eAA/B;AACAiS,MAAAA,gBAAgB,GAAG,KAAKxH,iBAAL,GAAyBzL,MAA5C;AACAM,MAAAA,CAAC,GAAG2S,gBAAJ;;AACA,UAAIA,gBAAgB,IAAIjS,eAAxB,EAAyC;AACvC;AACD;;AACDkS,MAAAA,WAAW,GAAG,KAAK3H,cAAL,EAAd;;AACA,UAAI,EAAE2H,WAAW,CAAClT,MAAZ,GAAqB,CAAvB,CAAJ,EAA+B;AAC7B;AACD;;AACD,UAAI,KAAKiE,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,eAAO,KAAKkS,YAAL,CAAkBD,WAAW,CAAC3U,KAAZ,CAAkB,CAAlB,EAAqByC,eAAe,GAAGiS,gBAAvC,CAAlB,CAAP;AACD,OAFD,MAEO;AACL,eAAO3S,CAAC,GAAGU,eAAX,EAA4B;AAC1B,cAAI,CAACkS,WAAW,CAAClT,MAAjB,EAAyB;AACvB;AACD;;AACD,eAAKoT,WAAL,CAAiBF,WAAW,CAACrB,KAAZ,EAAjB;AACAvR,UAAAA,CAAC;AACF;AACF;AACF,KAvBD;;AAyBAxC,IAAAA,QAAQ,CAACmB,SAAT,CAAmBmU,WAAnB,GAAiC,UAASlQ,IAAT,EAAe;AAC9C,aAAO,KAAKiQ,YAAL,CAAkB,CAACjQ,IAAD,CAAlB,CAAP;AACD,KAFD;;AAIApF,IAAAA,QAAQ,CAACmB,SAAT,CAAmBkU,YAAnB,GAAkC,UAAS9I,KAAT,EAAgB;AAChD,UAAInH,IAAJ,EAAUrD,EAAV,EAAcC,IAAd;;AACA,WAAKD,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,QAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;AACAqD,QAAAA,IAAI,CAACqF,UAAL,GAAkB,IAAlB;AACArF,QAAAA,IAAI,CAACoE,MAAL,GAAcxJ,QAAQ,CAACyJ,SAAvB;AACA,aAAK9H,IAAL,CAAU,YAAV,EAAwByD,IAAxB;AACD;;AACD,UAAI,KAAKe,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,aAAKxB,IAAL,CAAU,oBAAV,EAAgC4K,KAAhC;AACD;;AACD,aAAO,KAAKgJ,WAAL,CAAiBhJ,KAAjB,CAAP;AACD,KAZD;;AAcAvM,IAAAA,QAAQ,CAACmB,SAAT,CAAmBqU,gBAAnB,GAAsC,UAASC,GAAT,EAAc;AAClD,UAAIrQ,IAAJ,EAAUmH,KAAV;AACA,aAAOA,KAAK,GAAI,YAAW;AACzB,YAAIxK,EAAJ,EAAQC,IAAR,EAAc2D,IAAd,EAAoB+C,QAApB;;AACA/C,QAAAA,IAAI,GAAG,KAAK4G,KAAZ;AACA7D,QAAAA,QAAQ,GAAG,EAAX;;AACA,aAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDqD,UAAAA,IAAI,GAAGO,IAAI,CAAC5D,EAAD,CAAX;;AACA,cAAIqD,IAAI,CAACqQ,GAAL,KAAaA,GAAjB,EAAsB;AACpB/M,YAAAA,QAAQ,CAAChH,IAAT,CAAc0D,IAAd;AACD;AACF;;AACD,eAAOsD,QAAP;AACD,OAXc,CAWZ1H,IAXY,CAWP,IAXO,CAAf;AAYD,KAdD;;AAgBAhB,IAAAA,QAAQ,CAACmB,SAAT,CAAmBgQ,YAAnB,GAAkC,UAAS/L,IAAT,EAAe;AAC/C,UAAIsQ,WAAJ,EAAiBC,YAAjB,EAA+B5T,EAA/B,EAAmCqG,EAAnC,EAAuCpG,IAAvC,EAA6CsG,KAA7C,EAAoD3C,IAApD;;AACA,UAAIP,IAAI,CAACoE,MAAL,KAAgBxJ,QAAQ,CAACyJ,SAA7B,EAAwC;AACtCkM,QAAAA,YAAY,GAAG,KAAKH,gBAAL,CAAsBpQ,IAAI,CAACqQ,GAA3B,CAAf;;AACA,aAAK1T,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2T,YAAY,CAACzT,MAAjC,EAAyCH,EAAE,GAAGC,IAA9C,EAAoDD,EAAE,EAAtD,EAA0D;AACxD2T,UAAAA,WAAW,GAAGC,YAAY,CAAC5T,EAAD,CAA1B;AACA2T,UAAAA,WAAW,CAAClM,MAAZ,GAAqBxJ,QAAQ,CAAC4V,QAA9B;AACD;;AACDxQ,QAAAA,IAAI,CAACqQ,GAAL,CAASI,KAAT;;AACA,aAAKzN,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGqN,YAAY,CAACzT,MAAlC,EAA0CkG,EAAE,GAAGE,KAA/C,EAAsDF,EAAE,EAAxD,EAA4D;AAC1DsN,UAAAA,WAAW,GAAGC,YAAY,CAACvN,EAAD,CAA1B;AACA,eAAKzG,IAAL,CAAU,UAAV,EAAsB+T,WAAtB;AACD;;AACD,YAAI,KAAKvP,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,eAAKxB,IAAL,CAAU,kBAAV,EAA8BgU,YAA9B;AACD;AACF,OAdD,MAcO,IAAI,CAAChQ,IAAI,GAAGP,IAAI,CAACoE,MAAb,MAAyBxJ,QAAQ,CAAC6N,KAAlC,IAA2ClI,IAAI,KAAK3F,QAAQ,CAAC0N,MAAjE,EAAyE;AAC9EtI,QAAAA,IAAI,CAACoE,MAAL,GAAcxJ,QAAQ,CAAC4V,QAAvB;AACA,aAAKjU,IAAL,CAAU,UAAV,EAAsByD,IAAtB;;AACA,YAAI,KAAKe,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,eAAKxB,IAAL,CAAU,kBAAV,EAA8B,CAACyD,IAAD,CAA9B;AACD;AACF;;AACD,UAAI,KAAKe,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,eAAO,KAAKuP,YAAL,EAAP;AACD;AACF,KA1BD;;AA4BA5Q,IAAAA,aAAa,GAAG,yBAAW;AACzB,UAAIhB,IAAJ,EAAUkU,MAAV;AACAA,MAAAA,MAAM,GAAG7T,SAAS,CAAC,CAAD,CAAlB,EAAuBL,IAAI,GAAG,KAAKK,SAAS,CAACC,MAAf,GAAwB1B,OAAO,CAACQ,IAAR,CAAaiB,SAAb,EAAwB,CAAxB,CAAxB,GAAqD,EAAnF;;AACA,UAAI,OAAO6T,MAAP,KAAkB,UAAtB,EAAkC;AAChC,eAAOA,MAAM,CAAC3T,KAAP,CAAa,IAAb,EAAmBP,IAAnB,CAAP;AACD;;AACD,aAAOkU,MAAP;AACD,KAPD;;AASA9V,IAAAA,QAAQ,CAACmB,SAAT,CAAmB4U,UAAnB,GAAgC,UAAS3Q,IAAT,EAAe;AAC7C,aAAO,KAAKmQ,WAAL,CAAiB,CAACnQ,IAAD,CAAjB,CAAP;AACD,KAFD;;AAIApF,IAAAA,QAAQ,CAACmB,SAAT,CAAmBoU,WAAnB,GAAiC,UAAShJ,KAAT,EAAgB;AAC/C,UAAInH,IAAJ,EAAU4Q,QAAV,EAAoBC,WAApB,EAAiCC,UAAjC,EAA6CC,WAA7C,EAA0DC,OAA1D,EAAmE5T,CAAnE,EAAsE6T,KAAtE,EAA6EC,SAA7E,EAAwFC,SAAxF,EAAmGxV,GAAnG,EAAwGiC,MAAxG,EAAgH8S,MAAhH,EAAwHU,WAAxH,EAAqIC,QAArI,EAA+IC,cAA/I,EAA+J3T,GAA/J,EAAoKgI,KAApK,EAA2K0K,GAA3K,EAAgL1T,EAAhL,EAAoLqG,EAApL,EAAwLC,EAAxL,EAA4LsO,EAA5L,EAAgM3U,IAAhM,EAAsMsG,KAAtM,EAA6MC,KAA7M,EAAoNqO,KAApN,EAA2NC,EAA3N,EAA+NlR,IAA/N,EAAqO6C,KAArO,EAA4OC,KAA5O,EAAmPoM,KAAnP,EAA0PiC,KAA1P,EAAiQC,KAAjQ;;AACAtB,MAAAA,GAAG,GAAG,IAAIuB,cAAJ,EAAN;;AACA,WAAKjV,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,QAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;AACAqD,QAAAA,IAAI,CAACqQ,GAAL,GAAWA,GAAX;AACD;;AACDzS,MAAAA,MAAM,GAAGJ,aAAa,CAAC,KAAKuD,OAAL,CAAanD,MAAd,EAAsBuJ,KAAtB,CAAtB;AACAxJ,MAAAA,GAAG,GAAGH,aAAa,CAAC,KAAKuD,OAAL,CAAapD,GAAd,EAAmBwJ,KAAnB,CAAnB;AACAkJ,MAAAA,GAAG,CAACwB,IAAJ,CAASjU,MAAT,EAAiBD,GAAjB,EAAsB,IAAtB;AACA0S,MAAAA,GAAG,CAACxS,eAAJ,GAAsB,CAAC,CAAC,KAAKkD,OAAL,CAAalD,eAArC;AACAwT,MAAAA,QAAQ,GAAG,IAAX;;AACAR,MAAAA,WAAW,GAAI,UAAS5M,KAAT,EAAgB;AAC7B,eAAO,YAAW;AAChB,cAAIjB,EAAJ,EAAQE,KAAR,EAAeI,QAAf;;AACAA,UAAAA,QAAQ,GAAG,EAAX;;AACA,eAAKN,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGiE,KAAK,CAACrK,MAA3B,EAAmCkG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDhD,YAAAA,IAAI,GAAGmH,KAAK,CAACnE,EAAD,CAAZ;;AACAM,YAAAA,QAAQ,CAAChH,IAAT,CAAc2H,KAAK,CAACgK,gBAAN,CAAuB9G,KAAvB,EAA8BkK,QAAQ,IAAIpN,KAAK,CAAClD,OAAN,CAActB,iBAAd,CAAgCuH,OAAhC,CAAwC,gBAAxC,EAA0DqJ,GAAG,CAACjM,MAA9D,CAA1C,EAAiHiM,GAAjH,CAAd;AACD;;AACD,iBAAO/M,QAAP;AACD,SARD;AASD,OAVa,CAUX,IAVW,CAAd;;AAWAgO,MAAAA,cAAc,GAAI,UAASrN,KAAT,EAAgB;AAChC,eAAO,UAAShC,CAAT,EAAY;AACjB,cAAI6P,gBAAJ,EAAsBtM,QAAtB,EAAgCxC,EAAhC,EAAoCC,EAApC,EAAwCsO,EAAxC,EAA4CrO,KAA5C,EAAmDC,KAAnD,EAA0DqO,KAA1D,EAAiElO,QAAjE;;AACA,cAAIrB,CAAC,IAAI,IAAT,EAAe;AACbuD,YAAAA,QAAQ,GAAG,MAAMvD,CAAC,CAAC8P,MAAR,GAAiB9P,CAAC,CAAC+I,KAA9B;;AACA,iBAAKhI,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGiE,KAAK,CAACrK,MAA3B,EAAmCkG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDhD,cAAAA,IAAI,GAAGmH,KAAK,CAACnE,EAAD,CAAZ;AACAhD,cAAAA,IAAI,CAAC+K,MAAL,GAAc;AACZvF,gBAAAA,QAAQ,EAAEA,QADE;AAEZwF,gBAAAA,KAAK,EAAE/I,CAAC,CAAC+I,KAFG;AAGZvF,gBAAAA,SAAS,EAAExD,CAAC,CAAC8P;AAHD,eAAd;AAKD;AACF,WAVD,MAUO;AACLD,YAAAA,gBAAgB,GAAG,IAAnB;AACAtM,YAAAA,QAAQ,GAAG,GAAX;;AACA,iBAAKvC,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGgE,KAAK,CAACrK,MAA3B,EAAmCmG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDjD,cAAAA,IAAI,GAAGmH,KAAK,CAAClE,EAAD,CAAZ;;AACA,kBAAI,EAAEjD,IAAI,CAAC+K,MAAL,CAAYvF,QAAZ,KAAyB,GAAzB,IAAgCxF,IAAI,CAAC+K,MAAL,CAAYtF,SAAZ,KAA0BzF,IAAI,CAAC+K,MAAL,CAAYC,KAAxE,CAAJ,EAAoF;AAClF8G,gBAAAA,gBAAgB,GAAG,KAAnB;AACD;;AACD9R,cAAAA,IAAI,CAAC+K,MAAL,CAAYvF,QAAZ,GAAuBA,QAAvB;AACAxF,cAAAA,IAAI,CAAC+K,MAAL,CAAYtF,SAAZ,GAAwBzF,IAAI,CAAC+K,MAAL,CAAYC,KAApC;AACD;;AACD,gBAAI8G,gBAAJ,EAAsB;AACpB;AACD;AACF;;AACDxO,UAAAA,QAAQ,GAAG,EAAX;;AACA,eAAKiO,EAAE,GAAG,CAAL,EAAQC,KAAK,GAAGrK,KAAK,CAACrK,MAA3B,EAAmCyU,EAAE,GAAGC,KAAxC,EAA+CD,EAAE,EAAjD,EAAqD;AACnDvR,YAAAA,IAAI,GAAGmH,KAAK,CAACoK,EAAD,CAAZ;;AACAjO,YAAAA,QAAQ,CAAChH,IAAT,CAAc2H,KAAK,CAAC1H,IAAN,CAAW,gBAAX,EAA6ByD,IAA7B,EAAmCwF,QAAnC,EAA6CxF,IAAI,CAAC+K,MAAL,CAAYtF,SAAzD,CAAd;AACD;;AACD,iBAAOnC,QAAP;AACD,SAjCD;AAkCD,OAnCgB,CAmCd,IAnCc,CAAjB;;AAoCA+M,MAAAA,GAAG,CAACtB,MAAJ,GAAc,UAAS9K,KAAT,EAAgB;AAC5B,eAAO,UAAShC,CAAT,EAAY;AACjB,cAAI1B,IAAJ;;AACA,cAAI4G,KAAK,CAAC,CAAD,CAAL,CAAS/C,MAAT,KAAoBxJ,QAAQ,CAAC4V,QAAjC,EAA2C;AACzC;AACD;;AACD,cAAIH,GAAG,CAAC2B,UAAJ,KAAmB,CAAvB,EAA0B;AACxB;AACD;;AACDX,UAAAA,QAAQ,GAAGhB,GAAG,CAAC4B,YAAf;;AACA,cAAI5B,GAAG,CAAC6B,iBAAJ,CAAsB,cAAtB,KAAyC,CAAC7B,GAAG,CAAC6B,iBAAJ,CAAsB,cAAtB,EAAsCxH,OAAtC,CAA8C,kBAA9C,CAA9C,EAAiH;AAC/G,gBAAI;AACF2G,cAAAA,QAAQ,GAAGc,IAAI,CAACC,KAAL,CAAWf,QAAX,CAAX;AACD,aAFD,CAEE,OAAOtH,MAAP,EAAe;AACf9H,cAAAA,CAAC,GAAG8H,MAAJ;AACAsH,cAAAA,QAAQ,GAAG,oCAAX;AACD;AACF;;AACDC,UAAAA,cAAc;;AACd,cAAI,EAAG,QAAQ/Q,IAAI,GAAG8P,GAAG,CAACjM,MAAnB,KAA8B7D,IAAI,GAAG,GAAxC,CAAJ,EAAmD;AACjD,mBAAOsQ,WAAW,EAAlB;AACD,WAFD,MAEO;AACL,mBAAO5M,KAAK,CAACoO,SAAN,CAAgBlL,KAAhB,EAAuBkK,QAAvB,EAAiCpP,CAAjC,CAAP;AACD;AACF,SAvBD;AAwBD,OAzBY,CAyBV,IAzBU,CAAb;;AA0BAoO,MAAAA,GAAG,CAACP,OAAJ,GAAe,UAAS7L,KAAT,EAAgB;AAC7B,eAAO,YAAW;AAChB,cAAIkD,KAAK,CAAC,CAAD,CAAL,CAAS/C,MAAT,KAAoBxJ,QAAQ,CAAC4V,QAAjC,EAA2C;AACzC;AACD;;AACD,iBAAOK,WAAW,EAAlB;AACD,SALD;AAMD,OAPa,CAOX,IAPW,CAAd;;AAQAO,MAAAA,WAAW,GAAG,CAAC7Q,IAAI,GAAG8P,GAAG,CAACtF,MAAZ,KAAuB,IAAvB,GAA8BxK,IAA9B,GAAqC8P,GAAnD;AACAe,MAAAA,WAAW,CAACkB,UAAZ,GAAyBhB,cAAzB;AACAN,MAAAA,OAAO,GAAG;AACR,kBAAU,kBADF;AAER,yBAAiB,UAFT;AAGR,4BAAoB;AAHZ,OAAV;;AAKA,UAAI,KAAKjQ,OAAL,CAAaiQ,OAAjB,EAA0B;AACxBzT,QAAAA,MAAM,CAACyT,OAAD,EAAU,KAAKjQ,OAAL,CAAaiQ,OAAvB,CAAN;AACD;;AACD,WAAKF,UAAL,IAAmBE,OAAnB,EAA4B;AAC1BD,QAAAA,WAAW,GAAGC,OAAO,CAACF,UAAD,CAArB;;AACA,YAAIC,WAAJ,EAAiB;AACfV,UAAAA,GAAG,CAACkC,gBAAJ,CAAqBzB,UAArB,EAAiCC,WAAjC;AACD;AACF;;AACDH,MAAAA,QAAQ,GAAG,IAAI4B,QAAJ,EAAX;;AACA,UAAI,KAAKzR,OAAL,CAAavC,MAAjB,EAAyB;AACvB4E,QAAAA,KAAK,GAAG,KAAKrC,OAAL,CAAavC,MAArB;;AACA,aAAK7C,GAAL,IAAYyH,KAAZ,EAAmB;AACjBuC,UAAAA,KAAK,GAAGvC,KAAK,CAACzH,GAAD,CAAb;AACAiV,UAAAA,QAAQ,CAAC6B,MAAT,CAAgB9W,GAAhB,EAAqBgK,KAArB;AACD;AACF;;AACD,WAAK3C,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGiE,KAAK,CAACrK,MAA3B,EAAmCkG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDhD,QAAAA,IAAI,GAAGmH,KAAK,CAACnE,EAAD,CAAZ;AACA,aAAKzG,IAAL,CAAU,SAAV,EAAqByD,IAArB,EAA2BqQ,GAA3B,EAAgCO,QAAhC;AACD;;AACD,UAAI,KAAK7P,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,aAAKxB,IAAL,CAAU,iBAAV,EAA6B4K,KAA7B,EAAoCkJ,GAApC,EAAyCO,QAAzC;AACD;;AACD,UAAI,KAAKpQ,OAAL,CAAasI,OAAb,KAAyB,MAA7B,EAAqC;AACnCzF,QAAAA,KAAK,GAAG,KAAK7C,OAAL,CAAakD,gBAAb,CAA8B,iCAA9B,CAAR;;AACA,aAAKT,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAGE,KAAK,CAACvG,MAA3B,EAAmCmG,EAAE,GAAGE,KAAxC,EAA+CF,EAAE,EAAjD,EAAqD;AACnDgO,UAAAA,KAAK,GAAG5N,KAAK,CAACJ,EAAD,CAAb;AACAiO,UAAAA,SAAS,GAAGD,KAAK,CAACrJ,YAAN,CAAmB,MAAnB,CAAZ;AACAuJ,UAAAA,SAAS,GAAGF,KAAK,CAACrJ,YAAN,CAAmB,MAAnB,CAAZ;;AACA,cAAIqJ,KAAK,CAACnI,OAAN,KAAkB,QAAlB,IAA8BmI,KAAK,CAACyB,YAAN,CAAmB,UAAnB,CAAlC,EAAkE;AAChEjD,YAAAA,KAAK,GAAGwB,KAAK,CAAClQ,OAAd;;AACA,iBAAKwQ,EAAE,GAAG,CAAL,EAAQC,KAAK,GAAG/B,KAAK,CAAC3S,MAA3B,EAAmCyU,EAAE,GAAGC,KAAxC,EAA+CD,EAAE,EAAjD,EAAqD;AACnDb,cAAAA,MAAM,GAAGjB,KAAK,CAAC8B,EAAD,CAAd;;AACA,kBAAIb,MAAM,CAACiC,QAAX,EAAqB;AACnB/B,gBAAAA,QAAQ,CAAC6B,MAAT,CAAgBvB,SAAhB,EAA2BR,MAAM,CAAC/K,KAAlC;AACD;AACF;AACF,WARD,MAQO,IAAI,CAACwL,SAAD,IAAe,CAACO,KAAK,GAAGP,SAAS,CAACyB,WAAV,EAAT,MAAsC,UAAtC,IAAoDlB,KAAK,KAAK,OAA7E,IAAyFT,KAAK,CAAC4B,OAAnG,EAA4G;AACjHjC,YAAAA,QAAQ,CAAC6B,MAAT,CAAgBvB,SAAhB,EAA2BD,KAAK,CAACtL,KAAjC;AACD;AACF;AACF;;AACD,WAAKvI,CAAC,GAAGqU,EAAE,GAAG,CAAT,EAAYE,KAAK,GAAGxK,KAAK,CAACrK,MAAN,GAAe,CAAxC,EAA2C,KAAK6U,KAAL,GAAaF,EAAE,IAAIE,KAAnB,GAA2BF,EAAE,IAAIE,KAA5E,EAAmFvU,CAAC,GAAG,KAAKuU,KAAL,GAAa,EAAEF,EAAf,GAAoB,EAAEA,EAA7G,EAAiH;AAC/Gb,QAAAA,QAAQ,CAAC6B,MAAT,CAAgB,KAAKxH,aAAL,CAAmB7N,CAAnB,CAAhB,EAAuC+J,KAAK,CAAC/J,CAAD,CAA5C,EAAiD,KAAKuG,eAAL,CAAqBwD,KAAK,CAAC/J,CAAD,CAAL,CAASwG,IAA9B,CAAjD;AACD;;AACD,aAAO,KAAKkP,aAAL,CAAmBzC,GAAnB,EAAwBO,QAAxB,EAAkCzJ,KAAlC,CAAP;AACD,KAnJD;;AAqJAvM,IAAAA,QAAQ,CAACmB,SAAT,CAAmB+W,aAAnB,GAAmC,UAASzC,GAAT,EAAcO,QAAd,EAAwBzJ,KAAxB,EAA+B;AAChE,aAAOkJ,GAAG,CAAC0C,IAAJ,CAASnC,QAAT,CAAP;AACD,KAFD;;AAIAhW,IAAAA,QAAQ,CAACmB,SAAT,CAAmBsW,SAAnB,GAA+B,UAASlL,KAAT,EAAgB8K,YAAhB,EAA8BhQ,CAA9B,EAAiC;AAC9D,UAAIjC,IAAJ,EAAUrD,EAAV,EAAcC,IAAd;;AACA,WAAKD,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,QAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;AACAqD,QAAAA,IAAI,CAACoE,MAAL,GAAcxJ,QAAQ,CAACoY,OAAvB;AACA,aAAKzW,IAAL,CAAU,SAAV,EAAqByD,IAArB,EAA2BiS,YAA3B,EAAyChQ,CAAzC;AACA,aAAK1F,IAAL,CAAU,UAAV,EAAsByD,IAAtB;AACD;;AACD,UAAI,KAAKe,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,aAAKxB,IAAL,CAAU,iBAAV,EAA6B4K,KAA7B,EAAoC8K,YAApC,EAAkDhQ,CAAlD;AACA,aAAK1F,IAAL,CAAU,kBAAV,EAA8B4K,KAA9B;AACD;;AACD,UAAI,KAAKpG,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,eAAO,KAAKuP,YAAL,EAAP;AACD;AACF,KAfD;;AAiBAxT,IAAAA,QAAQ,CAACmB,SAAT,CAAmBkS,gBAAnB,GAAsC,UAAS9G,KAAT,EAAgBhC,OAAhB,EAAyBkL,GAAzB,EAA8B;AAClE,UAAIrQ,IAAJ,EAAUrD,EAAV,EAAcC,IAAd;;AACA,WAAKD,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGuK,KAAK,CAACrK,MAA1B,EAAkCH,EAAE,GAAGC,IAAvC,EAA6CD,EAAE,EAA/C,EAAmD;AACjDqD,QAAAA,IAAI,GAAGmH,KAAK,CAACxK,EAAD,CAAZ;AACAqD,QAAAA,IAAI,CAACoE,MAAL,GAAcxJ,QAAQ,CAACqY,KAAvB;AACA,aAAK1W,IAAL,CAAU,OAAV,EAAmByD,IAAnB,EAAyBmF,OAAzB,EAAkCkL,GAAlC;AACA,aAAK9T,IAAL,CAAU,UAAV,EAAsByD,IAAtB;AACD;;AACD,UAAI,KAAKe,OAAL,CAAahD,cAAjB,EAAiC;AAC/B,aAAKxB,IAAL,CAAU,eAAV,EAA2B4K,KAA3B,EAAkChC,OAAlC,EAA2CkL,GAA3C;AACA,aAAK9T,IAAL,CAAU,kBAAV,EAA8B4K,KAA9B;AACD;;AACD,UAAI,KAAKpG,OAAL,CAAalC,gBAAjB,EAAmC;AACjC,eAAO,KAAKuP,YAAL,EAAP;AACD;AACF,KAfD;;AAiBA,WAAOxT,QAAP;AAED,GAhzCU,CAgzCRC,OAhzCQ,CAAX;;AAkzCAD,EAAAA,QAAQ,CAACmM,OAAT,GAAmB,OAAnB;AAEAnM,EAAAA,QAAQ,CAACmG,OAAT,GAAmB,EAAnB;;AAEAnG,EAAAA,QAAQ,CAAC8M,iBAAT,GAA6B,UAASlH,OAAT,EAAkB;AAC7C,QAAIA,OAAO,CAACoH,YAAR,CAAqB,IAArB,CAAJ,EAAgC;AAC9B,aAAOhN,QAAQ,CAACmG,OAAT,CAAiBjG,QAAQ,CAAC0F,OAAO,CAACoH,YAAR,CAAqB,IAArB,CAAD,CAAzB,CAAP;AACD,KAFD,MAEO;AACL,aAAO,KAAK,CAAZ;AACD;AACF,GAND;;AAQAhN,EAAAA,QAAQ,CAAC6M,SAAT,GAAqB,EAArB;;AAEA7M,EAAAA,QAAQ,CAACsY,UAAT,GAAsB,UAAS1S,OAAT,EAAkB;AACtC,QAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;AAC/BA,MAAAA,OAAO,GAAG4G,QAAQ,CAACC,aAAT,CAAuB7G,OAAvB,CAAV;AACD;;AACD,QAAI,CAACA,OAAO,IAAI,IAAX,GAAkBA,OAAO,CAACgH,QAA1B,GAAqC,KAAK,CAA3C,KAAiD,IAArD,EAA2D;AACzD,YAAM,IAAID,KAAJ,CAAU,gNAAV,CAAN;AACD;;AACD,WAAO/G,OAAO,CAACgH,QAAf;AACD,GARD;;AAUA5M,EAAAA,QAAQ,CAACuY,YAAT,GAAwB,IAAxB;;AAEAvY,EAAAA,QAAQ,CAACwY,QAAT,GAAoB,YAAW;AAC7B,QAAIC,aAAJ,EAAmB7L,QAAnB,EAA6B8L,SAA7B,EAAwC3W,EAAxC,EAA4CC,IAA5C,EAAkD0G,QAAlD;;AACA,QAAI8D,QAAQ,CAAC1D,gBAAb,EAA+B;AAC7B4P,MAAAA,SAAS,GAAGlM,QAAQ,CAAC1D,gBAAT,CAA0B,WAA1B,CAAZ;AACD,KAFD,MAEO;AACL4P,MAAAA,SAAS,GAAG,EAAZ;;AACAD,MAAAA,aAAa,GAAG,uBAAS7H,QAAT,EAAmB;AACjC,YAAIC,EAAJ,EAAQ9O,EAAR,EAAYC,IAAZ,EAAkB0G,QAAlB;;AACAA,QAAAA,QAAQ,GAAG,EAAX;;AACA,aAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG4O,QAAQ,CAAC1O,MAA7B,EAAqCH,EAAE,GAAGC,IAA1C,EAAgDD,EAAE,EAAlD,EAAsD;AACpD8O,UAAAA,EAAE,GAAGD,QAAQ,CAAC7O,EAAD,CAAb;;AACA,cAAI,qBAAqBgE,IAArB,CAA0B8K,EAAE,CAAChL,SAA7B,CAAJ,EAA6C;AAC3C6C,YAAAA,QAAQ,CAAChH,IAAT,CAAcgX,SAAS,CAAChX,IAAV,CAAemP,EAAf,CAAd;AACD,WAFD,MAEO;AACLnI,YAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAK,CAAnB;AACD;AACF;;AACD,eAAOgH,QAAP;AACD,OAZD;;AAaA+P,MAAAA,aAAa,CAACjM,QAAQ,CAAC1G,oBAAT,CAA8B,KAA9B,CAAD,CAAb;AACA2S,MAAAA,aAAa,CAACjM,QAAQ,CAAC1G,oBAAT,CAA8B,MAA9B,CAAD,CAAb;AACD;;AACD4C,IAAAA,QAAQ,GAAG,EAAX;;AACA,SAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG0W,SAAS,CAACxW,MAA9B,EAAsCH,EAAE,GAAGC,IAA3C,EAAiDD,EAAE,EAAnD,EAAuD;AACrD6K,MAAAA,QAAQ,GAAG8L,SAAS,CAAC3W,EAAD,CAApB;;AACA,UAAI/B,QAAQ,CAAC8M,iBAAT,CAA2BF,QAA3B,MAAyC,KAA7C,EAAoD;AAClDlE,QAAAA,QAAQ,CAAChH,IAAT,CAAc,IAAI1B,QAAJ,CAAa4M,QAAb,CAAd;AACD,OAFD,MAEO;AACLlE,QAAAA,QAAQ,CAAChH,IAAT,CAAc,KAAK,CAAnB;AACD;AACF;;AACD,WAAOgH,QAAP;AACD,GAhCD;;AAkCA1I,EAAAA,QAAQ,CAAC2Y,mBAAT,GAA+B,CAAC,gCAAD,CAA/B;;AAEA3Y,EAAAA,QAAQ,CAAC+M,kBAAT,GAA8B,YAAW;AACvC,QAAI6L,cAAJ,EAAoBC,KAApB,EAA2B9W,EAA3B,EAA+BC,IAA/B,EAAqC2D,IAArC;;AACAiT,IAAAA,cAAc,GAAG,IAAjB;;AACA,QAAIhK,MAAM,CAACkK,IAAP,IAAelK,MAAM,CAACsF,UAAtB,IAAoCtF,MAAM,CAACmK,QAA3C,IAAuDnK,MAAM,CAACoK,IAA9D,IAAsEpK,MAAM,CAACgJ,QAA7E,IAAyFpL,QAAQ,CAACC,aAAtG,EAAqH;AACnH,UAAI,EAAE,eAAeD,QAAQ,CAACxG,aAAT,CAAuB,GAAvB,CAAjB,CAAJ,EAAmD;AACjD4S,QAAAA,cAAc,GAAG,KAAjB;AACD,OAFD,MAEO;AACLjT,QAAAA,IAAI,GAAG3F,QAAQ,CAAC2Y,mBAAhB;;AACA,aAAK5W,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2D,IAAI,CAACzD,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChD8W,UAAAA,KAAK,GAAGlT,IAAI,CAAC5D,EAAD,CAAZ;;AACA,cAAI8W,KAAK,CAAC9S,IAAN,CAAWkT,SAAS,CAACC,SAArB,CAAJ,EAAqC;AACnCN,YAAAA,cAAc,GAAG,KAAjB;AACA;AACD;AACF;AACF;AACF,KAbD,MAaO;AACLA,MAAAA,cAAc,GAAG,KAAjB;AACD;;AACD,WAAOA,cAAP;AACD,GApBD;;AAsBArY,EAAAA,OAAO,GAAG,iBAAS4Y,IAAT,EAAeC,YAAf,EAA6B;AACrC,QAAIlH,IAAJ,EAAUnQ,EAAV,EAAcC,IAAd,EAAoB0G,QAApB;;AACAA,IAAAA,QAAQ,GAAG,EAAX;;AACA,SAAK3G,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGmX,IAAI,CAACjX,MAAzB,EAAiCH,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDmQ,MAAAA,IAAI,GAAGiH,IAAI,CAACpX,EAAD,CAAX;;AACA,UAAImQ,IAAI,KAAKkH,YAAb,EAA2B;AACzB1Q,QAAAA,QAAQ,CAAChH,IAAT,CAAcwQ,IAAd;AACD;AACF;;AACD,WAAOxJ,QAAP;AACD,GAVD;;AAYAxI,EAAAA,QAAQ,GAAG,kBAASmZ,GAAT,EAAc;AACvB,WAAOA,GAAG,CAACjN,OAAJ,CAAY,YAAZ,EAA0B,UAASwH,KAAT,EAAgB;AAC/C,aAAOA,KAAK,CAAC0F,MAAN,CAAa,CAAb,EAAgBrM,WAAhB,EAAP;AACD,KAFM,CAAP;AAGD,GAJD;;AAMAjN,EAAAA,QAAQ,CAACgG,aAAT,GAAyB,UAASuT,MAAT,EAAiB;AACxC,QAAIC,GAAJ;AACAA,IAAAA,GAAG,GAAGhN,QAAQ,CAACxG,aAAT,CAAuB,KAAvB,CAAN;AACAwT,IAAAA,GAAG,CAACvQ,SAAJ,GAAgBsQ,MAAhB;AACA,WAAOC,GAAG,CAACC,UAAJ,CAAe,CAAf,CAAP;AACD,GALD;;AAOAzZ,EAAAA,QAAQ,CAACwP,aAAT,GAAyB,UAAS5J,OAAT,EAAkB8T,SAAlB,EAA6B;AACpD,QAAI9T,OAAO,KAAK8T,SAAhB,EAA2B;AACzB,aAAO,IAAP;AACD;;AACD,WAAO9T,OAAO,GAAGA,OAAO,CAACiE,UAAzB,EAAqC;AACnC,UAAIjE,OAAO,KAAK8T,SAAhB,EAA2B;AACzB,eAAO,IAAP;AACD;AACF;;AACD,WAAO,KAAP;AACD,GAVD;;AAYA1Z,EAAAA,QAAQ,CAACmN,UAAT,GAAsB,UAAS0D,EAAT,EAAa7H,IAAb,EAAmB;AACvC,QAAIpD,OAAJ;;AACA,QAAI,OAAOiL,EAAP,KAAc,QAAlB,EAA4B;AAC1BjL,MAAAA,OAAO,GAAG4G,QAAQ,CAACC,aAAT,CAAuBoE,EAAvB,CAAV;AACD,KAFD,MAEO,IAAIA,EAAE,CAACnE,QAAH,IAAe,IAAnB,EAAyB;AAC9B9G,MAAAA,OAAO,GAAGiL,EAAV;AACD;;AACD,QAAIjL,OAAO,IAAI,IAAf,EAAqB;AACnB,YAAM,IAAI+G,KAAJ,CAAU,cAAc3D,IAAd,GAAqB,2EAA/B,CAAN;AACD;;AACD,WAAOpD,OAAP;AACD,GAXD;;AAaA5F,EAAAA,QAAQ,CAACoN,WAAT,GAAuB,UAASuM,GAAT,EAAc3Q,IAAd,EAAoB;AACzC,QAAI3B,CAAJ,EAAOwJ,EAAP,EAAWD,QAAX,EAAqB7O,EAArB,EAAyBqG,EAAzB,EAA6BpG,IAA7B,EAAmCsG,KAAnC,EAA0C3C,IAA1C;;AACA,QAAIgU,GAAG,YAAYC,KAAnB,EAA0B;AACxBhJ,MAAAA,QAAQ,GAAG,EAAX;;AACA,UAAI;AACF,aAAK7O,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG2X,GAAG,CAACzX,MAAxB,EAAgCH,EAAE,GAAGC,IAArC,EAA2CD,EAAE,EAA7C,EAAiD;AAC/C8O,UAAAA,EAAE,GAAG8I,GAAG,CAAC5X,EAAD,CAAR;AACA6O,UAAAA,QAAQ,CAAClP,IAAT,CAAc,KAAKyL,UAAL,CAAgB0D,EAAhB,EAAoB7H,IAApB,CAAd;AACD;AACF,OALD,CAKE,OAAOmG,MAAP,EAAe;AACf9H,QAAAA,CAAC,GAAG8H,MAAJ;AACAyB,QAAAA,QAAQ,GAAG,IAAX;AACD;AACF,KAXD,MAWO,IAAI,OAAO+I,GAAP,KAAe,QAAnB,EAA6B;AAClC/I,MAAAA,QAAQ,GAAG,EAAX;AACAjL,MAAAA,IAAI,GAAG6G,QAAQ,CAAC1D,gBAAT,CAA0B6Q,GAA1B,CAAP;;AACA,WAAKvR,EAAE,GAAG,CAAL,EAAQE,KAAK,GAAG3C,IAAI,CAACzD,MAA1B,EAAkCkG,EAAE,GAAGE,KAAvC,EAA8CF,EAAE,EAAhD,EAAoD;AAClDyI,QAAAA,EAAE,GAAGlL,IAAI,CAACyC,EAAD,CAAT;AACAwI,QAAAA,QAAQ,CAAClP,IAAT,CAAcmP,EAAd;AACD;AACF,KAPM,MAOA,IAAI8I,GAAG,CAACjN,QAAJ,IAAgB,IAApB,EAA0B;AAC/BkE,MAAAA,QAAQ,GAAG,CAAC+I,GAAD,CAAX;AACD;;AACD,QAAI,EAAG/I,QAAQ,IAAI,IAAb,IAAsBA,QAAQ,CAAC1O,MAAjC,CAAJ,EAA8C;AAC5C,YAAM,IAAIyK,KAAJ,CAAU,cAAc3D,IAAd,GAAqB,4FAA/B,CAAN;AACD;;AACD,WAAO4H,QAAP;AACD,GA3BD;;AA6BA5Q,EAAAA,QAAQ,CAAC0J,OAAT,GAAmB,UAASmQ,QAAT,EAAmBvM,QAAnB,EAA6BwM,QAA7B,EAAuC;AACxD,QAAIlL,MAAM,CAAClF,OAAP,CAAemQ,QAAf,CAAJ,EAA8B;AAC5B,aAAOvM,QAAQ,EAAf;AACD,KAFD,MAEO,IAAIwM,QAAQ,IAAI,IAAhB,EAAsB;AAC3B,aAAOA,QAAQ,EAAf;AACD;AACF,GAND;;AAQA9Z,EAAAA,QAAQ,CAACmT,WAAT,GAAuB,UAAS/N,IAAT,EAAerB,aAAf,EAA8B;AACnD,QAAIgW,YAAJ,EAAkBC,QAAlB,EAA4BC,SAA5B,EAAuClY,EAAvC,EAA2CC,IAA3C;;AACA,QAAI,CAAC+B,aAAL,EAAoB;AAClB,aAAO,IAAP;AACD;;AACDA,IAAAA,aAAa,GAAGA,aAAa,CAACmW,KAAd,CAAoB,GAApB,CAAhB;AACAF,IAAAA,QAAQ,GAAG5U,IAAI,CAACuO,IAAhB;AACAoG,IAAAA,YAAY,GAAGC,QAAQ,CAAC5N,OAAT,CAAiB,OAAjB,EAA0B,EAA1B,CAAf;;AACA,SAAKrK,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAG+B,aAAa,CAAC7B,MAAlC,EAA0CH,EAAE,GAAGC,IAA/C,EAAqDD,EAAE,EAAvD,EAA2D;AACzDkY,MAAAA,SAAS,GAAGlW,aAAa,CAAChC,EAAD,CAAzB;AACAkY,MAAAA,SAAS,GAAGA,SAAS,CAACpR,IAAV,EAAZ;;AACA,UAAIoR,SAAS,CAACX,MAAV,CAAiB,CAAjB,MAAwB,GAA5B,EAAiC;AAC/B,YAAIlU,IAAI,CAAC4D,IAAL,CAAUgP,WAAV,GAAwBlI,OAAxB,CAAgCmK,SAAS,CAACjC,WAAV,EAAhC,EAAyD5S,IAAI,CAAC4D,IAAL,CAAU9G,MAAV,GAAmB+X,SAAS,CAAC/X,MAAtF,MAAkG,CAAC,CAAvG,EAA0G;AACxG,iBAAO,IAAP;AACD;AACF,OAJD,MAIO,IAAI,QAAQ6D,IAAR,CAAakU,SAAb,CAAJ,EAA6B;AAClC,YAAIF,YAAY,KAAKE,SAAS,CAAC7N,OAAV,CAAkB,OAAlB,EAA2B,EAA3B,CAArB,EAAqD;AACnD,iBAAO,IAAP;AACD;AACF,OAJM,MAIA;AACL,YAAI4N,QAAQ,KAAKC,SAAjB,EAA4B;AAC1B,iBAAO,IAAP;AACD;AACF;AACF;;AACD,WAAO,KAAP;AACD,GA1BD;;AA4BA,MAAI,OAAOE,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,KAAK,IAAhD,EAAsD;AACpDA,IAAAA,MAAM,CAAC3Y,EAAP,CAAUoL,QAAV,GAAqB,UAASzG,OAAT,EAAkB;AACrC,aAAO,KAAKiU,IAAL,CAAU,YAAW;AAC1B,eAAO,IAAIpa,QAAJ,CAAa,IAAb,EAAmBmG,OAAnB,CAAP;AACD,OAFM,CAAP;AAGD,KAJD;AAKD;;AAED,MAAI,OAAOkU,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,KAAK,IAAhD,EAAsD;AACpDA,IAAAA,MAAM,CAACC,OAAP,GAAiBta,QAAjB;AACD,GAFD,MAEO;AACL4O,IAAAA,MAAM,CAAC5O,QAAP,GAAkBA,QAAlB;AACD;;AAEDA,EAAAA,QAAQ,CAAC6N,KAAT,GAAiB,OAAjB;AAEA7N,EAAAA,QAAQ,CAAC0N,MAAT,GAAkB,QAAlB;AAEA1N,EAAAA,QAAQ,CAACua,QAAT,GAAoBva,QAAQ,CAAC0N,MAA7B;AAEA1N,EAAAA,QAAQ,CAACyJ,SAAT,GAAqB,WAArB;AAEAzJ,EAAAA,QAAQ,CAACwa,UAAT,GAAsBxa,QAAQ,CAACyJ,SAA/B;AAEAzJ,EAAAA,QAAQ,CAAC4V,QAAT,GAAoB,UAApB;AAEA5V,EAAAA,QAAQ,CAACqY,KAAT,GAAiB,OAAjB;AAEArY,EAAAA,QAAQ,CAACoY,OAAT,GAAmB,SAAnB;AAGA;AACF;AACA;AACA;AACA;AACA;;AAEEhY,EAAAA,oBAAoB,GAAG,8BAASqU,GAAT,EAAc;AACnC,QAAIgG,KAAJ,EAAW/F,MAAX,EAAmBC,GAAnB,EAAwB+F,IAAxB,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsCC,EAAtC,EAA0CC,EAA1C,EAA8CC,KAA9C,EAAqDC,EAArD;AACAH,IAAAA,EAAE,GAAGpG,GAAG,CAACwG,YAAT;AACAL,IAAAA,EAAE,GAAGnG,GAAG,CAACyG,aAAT;AACAxG,IAAAA,MAAM,GAAGlI,QAAQ,CAACxG,aAAT,CAAuB,QAAvB,CAAT;AACA0O,IAAAA,MAAM,CAAC7N,KAAP,GAAe,CAAf;AACA6N,IAAAA,MAAM,CAAC3N,MAAP,GAAgB6T,EAAhB;AACAjG,IAAAA,GAAG,GAAGD,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAN;AACAH,IAAAA,GAAG,CAACwG,SAAJ,CAAc1G,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AACAiG,IAAAA,IAAI,GAAG/F,GAAG,CAACyG,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0BR,EAA1B,EAA8BF,IAArC;AACAM,IAAAA,EAAE,GAAG,CAAL;AACAL,IAAAA,EAAE,GAAGC,EAAL;AACAE,IAAAA,EAAE,GAAGF,EAAL;;AACA,WAAOE,EAAE,GAAGE,EAAZ,EAAgB;AACdP,MAAAA,KAAK,GAAGC,IAAI,CAAC,CAACI,EAAE,GAAG,CAAN,IAAW,CAAX,GAAe,CAAhB,CAAZ;;AACA,UAAIL,KAAK,KAAK,CAAd,EAAiB;AACfE,QAAAA,EAAE,GAAGG,EAAL;AACD,OAFD,MAEO;AACLE,QAAAA,EAAE,GAAGF,EAAL;AACD;;AACDA,MAAAA,EAAE,GAAIH,EAAE,GAAGK,EAAN,IAAa,CAAlB;AACD;;AACDD,IAAAA,KAAK,GAAGD,EAAE,GAAGF,EAAb;;AACA,QAAIG,KAAK,KAAK,CAAd,EAAiB;AACf,aAAO,CAAP;AACD,KAFD,MAEO;AACL,aAAOA,KAAP;AACD;AACF,GA5BD;;AA8BA1a,EAAAA,eAAe,GAAG,yBAASsU,GAAT,EAAcF,GAAd,EAAmB4G,EAAnB,EAAuBL,EAAvB,EAA2BM,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+CC,EAA/C,EAAmD;AACnE,QAAIC,eAAJ;AACAA,IAAAA,eAAe,GAAGxb,oBAAoB,CAACqU,GAAD,CAAtC;AACA,WAAOE,GAAG,CAACwG,SAAJ,CAAc1G,GAAd,EAAmB4G,EAAnB,EAAuBL,EAAvB,EAA2BM,EAA3B,EAA+BC,EAA/B,EAAmCC,EAAnC,EAAuCC,EAAvC,EAA2CC,EAA3C,EAA+CC,EAAE,GAAGC,eAApD,CAAP;AACD,GAJD;AAOA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEEzb,EAAAA,aAAa,GAAG,uBAAS0b,GAAT,EAAcra,EAAd,EAAkB;AAChC,QAAImG,GAAJ,EAASmU,GAAT,EAAczW,IAAd,EAAoBC,KAApB,EAA0ByW,KAA1B,EAAgCC,GAAhC,EAAqCC,GAArC,EAA0CC,IAA1C,EAAgD1N,GAAhD;;AACAnJ,IAAAA,IAAI,GAAG,KAAP;AACAmJ,IAAAA,GAAG,GAAG,IAAN;AACAsN,IAAAA,GAAG,GAAGD,GAAG,CAACrP,QAAV;AACA0P,IAAAA,IAAI,GAAGJ,GAAG,CAACK,eAAX;AACAxU,IAAAA,GAAG,GAAImU,GAAG,CAACza,gBAAJ,GAAuB,kBAAvB,GAA4C,aAAnD;AACA4a,IAAAA,GAAG,GAAIH,GAAG,CAACza,gBAAJ,GAAuB,qBAAvB,GAA+C,aAAtD;AACA2a,IAAAA,GAAG,GAAIF,GAAG,CAACza,gBAAJ,GAAuB,EAAvB,GAA4B,IAAnC;;AACAiE,IAAAA,KAAI,GAAG,cAAS+B,CAAT,EAAY;AACjB,UAAIA,CAAC,CAACsM,IAAF,KAAW,kBAAX,IAAiCmI,GAAG,CAAC1E,UAAJ,KAAmB,UAAxD,EAAoE;AAClE;AACD;;AACD,OAAC/P,CAAC,CAACsM,IAAF,KAAW,MAAX,GAAoBkI,GAApB,GAA0BC,GAA3B,EAAgCG,GAAhC,EAAqCD,GAAG,GAAG3U,CAAC,CAACsM,IAA7C,EAAmDrO,KAAnD,EAAyD,KAAzD;;AACA,UAAI,CAACD,IAAD,KAAUA,IAAI,GAAG,IAAjB,CAAJ,EAA4B;AAC1B,eAAO7D,EAAE,CAACR,IAAH,CAAQ6a,GAAR,EAAaxU,CAAC,CAACsM,IAAF,IAAUtM,CAAvB,CAAP;AACD;AACF,KARD;;AASA0U,IAAAA,KAAI,GAAG,gBAAW;AAChB,UAAI1U,CAAJ;;AACA,UAAI;AACF6U,QAAAA,IAAI,CAACE,QAAL,CAAc,MAAd;AACD,OAFD,CAEE,OAAOjN,MAAP,EAAe;AACf9H,QAAAA,CAAC,GAAG8H,MAAJ;AACA9E,QAAAA,UAAU,CAAC0R,KAAD,EAAO,EAAP,CAAV;AACA;AACD;;AACD,aAAOzW,KAAI,CAAC,MAAD,CAAX;AACD,KAVD;;AAWA,QAAIwW,GAAG,CAAC1E,UAAJ,KAAmB,UAAvB,EAAmC;AACjC,UAAI0E,GAAG,CAACO,iBAAJ,IAAyBH,IAAI,CAACE,QAAlC,EAA4C;AAC1C,YAAI;AACF5N,UAAAA,GAAG,GAAG,CAACqN,GAAG,CAACS,YAAX;AACD,SAFD,CAEE,OAAOnN,MAAP,EAAe,CAAE;;AACnB,YAAIX,GAAJ,EAAS;AACPuN,UAAAA,KAAI;AACL;AACF;;AACDD,MAAAA,GAAG,CAACnU,GAAD,CAAH,CAASqU,GAAG,GAAG,kBAAf,EAAmC1W,KAAnC,EAAyC,KAAzC;AACAwW,MAAAA,GAAG,CAACnU,GAAD,CAAH,CAASqU,GAAG,GAAG,kBAAf,EAAmC1W,KAAnC,EAAyC,KAAzC;AACA,aAAOuW,GAAG,CAAClU,GAAD,CAAH,CAASqU,GAAG,GAAG,MAAf,EAAuB1W,KAAvB,EAA6B,KAA7B,CAAP;AACD;AACF,GA1CD;;AA4CAtF,EAAAA,QAAQ,CAACuc,qBAAT,GAAiC,YAAW;AAC1C,QAAIvc,QAAQ,CAACuY,YAAb,EAA2B;AACzB,aAAOvY,QAAQ,CAACwY,QAAT,EAAP;AACD;AACF,GAJD;;AAMArY,EAAAA,aAAa,CAACyO,MAAD,EAAS5O,QAAQ,CAACuc,qBAAlB,CAAb;AAED,CA5sDD,EA4sDGvb,IA5sDH,CA4sDQ,IA5sDR","file":"dropzone.cfc479a4.js","sourceRoot":"../src","sourcesContent":["\n/*\n *\n * More info at [www.dropzonejs.com](http://www.dropzonejs.com)\n *\n * Copyright (c) 2012, Matias Meno\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n */\n\n(function() {\n  var Dropzone, Emitter, camelize, contentLoaded, detectVerticalSquash, drawImageIOSFix, noop, without,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  noop = function() {};\n\n  Emitter = (function() {\n    function Emitter() {}\n\n    Emitter.prototype.addEventListener = Emitter.prototype.on;\n\n    Emitter.prototype.on = function(event, fn) {\n      this._callbacks = this._callbacks || {};\n      if (!this._callbacks[event]) {\n        this._callbacks[event] = [];\n      }\n      this._callbacks[event].push(fn);\n      return this;\n    };\n\n    Emitter.prototype.emit = function() {\n      var args, callback, callbacks, event, _i, _len;\n      event = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      this._callbacks = this._callbacks || {};\n      callbacks = this._callbacks[event];\n      if (callbacks) {\n        for (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n          callback = callbacks[_i];\n          callback.apply(this, args);\n        }\n      }\n      return this;\n    };\n\n    Emitter.prototype.removeListener = Emitter.prototype.off;\n\n    Emitter.prototype.removeAllListeners = Emitter.prototype.off;\n\n    Emitter.prototype.removeEventListener = Emitter.prototype.off;\n\n    Emitter.prototype.off = function(event, fn) {\n      var callback, callbacks, i, _i, _len;\n      if (!this._callbacks || arguments.length === 0) {\n        this._callbacks = {};\n        return this;\n      }\n      callbacks = this._callbacks[event];\n      if (!callbacks) {\n        return this;\n      }\n      if (arguments.length === 1) {\n        delete this._callbacks[event];\n        return this;\n      }\n      for (i = _i = 0, _len = callbacks.length; _i < _len; i = ++_i) {\n        callback = callbacks[i];\n        if (callback === fn) {\n          callbacks.splice(i, 1);\n          break;\n        }\n      }\n      return this;\n    };\n\n    return Emitter;\n\n  })();\n\n  Dropzone = (function(_super) {\n    var extend, resolveOption;\n\n    __extends(Dropzone, _super);\n\n    Dropzone.prototype.Emitter = Emitter;\n\n\n    /*\n    This is a list of all available events you can register on a dropzone object.\n    \n    You can register an event handler like this:\n    \n        dropzone.on(\"dragEnter\", function() { });\n     */\n\n    Dropzone.prototype.events = [\"drop\", \"dragstart\", \"dragend\", \"dragenter\", \"dragover\", \"dragleave\", \"addedfile\", \"addedfiles\", \"removedfile\", \"thumbnail\", \"error\", \"errormultiple\", \"processing\", \"processingmultiple\", \"uploadprogress\", \"totaluploadprogress\", \"sending\", \"sendingmultiple\", \"success\", \"successmultiple\", \"canceled\", \"canceledmultiple\", \"complete\", \"completemultiple\", \"reset\", \"maxfilesexceeded\", \"maxfilesreached\", \"queuecomplete\"];\n\n    Dropzone.prototype.defaultOptions = {\n      url: null,\n      method: \"post\",\n      withCredentials: false,\n      parallelUploads: 2,\n      uploadMultiple: false,\n      maxFilesize: 256,\n      paramName: \"file\",\n      createImageThumbnails: true,\n      maxThumbnailFilesize: 10,\n      thumbnailWidth: 120,\n      thumbnailHeight: 120,\n      filesizeBase: 1000,\n      maxFiles: null,\n      params: {},\n      clickable: true,\n      ignoreHiddenFiles: true,\n      acceptedFiles: null,\n      acceptedMimeTypes: null,\n      autoProcessQueue: true,\n      autoQueue: true,\n      addRemoveLinks: false,\n      previewsContainer: null,\n      hiddenInputContainer: \"body\",\n      capture: null,\n      renameFilename: null,\n      dictDefaultMessage: \"Arrastra los archivos aquí para subirlos\",\n      dictFallbackMessage: \"Your browser does not support drag'n'drop file uploads.\",\n      dictFallbackText: \"Please use the fallback form below to upload your files like in the olden days.\",\n      dictFileTooBig: \"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.\",\n      dictInvalidFileType: \"You can't upload files of this type.\",\n      dictResponseError: \"Server responded with {{statusCode}} code.\",\n      dictCancelUpload: \"Cancel upload\",\n      dictCancelUploadConfirmation: \"Are you sure you want to cancel this upload?\",\n      dictRemoveFile: \"Remover Archivo\",\n      dictRemoveFileConfirmation: null,\n      dictMaxFilesExceeded: \"You can not upload any more files.\",\n      accept: function(file, done) {\n        return done();\n      },\n      init: function() {\n        return noop;\n      },\n      forceFallback: false,\n      fallback: function() {\n        var child, messageElement, span, _i, _len, _ref;\n        this.element.className = \"\" + this.element.className + \" dz-browser-not-supported\";\n        _ref = this.element.getElementsByTagName(\"div\");\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          child = _ref[_i];\n          if (/(^| )dz-message($| )/.test(child.className)) {\n            messageElement = child;\n            child.className = \"dz-message\";\n            continue;\n          }\n        }\n        if (!messageElement) {\n          messageElement = Dropzone.createElement(\"<div class=\\\"dz-message\\\"><span></span></div>\");\n          this.element.appendChild(messageElement);\n        }\n        span = messageElement.getElementsByTagName(\"span\")[0];\n        if (span) {\n          if (span.textContent != null) {\n            span.textContent = this.options.dictFallbackMessage;\n          } else if (span.innerText != null) {\n            span.innerText = this.options.dictFallbackMessage;\n          }\n        }\n        return this.element.appendChild(this.getFallbackForm());\n      },\n      resize: function(file) {\n        var info, srcRatio, trgRatio;\n        info = {\n          srcX: 0,\n          srcY: 0,\n          srcWidth: file.width,\n          srcHeight: file.height\n        };\n        srcRatio = file.width / file.height;\n        info.optWidth = this.options.thumbnailWidth;\n        info.optHeight = this.options.thumbnailHeight;\n        if ((info.optWidth == null) && (info.optHeight == null)) {\n          info.optWidth = info.srcWidth;\n          info.optHeight = info.srcHeight;\n        } else if (info.optWidth == null) {\n          info.optWidth = srcRatio * info.optHeight;\n        } else if (info.optHeight == null) {\n          info.optHeight = (1 / srcRatio) * info.optWidth;\n        }\n        trgRatio = info.optWidth / info.optHeight;\n        if (file.height < info.optHeight || file.width < info.optWidth) {\n          info.trgHeight = info.srcHeight;\n          info.trgWidth = info.srcWidth;\n        } else {\n          if (srcRatio > trgRatio) {\n            info.srcHeight = file.height;\n            info.srcWidth = info.srcHeight * trgRatio;\n          } else {\n            info.srcWidth = file.width;\n            info.srcHeight = info.srcWidth / trgRatio;\n          }\n        }\n        info.srcX = (file.width - info.srcWidth) / 2;\n        info.srcY = (file.height - info.srcHeight) / 2;\n        return info;\n      },\n\n      /*\n      Those functions register themselves to the events on init and handle all\n      the user interface specific stuff. Overwriting them won't break the upload\n      but can break the way it's displayed.\n      You can overwrite them if you don't like the default behavior. If you just\n      want to add an additional event handler, register it on the dropzone object\n      and don't overwrite those options.\n       */\n      drop: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragstart: noop,\n      dragend: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      dragenter: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragover: function(e) {\n        return this.element.classList.add(\"dz-drag-hover\");\n      },\n      dragleave: function(e) {\n        return this.element.classList.remove(\"dz-drag-hover\");\n      },\n      paste: noop,\n      reset: function() {\n        return this.element.classList.remove(\"dz-started\");\n      },\n      addedfile: function(file) {\n        var node, removeFileEvent, removeLink, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n        if (this.element === this.previewsContainer) {\n          this.element.classList.add(\"dz-started\");\n        }\n        if (this.previewsContainer) {\n          file.previewElement = Dropzone.createElement(this.options.previewTemplate.trim());\n          file.previewTemplate = file.previewElement;\n          this.previewsContainer.appendChild(file.previewElement);\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-name]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            node.textContent = this._renameFilename(file.name);\n          }\n          _ref1 = file.previewElement.querySelectorAll(\"[data-dz-size]\");\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            node = _ref1[_j];\n            node.innerHTML = this.filesize(file.size);\n          }\n          if (this.options.addRemoveLinks) {\n            file._removeLink = Dropzone.createElement(\"<a class=\\\"dz-remove\\\" href=\\\"javascript:undefined;\\\" data-dz-remove>\" + this.options.dictRemoveFile + \"</a>\");\n            file.previewElement.appendChild(file._removeLink);\n          }\n          removeFileEvent = (function(_this) {\n            return function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              if (file.status === Dropzone.UPLOADING) {\n                return Dropzone.confirm(_this.options.dictCancelUploadConfirmation, function() {\n                  return _this.removeFile(file);\n                });\n              } else {\n                if (_this.options.dictRemoveFileConfirmation) {\n                  return Dropzone.confirm(_this.options.dictRemoveFileConfirmation, function() {\n                    return _this.removeFile(file);\n                  });\n                } else {\n                  return _this.removeFile(file);\n                }\n              }\n            };\n          })(this);\n          _ref2 = file.previewElement.querySelectorAll(\"[data-dz-remove]\");\n          _results = [];\n          for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n            removeLink = _ref2[_k];\n            _results.push(removeLink.addEventListener(\"click\", removeFileEvent));\n          }\n          return _results;\n        }\n      },\n      removedfile: function(file) {\n        var _ref;\n        if (file.previewElement) {\n          if ((_ref = file.previewElement) != null) {\n            _ref.parentNode.removeChild(file.previewElement);\n          }\n        }\n        return this._updateMaxFilesReachedClass();\n      },\n      thumbnail: function(file, dataUrl) {\n        var thumbnailElement, _i, _len, _ref;\n        if (file.previewElement) {\n          file.previewElement.classList.remove(\"dz-file-preview\");\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-thumbnail]\");\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            thumbnailElement = _ref[_i];\n            thumbnailElement.alt = file.name;\n            thumbnailElement.src = dataUrl;\n          }\n          return setTimeout(((function(_this) {\n            return function() {\n              return file.previewElement.classList.add(\"dz-image-preview\");\n            };\n          })(this)), 1);\n        }\n      },\n      error: function(file, message) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-error\");\n          if (typeof message !== \"String\" && message.error) {\n            message = message.error;\n          }\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-errormessage]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            _results.push(node.textContent = message);\n          }\n          return _results;\n        }\n      },\n      errormultiple: noop,\n      processing: function(file) {\n        if (file.previewElement) {\n          file.previewElement.classList.add(\"dz-processing\");\n          if (file._removeLink) {\n            return file._removeLink.textContent = this.options.dictCancelUpload;\n          }\n        }\n      },\n      processingmultiple: noop,\n      uploadprogress: function(file, progress, bytesSent) {\n        var node, _i, _len, _ref, _results;\n        if (file.previewElement) {\n          _ref = file.previewElement.querySelectorAll(\"[data-dz-uploadprogress]\");\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            node = _ref[_i];\n            if (node.nodeName === 'PROGRESS') {\n              _results.push(node.value = progress);\n            } else {\n              _results.push(node.style.width = \"\" + progress + \"%\");\n            }\n          }\n          return _results;\n        }\n      },\n      totaluploadprogress: noop,\n      sending: noop,\n      sendingmultiple: noop,\n      success: function(file) {\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-success\");\n        }\n      },\n      successmultiple: noop,\n      canceled: function(file) {\n        return this.emit(\"error\", file, \"Upload canceled.\");\n      },\n      canceledmultiple: noop,\n      complete: function(file) {\n        if (file._removeLink) {\n          file._removeLink.textContent = this.options.dictRemoveFile;\n        }\n        if (file.previewElement) {\n          return file.previewElement.classList.add(\"dz-complete\");\n        }\n      },\n      completemultiple: noop,\n      maxfilesexceeded: noop,\n      maxfilesreached: noop,\n      queuecomplete: noop,\n      addedfiles: noop,\n      previewTemplate: \"<div class=\\\"dz-preview dz-file-preview\\\">\\n  <div class=\\\"dz-image\\\"><img data-dz-thumbnail /></div>\\n  <div class=\\\"dz-details\\\">\\n    <div class=\\\"dz-size\\\"><span data-dz-size></span></div>\\n    <div class=\\\"dz-filename\\\"><span data-dz-name></span></div>\\n  </div>\\n  <div class=\\\"dz-progress\\\"><span class=\\\"dz-upload\\\" data-dz-uploadprogress></span></div>\\n  <div class=\\\"dz-error-message\\\"><span data-dz-errormessage></span></div>\\n  <div class=\\\"dz-success-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Check</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <path d=\\\"M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" stroke-opacity=\\\"0.198794158\\\" stroke=\\\"#747474\\\" fill-opacity=\\\"0.816519475\\\" fill=\\\"#FFFFFF\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n      </g>\\n    </svg>\\n  </div>\\n  <div class=\\\"dz-error-mark\\\">\\n    <svg width=\\\"54px\\\" height=\\\"54px\\\" viewBox=\\\"0 0 54 54\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" xmlns:sketch=\\\"http://www.bohemiancoding.com/sketch/ns\\\">\\n      <title>Error</title>\\n      <defs></defs>\\n      <g id=\\\"Page-1\\\" stroke=\\\"none\\\" stroke-width=\\\"1\\\" fill=\\\"none\\\" fill-rule=\\\"evenodd\\\" sketch:type=\\\"MSPage\\\">\\n        <g id=\\\"Check-+-Oval-2\\\" sketch:type=\\\"MSLayerGroup\\\" stroke=\\\"#747474\\\" stroke-opacity=\\\"0.198794158\\\" fill=\\\"#FFFFFF\\\" fill-opacity=\\\"0.816519475\\\">\\n          <path d=\\\"M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z\\\" id=\\\"Oval-2\\\" sketch:type=\\\"MSShapeGroup\\\"></path>\\n        </g>\\n      </g>\\n    </svg>\\n  </div>\\n</div>\"\n    };\n\n    extend = function() {\n      var key, object, objects, target, val, _i, _len;\n      target = arguments[0], objects = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      for (_i = 0, _len = objects.length; _i < _len; _i++) {\n        object = objects[_i];\n        for (key in object) {\n          val = object[key];\n          target[key] = val;\n        }\n      }\n      return target;\n    };\n\n    function Dropzone(element, options) {\n      var elementOptions, fallback, _ref;\n      this.element = element;\n      this.version = Dropzone.version;\n      this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\\n*/g, \"\");\n      this.clickableElements = [];\n      this.listeners = [];\n      this.files = [];\n      if (typeof this.element === \"string\") {\n        this.element = document.querySelector(this.element);\n      }\n      if (!(this.element && (this.element.nodeType != null))) {\n        throw new Error(\"Invalid dropzone element.\");\n      }\n      if (this.element.dropzone) {\n        throw new Error(\"Dropzone already attached.\");\n      }\n      Dropzone.instances.push(this);\n      this.element.dropzone = this;\n      elementOptions = (_ref = Dropzone.optionsForElement(this.element)) != null ? _ref : {};\n      this.options = extend({}, this.defaultOptions, elementOptions, options != null ? options : {});\n      if (this.options.forceFallback || !Dropzone.isBrowserSupported()) {\n        return this.options.fallback.call(this);\n      }\n      if (this.options.url == null) {\n        this.options.url = this.element.getAttribute(\"action\");\n      }\n      if (!this.options.url) {\n        throw new Error(\"No URL provided.\");\n      }\n      if (this.options.acceptedFiles && this.options.acceptedMimeTypes) {\n        throw new Error(\"You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.\");\n      }\n      if (this.options.acceptedMimeTypes) {\n        this.options.acceptedFiles = this.options.acceptedMimeTypes;\n        delete this.options.acceptedMimeTypes;\n      }\n      this.options.method = this.options.method.toUpperCase();\n      if ((fallback = this.getExistingFallback()) && fallback.parentNode) {\n        fallback.parentNode.removeChild(fallback);\n      }\n      if (this.options.previewsContainer !== false) {\n        if (this.options.previewsContainer) {\n          this.previewsContainer = Dropzone.getElement(this.options.previewsContainer, \"previewsContainer\");\n        } else {\n          this.previewsContainer = this.element;\n        }\n      }\n      if (this.options.clickable) {\n        if (this.options.clickable === true) {\n          this.clickableElements = [this.element];\n        } else {\n          this.clickableElements = Dropzone.getElements(this.options.clickable, \"clickable\");\n        }\n      }\n      this.init();\n    }\n\n    Dropzone.prototype.getAcceptedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getRejectedFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (!file.accepted) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getFilesWithStatus = function(status) {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === status) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.getQueuedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.QUEUED);\n    };\n\n    Dropzone.prototype.getUploadingFiles = function() {\n      return this.getFilesWithStatus(Dropzone.UPLOADING);\n    };\n\n    Dropzone.prototype.getAddedFiles = function() {\n      return this.getFilesWithStatus(Dropzone.ADDED);\n    };\n\n    Dropzone.prototype.getActiveFiles = function() {\n      var file, _i, _len, _ref, _results;\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status === Dropzone.UPLOADING || file.status === Dropzone.QUEUED) {\n          _results.push(file);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.init = function() {\n      var eventName, noPropagation, setupHiddenFileInput, _i, _len, _ref, _ref1;\n      if (this.element.tagName === \"form\") {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n      }\n      if (this.element.classList.contains(\"dropzone\") && !this.element.querySelector(\".dz-message\")) {\n        this.element.appendChild(Dropzone.createElement(\"<div class=\\\"dz-default dz-message\\\"><span>\" + this.options.dictDefaultMessage + \"</span></div>\"));\n      }\n      if (this.clickableElements.length) {\n        setupHiddenFileInput = (function(_this) {\n          return function() {\n            if (_this.hiddenFileInput) {\n              _this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput);\n            }\n            _this.hiddenFileInput = document.createElement(\"input\");\n            _this.hiddenFileInput.setAttribute(\"type\", \"file\");\n            if ((_this.options.maxFiles == null) || _this.options.maxFiles > 1) {\n              _this.hiddenFileInput.setAttribute(\"multiple\", \"multiple\");\n            }\n            _this.hiddenFileInput.className = \"dz-hidden-input\";\n            if (_this.options.acceptedFiles != null) {\n              _this.hiddenFileInput.setAttribute(\"accept\", _this.options.acceptedFiles);\n            }\n            if (_this.options.capture != null) {\n              _this.hiddenFileInput.setAttribute(\"capture\", _this.options.capture);\n            }\n            _this.hiddenFileInput.style.visibility = \"hidden\";\n            _this.hiddenFileInput.style.position = \"absolute\";\n            _this.hiddenFileInput.style.top = \"0\";\n            _this.hiddenFileInput.style.left = \"0\";\n            _this.hiddenFileInput.style.height = \"0\";\n            _this.hiddenFileInput.style.width = \"0\";\n            document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput);\n            return _this.hiddenFileInput.addEventListener(\"change\", function() {\n              var file, files, _i, _len;\n              files = _this.hiddenFileInput.files;\n              if (files.length) {\n                for (_i = 0, _len = files.length; _i < _len; _i++) {\n                  file = files[_i];\n                  _this.addFile(file);\n                }\n              }\n              _this.emit(\"addedfiles\", files);\n              return setupHiddenFileInput();\n            });\n          };\n        })(this);\n        setupHiddenFileInput();\n      }\n      this.URL = (_ref = window.URL) != null ? _ref : window.webkitURL;\n      _ref1 = this.events;\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        eventName = _ref1[_i];\n        this.on(eventName, this.options[eventName]);\n      }\n      this.on(\"uploadprogress\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"removedfile\", (function(_this) {\n        return function() {\n          return _this.updateTotalUploadProgress();\n        };\n      })(this));\n      this.on(\"canceled\", (function(_this) {\n        return function(file) {\n          return _this.emit(\"complete\", file);\n        };\n      })(this));\n      this.on(\"complete\", (function(_this) {\n        return function(file) {\n          if (_this.getAddedFiles().length === 0 && _this.getUploadingFiles().length === 0 && _this.getQueuedFiles().length === 0) {\n            return setTimeout((function() {\n              return _this.emit(\"queuecomplete\");\n            }), 0);\n          }\n        };\n      })(this));\n      noPropagation = function(e) {\n        e.stopPropagation();\n        if (e.preventDefault) {\n          return e.preventDefault();\n        } else {\n          return e.returnValue = false;\n        }\n      };\n      this.listeners = [\n        {\n          element: this.element,\n          events: {\n            \"dragstart\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragstart\", e);\n              };\n            })(this),\n            \"dragenter\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.emit(\"dragenter\", e);\n              };\n            })(this),\n            \"dragover\": (function(_this) {\n              return function(e) {\n                var efct;\n                try {\n                  efct = e.dataTransfer.effectAllowed;\n                } catch (_error) {}\n                e.dataTransfer.dropEffect = 'move' === efct || 'linkMove' === efct ? 'move' : 'copy';\n                noPropagation(e);\n                return _this.emit(\"dragover\", e);\n              };\n            })(this),\n            \"dragleave\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragleave\", e);\n              };\n            })(this),\n            \"drop\": (function(_this) {\n              return function(e) {\n                noPropagation(e);\n                return _this.drop(e);\n              };\n            })(this),\n            \"dragend\": (function(_this) {\n              return function(e) {\n                return _this.emit(\"dragend\", e);\n              };\n            })(this)\n          }\n        }\n      ];\n      this.clickableElements.forEach((function(_this) {\n        return function(clickableElement) {\n          return _this.listeners.push({\n            element: clickableElement,\n            events: {\n              \"click\": function(evt) {\n                if ((clickableElement !== _this.element) || (evt.target === _this.element || Dropzone.elementInside(evt.target, _this.element.querySelector(\".dz-message\")))) {\n                  _this.hiddenFileInput.click();\n                }\n                return true;\n              }\n            }\n          });\n        };\n      })(this));\n      this.enable();\n      return this.options.init.call(this);\n    };\n\n    Dropzone.prototype.destroy = function() {\n      var _ref;\n      this.disable();\n      this.removeAllFiles(true);\n      if ((_ref = this.hiddenFileInput) != null ? _ref.parentNode : void 0) {\n        this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput);\n        this.hiddenFileInput = null;\n      }\n      delete this.element.dropzone;\n      return Dropzone.instances.splice(Dropzone.instances.indexOf(this), 1);\n    };\n\n    Dropzone.prototype.updateTotalUploadProgress = function() {\n      var activeFiles, file, totalBytes, totalBytesSent, totalUploadProgress, _i, _len, _ref;\n      totalBytesSent = 0;\n      totalBytes = 0;\n      activeFiles = this.getActiveFiles();\n      if (activeFiles.length) {\n        _ref = this.getActiveFiles();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          totalBytesSent += file.upload.bytesSent;\n          totalBytes += file.upload.total;\n        }\n        totalUploadProgress = 100 * totalBytesSent / totalBytes;\n      } else {\n        totalUploadProgress = 100;\n      }\n      return this.emit(\"totaluploadprogress\", totalUploadProgress, totalBytes, totalBytesSent);\n    };\n\n    Dropzone.prototype._getParamName = function(n) {\n      if (typeof this.options.paramName === \"function\") {\n        return this.options.paramName(n);\n      } else {\n        return \"\" + this.options.paramName + (this.options.uploadMultiple ? \"[\" + n + \"]\" : \"\");\n      }\n    };\n\n    Dropzone.prototype._renameFilename = function(name) {\n      if (typeof this.options.renameFilename !== \"function\") {\n        return name;\n      }\n      return this.options.renameFilename(name);\n    };\n\n    Dropzone.prototype.getFallbackForm = function() {\n      var existingFallback, fields, fieldsString, form;\n      if (existingFallback = this.getExistingFallback()) {\n        return existingFallback;\n      }\n      fieldsString = \"<div class=\\\"dz-fallback\\\">\";\n      if (this.options.dictFallbackText) {\n        fieldsString += \"<p>\" + this.options.dictFallbackText + \"</p>\";\n      }\n      fieldsString += \"<input type=\\\"file\\\" name=\\\"\" + (this._getParamName(0)) + \"\\\" \" + (this.options.uploadMultiple ? 'multiple=\"multiple\"' : void 0) + \" /><input type=\\\"submit\\\" value=\\\"Upload!\\\"></div>\";\n      fields = Dropzone.createElement(fieldsString);\n      if (this.element.tagName !== \"FORM\") {\n        form = Dropzone.createElement(\"<form action=\\\"\" + this.options.url + \"\\\" enctype=\\\"multipart/form-data\\\" method=\\\"\" + this.options.method + \"\\\"></form>\");\n        form.appendChild(fields);\n      } else {\n        this.element.setAttribute(\"enctype\", \"multipart/form-data\");\n        this.element.setAttribute(\"method\", this.options.method);\n      }\n      return form != null ? form : fields;\n    };\n\n    Dropzone.prototype.getExistingFallback = function() {\n      var fallback, getFallback, tagName, _i, _len, _ref;\n      getFallback = function(elements) {\n        var el, _i, _len;\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )fallback($| )/.test(el.className)) {\n            return el;\n          }\n        }\n      };\n      _ref = [\"div\", \"form\"];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        tagName = _ref[_i];\n        if (fallback = getFallback(this.element.getElementsByTagName(tagName))) {\n          return fallback;\n        }\n      }\n    };\n\n    Dropzone.prototype.setupEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.addEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.removeEventListeners = function() {\n      var elementListeners, event, listener, _i, _len, _ref, _results;\n      _ref = this.listeners;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elementListeners = _ref[_i];\n        _results.push((function() {\n          var _ref1, _results1;\n          _ref1 = elementListeners.events;\n          _results1 = [];\n          for (event in _ref1) {\n            listener = _ref1[event];\n            _results1.push(elementListeners.element.removeEventListener(event, listener, false));\n          }\n          return _results1;\n        })());\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.disable = function() {\n      var file, _i, _len, _ref, _results;\n      this.clickableElements.forEach(function(element) {\n        return element.classList.remove(\"dz-clickable\");\n      });\n      this.removeEventListeners();\n      _ref = this.files;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        _results.push(this.cancelUpload(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype.enable = function() {\n      this.clickableElements.forEach(function(element) {\n        return element.classList.add(\"dz-clickable\");\n      });\n      return this.setupEventListeners();\n    };\n\n    Dropzone.prototype.filesize = function(size) {\n      var cutoff, i, selectedSize, selectedUnit, unit, units, _i, _len;\n      selectedSize = 0;\n      selectedUnit = \"b\";\n      if (size > 0) {\n        units = ['TB', 'GB', 'MB', 'KB', 'b'];\n        for (i = _i = 0, _len = units.length; _i < _len; i = ++_i) {\n          unit = units[i];\n          cutoff = Math.pow(this.options.filesizeBase, 4 - i) / 10;\n          if (size >= cutoff) {\n            selectedSize = size / Math.pow(this.options.filesizeBase, 4 - i);\n            selectedUnit = unit;\n            break;\n          }\n        }\n        selectedSize = Math.round(10 * selectedSize) / 10;\n      }\n      return \"<strong>\" + selectedSize + \"</strong> \" + selectedUnit;\n    };\n\n    Dropzone.prototype._updateMaxFilesReachedClass = function() {\n      if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        if (this.getAcceptedFiles().length === this.options.maxFiles) {\n          this.emit('maxfilesreached', this.files);\n        }\n        return this.element.classList.add(\"dz-max-files-reached\");\n      } else {\n        return this.element.classList.remove(\"dz-max-files-reached\");\n      }\n    };\n\n    Dropzone.prototype.drop = function(e) {\n      var files, items;\n      if (!e.dataTransfer) {\n        return;\n      }\n      this.emit(\"drop\", e);\n      files = e.dataTransfer.files;\n      this.emit(\"addedfiles\", files);\n      if (files.length) {\n        items = e.dataTransfer.items;\n        if (items && items.length && (items[0].webkitGetAsEntry != null)) {\n          this._addFilesFromItems(items);\n        } else {\n          this.handleFiles(files);\n        }\n      }\n    };\n\n    Dropzone.prototype.paste = function(e) {\n      var items, _ref;\n      if ((e != null ? (_ref = e.clipboardData) != null ? _ref.items : void 0 : void 0) == null) {\n        return;\n      }\n      this.emit(\"paste\", e);\n      items = e.clipboardData.items;\n      if (items.length) {\n        return this._addFilesFromItems(items);\n      }\n    };\n\n    Dropzone.prototype.handleFiles = function(files) {\n      var file, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        _results.push(this.addFile(file));\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromItems = function(items) {\n      var entry, item, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = items.length; _i < _len; _i++) {\n        item = items[_i];\n        if ((item.webkitGetAsEntry != null) && (entry = item.webkitGetAsEntry())) {\n          if (entry.isFile) {\n            _results.push(this.addFile(item.getAsFile()));\n          } else if (entry.isDirectory) {\n            _results.push(this._addFilesFromDirectory(entry, entry.name));\n          } else {\n            _results.push(void 0);\n          }\n        } else if (item.getAsFile != null) {\n          if ((item.kind == null) || item.kind === \"file\") {\n            _results.push(this.addFile(item.getAsFile()));\n          } else {\n            _results.push(void 0);\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Dropzone.prototype._addFilesFromDirectory = function(directory, path) {\n      var dirReader, errorHandler, readEntries;\n      dirReader = directory.createReader();\n      errorHandler = function(error) {\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log(error) : void 0 : void 0;\n      };\n      readEntries = (function(_this) {\n        return function() {\n          return dirReader.readEntries(function(entries) {\n            var entry, _i, _len;\n            if (entries.length > 0) {\n              for (_i = 0, _len = entries.length; _i < _len; _i++) {\n                entry = entries[_i];\n                if (entry.isFile) {\n                  entry.file(function(file) {\n                    if (_this.options.ignoreHiddenFiles && file.name.substring(0, 1) === '.') {\n                      return;\n                    }\n                    file.fullPath = \"\" + path + \"/\" + file.name;\n                    return _this.addFile(file);\n                  });\n                } else if (entry.isDirectory) {\n                  _this._addFilesFromDirectory(entry, \"\" + path + \"/\" + entry.name);\n                }\n              }\n              readEntries();\n            }\n            return null;\n          }, errorHandler);\n        };\n      })(this);\n      return readEntries();\n    };\n\n    Dropzone.prototype.accept = function(file, done) {\n      if (file.size > this.options.maxFilesize * 1024 * 1024) {\n        return done(this.options.dictFileTooBig.replace(\"{{filesize}}\", Math.round(file.size / 1024 / 10.24) / 100).replace(\"{{maxFilesize}}\", this.options.maxFilesize));\n      } else if (!Dropzone.isValidFile(file, this.options.acceptedFiles)) {\n        return done(this.options.dictInvalidFileType);\n      } else if ((this.options.maxFiles != null) && this.getAcceptedFiles().length >= this.options.maxFiles) {\n        done(this.options.dictMaxFilesExceeded.replace(\"{{maxFiles}}\", this.options.maxFiles));\n        return this.emit(\"maxfilesexceeded\", file);\n      } else {\n        return this.options.accept.call(this, file, done);\n      }\n    };\n\n    Dropzone.prototype.addFile = function(file) {\n      file.upload = {\n        progress: 0,\n        total: file.size,\n        bytesSent: 0\n      };\n      this.files.push(file);\n      file.status = Dropzone.ADDED;\n      this.emit(\"addedfile\", file);\n      this._enqueueThumbnail(file);\n      return this.accept(file, (function(_this) {\n        return function(error) {\n          if (error) {\n            file.accepted = false;\n            _this._errorProcessing([file], error);\n          } else {\n            file.accepted = true;\n            if (_this.options.autoQueue) {\n              _this.enqueueFile(file);\n            }\n          }\n          return _this._updateMaxFilesReachedClass();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.enqueueFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        this.enqueueFile(file);\n      }\n      return null;\n    };\n\n    Dropzone.prototype.enqueueFile = function(file) {\n      if (file.status === Dropzone.ADDED && file.accepted === true) {\n        file.status = Dropzone.QUEUED;\n        if (this.options.autoProcessQueue) {\n          return setTimeout(((function(_this) {\n            return function() {\n              return _this.processQueue();\n            };\n          })(this)), 0);\n        }\n      } else {\n        throw new Error(\"This file can't be queued because it has already been processed or was rejected.\");\n      }\n    };\n\n    Dropzone.prototype._thumbnailQueue = [];\n\n    Dropzone.prototype._processingThumbnail = false;\n\n    Dropzone.prototype._enqueueThumbnail = function(file) {\n      if (this.options.createImageThumbnails && file.type.match(/image.*/) && file.size <= this.options.maxThumbnailFilesize * 1024 * 1024) {\n        this._thumbnailQueue.push(file);\n        return setTimeout(((function(_this) {\n          return function() {\n            return _this._processThumbnailQueue();\n          };\n        })(this)), 0);\n      }\n    };\n\n    Dropzone.prototype._processThumbnailQueue = function() {\n      if (this._processingThumbnail || this._thumbnailQueue.length === 0) {\n        return;\n      }\n      this._processingThumbnail = true;\n      return this.createThumbnail(this._thumbnailQueue.shift(), (function(_this) {\n        return function() {\n          _this._processingThumbnail = false;\n          return _this._processThumbnailQueue();\n        };\n      })(this));\n    };\n\n    Dropzone.prototype.removeFile = function(file) {\n      if (file.status === Dropzone.UPLOADING) {\n        this.cancelUpload(file);\n      }\n      this.files = without(this.files, file);\n      this.emit(\"removedfile\", file);\n      if (this.files.length === 0) {\n        return this.emit(\"reset\");\n      }\n    };\n\n    Dropzone.prototype.removeAllFiles = function(cancelIfNecessary) {\n      var file, _i, _len, _ref;\n      if (cancelIfNecessary == null) {\n        cancelIfNecessary = false;\n      }\n      _ref = this.files.slice();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        file = _ref[_i];\n        if (file.status !== Dropzone.UPLOADING || cancelIfNecessary) {\n          this.removeFile(file);\n        }\n      }\n      return null;\n    };\n\n    Dropzone.prototype.createThumbnail = function(file, callback) {\n      var fileReader;\n      fileReader = new FileReader;\n      fileReader.onload = (function(_this) {\n        return function() {\n          if (file.type === \"image/svg+xml\") {\n            _this.emit(\"thumbnail\", file, fileReader.result);\n            if (callback != null) {\n              callback();\n            }\n            return;\n          }\n          return _this.createThumbnailFromUrl(file, fileReader.result, callback);\n        };\n      })(this);\n      return fileReader.readAsDataURL(file);\n    };\n\n    Dropzone.prototype.createThumbnailFromUrl = function(file, imageUrl, callback, crossOrigin) {\n      var img;\n      img = document.createElement(\"img\");\n      if (crossOrigin) {\n        img.crossOrigin = crossOrigin;\n      }\n      img.onload = (function(_this) {\n        return function() {\n          var canvas, ctx, resizeInfo, thumbnail, _ref, _ref1, _ref2, _ref3;\n          file.width = img.width;\n          file.height = img.height;\n          resizeInfo = _this.options.resize.call(_this, file);\n          if (resizeInfo.trgWidth == null) {\n            resizeInfo.trgWidth = resizeInfo.optWidth;\n          }\n          if (resizeInfo.trgHeight == null) {\n            resizeInfo.trgHeight = resizeInfo.optHeight;\n          }\n          canvas = document.createElement(\"canvas\");\n          ctx = canvas.getContext(\"2d\");\n          canvas.width = resizeInfo.trgWidth;\n          canvas.height = resizeInfo.trgHeight;\n          drawImageIOSFix(ctx, img, (_ref = resizeInfo.srcX) != null ? _ref : 0, (_ref1 = resizeInfo.srcY) != null ? _ref1 : 0, resizeInfo.srcWidth, resizeInfo.srcHeight, (_ref2 = resizeInfo.trgX) != null ? _ref2 : 0, (_ref3 = resizeInfo.trgY) != null ? _ref3 : 0, resizeInfo.trgWidth, resizeInfo.trgHeight);\n          thumbnail = canvas.toDataURL(\"image/png\");\n          _this.emit(\"thumbnail\", file, thumbnail);\n          if (callback != null) {\n            return callback();\n          }\n        };\n      })(this);\n      if (callback != null) {\n        img.onerror = callback;\n      }\n    \n      return img.src = imageUrl;\n    };\n\n    Dropzone.prototype.processQueue = function() {\n      var i, parallelUploads, processingLength, queuedFiles;\n      parallelUploads = this.options.parallelUploads;\n      processingLength = this.getUploadingFiles().length;\n      i = processingLength;\n      if (processingLength >= parallelUploads) {\n        return;\n      }\n      queuedFiles = this.getQueuedFiles();\n      if (!(queuedFiles.length > 0)) {\n        return;\n      }\n      if (this.options.uploadMultiple) {\n        return this.processFiles(queuedFiles.slice(0, parallelUploads - processingLength));\n      } else {\n        while (i < parallelUploads) {\n          if (!queuedFiles.length) {\n            return;\n          }\n          this.processFile(queuedFiles.shift());\n          i++;\n        }\n      }\n    };\n\n    Dropzone.prototype.processFile = function(file) {\n      return this.processFiles([file]);\n    };\n\n    Dropzone.prototype.processFiles = function(files) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.processing = true;\n        file.status = Dropzone.UPLOADING;\n        this.emit(\"processing\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"processingmultiple\", files);\n      }\n      return this.uploadFiles(files);\n    };\n\n    Dropzone.prototype._getFilesWithXhr = function(xhr) {\n      var file, files;\n      return files = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.files;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          file = _ref[_i];\n          if (file.xhr === xhr) {\n            _results.push(file);\n          }\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Dropzone.prototype.cancelUpload = function(file) {\n      var groupedFile, groupedFiles, _i, _j, _len, _len1, _ref;\n      if (file.status === Dropzone.UPLOADING) {\n        groupedFiles = this._getFilesWithXhr(file.xhr);\n        for (_i = 0, _len = groupedFiles.length; _i < _len; _i++) {\n          groupedFile = groupedFiles[_i];\n          groupedFile.status = Dropzone.CANCELED;\n        }\n        file.xhr.abort();\n        for (_j = 0, _len1 = groupedFiles.length; _j < _len1; _j++) {\n          groupedFile = groupedFiles[_j];\n          this.emit(\"canceled\", groupedFile);\n        }\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", groupedFiles);\n        }\n      } else if ((_ref = file.status) === Dropzone.ADDED || _ref === Dropzone.QUEUED) {\n        file.status = Dropzone.CANCELED;\n        this.emit(\"canceled\", file);\n        if (this.options.uploadMultiple) {\n          this.emit(\"canceledmultiple\", [file]);\n        }\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    resolveOption = function() {\n      var args, option;\n      option = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (typeof option === 'function') {\n        return option.apply(this, args);\n      }\n      return option;\n    };\n\n    Dropzone.prototype.uploadFile = function(file) {\n      return this.uploadFiles([file]);\n    };\n\n    Dropzone.prototype.uploadFiles = function(files) {\n      var file, formData, handleError, headerName, headerValue, headers, i, input, inputName, inputType, key, method, option, progressObj, response, updateProgress, url, value, xhr, _i, _j, _k, _l, _len, _len1, _len2, _len3, _m, _ref, _ref1, _ref2, _ref3, _ref4, _ref5;\n      xhr = new XMLHttpRequest();\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.xhr = xhr;\n      }\n      method = resolveOption(this.options.method, files);\n      url = resolveOption(this.options.url, files);\n      xhr.open(method, url, true);\n      xhr.withCredentials = !!this.options.withCredentials;\n      response = null;\n      handleError = (function(_this) {\n        return function() {\n          var _j, _len1, _results;\n          _results = [];\n          for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n            file = files[_j];\n            _results.push(_this._errorProcessing(files, response || _this.options.dictResponseError.replace(\"{{statusCode}}\", xhr.status), xhr));\n          }\n          return _results;\n        };\n      })(this);\n      updateProgress = (function(_this) {\n        return function(e) {\n          var allFilesFinished, progress, _j, _k, _l, _len1, _len2, _len3, _results;\n          if (e != null) {\n            progress = 100 * e.loaded / e.total;\n            for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n              file = files[_j];\n              file.upload = {\n                progress: progress,\n                total: e.total,\n                bytesSent: e.loaded\n              };\n            }\n          } else {\n            allFilesFinished = true;\n            progress = 100;\n            for (_k = 0, _len2 = files.length; _k < _len2; _k++) {\n              file = files[_k];\n              if (!(file.upload.progress === 100 && file.upload.bytesSent === file.upload.total)) {\n                allFilesFinished = false;\n              }\n              file.upload.progress = progress;\n              file.upload.bytesSent = file.upload.total;\n            }\n            if (allFilesFinished) {\n              return;\n            }\n          }\n          _results = [];\n          for (_l = 0, _len3 = files.length; _l < _len3; _l++) {\n            file = files[_l];\n            _results.push(_this.emit(\"uploadprogress\", file, progress, file.upload.bytesSent));\n          }\n          return _results;\n        };\n      })(this);\n      xhr.onload = (function(_this) {\n        return function(e) {\n          var _ref;\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          if (xhr.readyState !== 4) {\n            return;\n          }\n          response = xhr.responseText;\n          if (xhr.getResponseHeader(\"content-type\") && ~xhr.getResponseHeader(\"content-type\").indexOf(\"application/json\")) {\n            try {\n              response = JSON.parse(response);\n            } catch (_error) {\n              e = _error;\n              response = \"Invalid JSON response from server.\";\n            }\n          }\n          updateProgress();\n          if (!((200 <= (_ref = xhr.status) && _ref < 300))) {\n            return handleError();\n          } else {\n            return _this._finished(files, response, e);\n          }\n        };\n      })(this);\n      xhr.onerror = (function(_this) {\n        return function() {\n          if (files[0].status === Dropzone.CANCELED) {\n            return;\n          }\n          return handleError();\n        };\n      })(this);\n      progressObj = (_ref = xhr.upload) != null ? _ref : xhr;\n      progressObj.onprogress = updateProgress;\n      headers = {\n        \"Accept\": \"application/json\",\n        \"Cache-Control\": \"no-cache\",\n        \"X-Requested-With\": \"XMLHttpRequest\"\n      };\n      if (this.options.headers) {\n        extend(headers, this.options.headers);\n      }\n      for (headerName in headers) {\n        headerValue = headers[headerName];\n        if (headerValue) {\n          xhr.setRequestHeader(headerName, headerValue);\n        }\n      }\n      formData = new FormData();\n      if (this.options.params) {\n        _ref1 = this.options.params;\n        for (key in _ref1) {\n          value = _ref1[key];\n          formData.append(key, value);\n        }\n      }\n      for (_j = 0, _len1 = files.length; _j < _len1; _j++) {\n        file = files[_j];\n        this.emit(\"sending\", file, xhr, formData);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"sendingmultiple\", files, xhr, formData);\n      }\n      if (this.element.tagName === \"FORM\") {\n        _ref2 = this.element.querySelectorAll(\"input, textarea, select, button\");\n        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n          input = _ref2[_k];\n          inputName = input.getAttribute(\"name\");\n          inputType = input.getAttribute(\"type\");\n          if (input.tagName === \"SELECT\" && input.hasAttribute(\"multiple\")) {\n            _ref3 = input.options;\n            for (_l = 0, _len3 = _ref3.length; _l < _len3; _l++) {\n              option = _ref3[_l];\n              if (option.selected) {\n                formData.append(inputName, option.value);\n              }\n            }\n          } else if (!inputType || ((_ref4 = inputType.toLowerCase()) !== \"checkbox\" && _ref4 !== \"radio\") || input.checked) {\n            formData.append(inputName, input.value);\n          }\n        }\n      }\n      for (i = _m = 0, _ref5 = files.length - 1; 0 <= _ref5 ? _m <= _ref5 : _m >= _ref5; i = 0 <= _ref5 ? ++_m : --_m) {\n        formData.append(this._getParamName(i), files[i], this._renameFilename(files[i].name));\n      }\n      return this.submitRequest(xhr, formData, files);\n    };\n\n    Dropzone.prototype.submitRequest = function(xhr, formData, files) {\n      return xhr.send(formData);\n    };\n\n    Dropzone.prototype._finished = function(files, responseText, e) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.SUCCESS;\n        this.emit(\"success\", file, responseText, e);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"successmultiple\", files, responseText, e);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    Dropzone.prototype._errorProcessing = function(files, message, xhr) {\n      var file, _i, _len;\n      for (_i = 0, _len = files.length; _i < _len; _i++) {\n        file = files[_i];\n        file.status = Dropzone.ERROR;\n        this.emit(\"error\", file, message, xhr);\n        this.emit(\"complete\", file);\n      }\n      if (this.options.uploadMultiple) {\n        this.emit(\"errormultiple\", files, message, xhr);\n        this.emit(\"completemultiple\", files);\n      }\n      if (this.options.autoProcessQueue) {\n        return this.processQueue();\n      }\n    };\n\n    return Dropzone;\n\n  })(Emitter);\n\n  Dropzone.version = \"4.3.0\";\n\n  Dropzone.options = {};\n\n  Dropzone.optionsForElement = function(element) {\n    if (element.getAttribute(\"id\")) {\n      return Dropzone.options[camelize(element.getAttribute(\"id\"))];\n    } else {\n      return void 0;\n    }\n  };\n\n  Dropzone.instances = [];\n\n  Dropzone.forElement = function(element) {\n    if (typeof element === \"string\") {\n      element = document.querySelector(element);\n    }\n    if ((element != null ? element.dropzone : void 0) == null) {\n      throw new Error(\"No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.\");\n    }\n    return element.dropzone;\n  };\n\n  Dropzone.autoDiscover = true;\n\n  Dropzone.discover = function() {\n    var checkElements, dropzone, dropzones, _i, _len, _results;\n    if (document.querySelectorAll) {\n      dropzones = document.querySelectorAll(\".dropzone\");\n    } else {\n      dropzones = [];\n      checkElements = function(elements) {\n        var el, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = elements.length; _i < _len; _i++) {\n          el = elements[_i];\n          if (/(^| )dropzone($| )/.test(el.className)) {\n            _results.push(dropzones.push(el));\n          } else {\n            _results.push(void 0);\n          }\n        }\n        return _results;\n      };\n      checkElements(document.getElementsByTagName(\"div\"));\n      checkElements(document.getElementsByTagName(\"form\"));\n    }\n    _results = [];\n    for (_i = 0, _len = dropzones.length; _i < _len; _i++) {\n      dropzone = dropzones[_i];\n      if (Dropzone.optionsForElement(dropzone) !== false) {\n        _results.push(new Dropzone(dropzone));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  Dropzone.blacklistedBrowsers = [/opera.*Macintosh.*version\\/12/i];\n\n  Dropzone.isBrowserSupported = function() {\n    var capableBrowser, regex, _i, _len, _ref;\n    capableBrowser = true;\n    if (window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector) {\n      if (!(\"classList\" in document.createElement(\"a\"))) {\n        capableBrowser = false;\n      } else {\n        _ref = Dropzone.blacklistedBrowsers;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          regex = _ref[_i];\n          if (regex.test(navigator.userAgent)) {\n            capableBrowser = false;\n            continue;\n          }\n        }\n      }\n    } else {\n      capableBrowser = false;\n    }\n    return capableBrowser;\n  };\n\n  without = function(list, rejectedItem) {\n    var item, _i, _len, _results;\n    _results = [];\n    for (_i = 0, _len = list.length; _i < _len; _i++) {\n      item = list[_i];\n      if (item !== rejectedItem) {\n        _results.push(item);\n      }\n    }\n    return _results;\n  };\n\n  camelize = function(str) {\n    return str.replace(/[\\-_](\\w)/g, function(match) {\n      return match.charAt(1).toUpperCase();\n    });\n  };\n\n  Dropzone.createElement = function(string) {\n    var div;\n    div = document.createElement(\"div\");\n    div.innerHTML = string;\n    return div.childNodes[0];\n  };\n\n  Dropzone.elementInside = function(element, container) {\n    if (element === container) {\n      return true;\n    }\n    while (element = element.parentNode) {\n      if (element === container) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  Dropzone.getElement = function(el, name) {\n    var element;\n    if (typeof el === \"string\") {\n      element = document.querySelector(el);\n    } else if (el.nodeType != null) {\n      element = el;\n    }\n    if (element == null) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector or a plain HTML element.\");\n    }\n    return element;\n  };\n\n  Dropzone.getElements = function(els, name) {\n    var e, el, elements, _i, _j, _len, _len1, _ref;\n    if (els instanceof Array) {\n      elements = [];\n      try {\n        for (_i = 0, _len = els.length; _i < _len; _i++) {\n          el = els[_i];\n          elements.push(this.getElement(el, name));\n        }\n      } catch (_error) {\n        e = _error;\n        elements = null;\n      }\n    } else if (typeof els === \"string\") {\n      elements = [];\n      _ref = document.querySelectorAll(els);\n      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n        el = _ref[_j];\n        elements.push(el);\n      }\n    } else if (els.nodeType != null) {\n      elements = [els];\n    }\n    if (!((elements != null) && elements.length)) {\n      throw new Error(\"Invalid `\" + name + \"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.\");\n    }\n    return elements;\n  };\n\n  Dropzone.confirm = function(question, accepted, rejected) {\n    if (window.confirm(question)) {\n      return accepted();\n    } else if (rejected != null) {\n      return rejected();\n    }\n  };\n\n  Dropzone.isValidFile = function(file, acceptedFiles) {\n    var baseMimeType, mimeType, validType, _i, _len;\n    if (!acceptedFiles) {\n      return true;\n    }\n    acceptedFiles = acceptedFiles.split(\",\");\n    mimeType = file.type;\n    baseMimeType = mimeType.replace(/\\/.*$/, \"\");\n    for (_i = 0, _len = acceptedFiles.length; _i < _len; _i++) {\n      validType = acceptedFiles[_i];\n      validType = validType.trim();\n      if (validType.charAt(0) === \".\") {\n        if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n          return true;\n        }\n      } else if (/\\/\\*$/.test(validType)) {\n        if (baseMimeType === validType.replace(/\\/.*$/, \"\")) {\n          return true;\n        }\n      } else {\n        if (mimeType === validType) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n\n  if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n    jQuery.fn.dropzone = function(options) {\n      return this.each(function() {\n        return new Dropzone(this, options);\n      });\n    };\n  }\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Dropzone;\n  } else {\n    window.Dropzone = Dropzone;\n  }\n\n  Dropzone.ADDED = \"added\";\n\n  Dropzone.QUEUED = \"queued\";\n\n  Dropzone.ACCEPTED = Dropzone.QUEUED;\n\n  Dropzone.UPLOADING = \"uploading\";\n\n  Dropzone.PROCESSING = Dropzone.UPLOADING;\n\n  Dropzone.CANCELED = \"canceled\";\n\n  Dropzone.ERROR = \"error\";\n\n  Dropzone.SUCCESS = \"success\";\n\n\n  /*\n  \n  Bugfix for iOS 6 and 7\n  Source: http://stackoverflow.com/questions/11929099/html5-canvas-drawimage-ratio-bug-ios\n  based on the work of https://github.com/stomita/ios-imagefile-megapixel\n   */\n\n  detectVerticalSquash = function(img) {\n    var alpha, canvas, ctx, data, ey, ih, iw, py, ratio, sy;\n    iw = img.naturalWidth;\n    ih = img.naturalHeight;\n    canvas = document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = ih;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    data = ctx.getImageData(0, 0, 1, ih).data;\n    sy = 0;\n    ey = ih;\n    py = ih;\n    while (py > sy) {\n      alpha = data[(py - 1) * 4 + 3];\n      if (alpha === 0) {\n        ey = py;\n      } else {\n        sy = py;\n      }\n      py = (ey + sy) >> 1;\n    }\n    ratio = py / ih;\n    if (ratio === 0) {\n      return 1;\n    } else {\n      return ratio;\n    }\n  };\n\n  drawImageIOSFix = function(ctx, img, sx, sy, sw, sh, dx, dy, dw, dh) {\n    var vertSquashRatio;\n    vertSquashRatio = detectVerticalSquash(img);\n    return ctx.drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh / vertSquashRatio);\n  };\n\n\n  /*\n   * contentloaded.js\n   *\n   * Author: Diego Perini (diego.perini at gmail.com)\n   * Summary: cross-browser wrapper for DOMContentLoaded\n   * Updated: 20101020\n   * License: MIT\n   * Version: 1.2\n   *\n   * URL:\n   * http://javascript.nwbox.com/ContentLoaded/\n   * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE\n   */\n\n  contentLoaded = function(win, fn) {\n    var add, doc, done, init, poll, pre, rem, root, top;\n    done = false;\n    top = true;\n    doc = win.document;\n    root = doc.documentElement;\n    add = (doc.addEventListener ? \"addEventListener\" : \"attachEvent\");\n    rem = (doc.addEventListener ? \"removeEventListener\" : \"detachEvent\");\n    pre = (doc.addEventListener ? \"\" : \"on\");\n    init = function(e) {\n      if (e.type === \"readystatechange\" && doc.readyState !== \"complete\") {\n        return;\n      }\n      (e.type === \"load\" ? win : doc)[rem](pre + e.type, init, false);\n      if (!done && (done = true)) {\n        return fn.call(win, e.type || e);\n      }\n    };\n    poll = function() {\n      var e;\n      try {\n        root.doScroll(\"left\");\n      } catch (_error) {\n        e = _error;\n        setTimeout(poll, 50);\n        return;\n      }\n      return init(\"poll\");\n    };\n    if (doc.readyState !== \"complete\") {\n      if (doc.createEventObject && root.doScroll) {\n        try {\n          top = !win.frameElement;\n        } catch (_error) {}\n        if (top) {\n          poll();\n        }\n      }\n      doc[add](pre + \"DOMContentLoaded\", init, false);\n      doc[add](pre + \"readystatechange\", init, false);\n      return win[add](pre + \"load\", init, false);\n    }\n  };\n\n  Dropzone._autoDiscoverFunction = function() {\n    if (Dropzone.autoDiscover) {\n      return Dropzone.discover();\n    }\n  };\n\n  contentLoaded(window, Dropzone._autoDiscoverFunction);\n\n}).call(this);\n"]}